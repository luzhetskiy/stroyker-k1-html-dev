"use strict";var breakpoints={xs:0,sm:576,md:768,lg:1024,xl:1280};function throttle(t,e,a){var o,n=a||{},i=n.noTrailing,s=void 0!==i&&i,r=n.noLeading,l=void 0!==r&&r,c=n.debounceMode,d=void 0===c?void 0:c,u=!1,m=0;function h(){o&&clearTimeout(o)}function p(){for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];var r=this,c=Date.now()-m;function p(){m=Date.now(),e.apply(r,n)}function v(){o=void 0}u||(l||!d||o||p(),h(),void 0===d&&c>t?l?(m=Date.now(),s||(o=setTimeout(d?v:p,t))):p():!0!==s&&(o=setTimeout(d?v:p,void 0===d?t-c:t)))}return p.cancel=function(t){var e=(t||{}).upcomingOnly,a=void 0!==e&&e;h(),u=!a},p}function debounce(t,e,a){var o=(a||{}).atBegin;return throttle(t,e,{debounceMode:!1!==(void 0!==o&&o)})}var trotleFunc=debounce(1e3,(function(){console.log(123)}));function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function sliderDebounce(t,e,a){var o=!1;return function(){var n=arguments,i=this;o&&clearTimeout(o),o=setTimeout((function(){t.apply(a||i,n)}),e)}}window.addEventListener("scroll",(function(){trotleFunc(),console.log(523)}));var SliderConstructor=function(){function t(e){_classCallCheck(this,t),this.element=e}return _createClass(t,[{key:"init",value:function(){var t=this;this.params={},this.params.autoplay=null!==this.element.getAttribute("data-autoplay-timeout"),this.params.autoplayTimeout=+this.element.getAttribute("data-autoplay-timeout")||5e3,this.params.arrows=null===this.element.getAttribute("data-no-arrows"),window.matchMedia("(min-width: 575.98px)").matches?this.params.dots=null===this.element.getAttribute("data-no-dots"):this.params.dots=!0,this.params.adaptiveHeight=null!==this.element.getAttribute("data-adaptive-height"),this.params.centerMode=null!==this.element.getAttribute("data-center"),this.params.count={},this.params.count.xs=+this.element.getAttribute("data-slides")||1,this.params.count.sm=+this.element.getAttribute("data-sm-slides")||this.params.count.xs,this.params.count.md=+this.element.getAttribute("data-md-slides")||this.params.count.sm,this.params.count.lg=+this.element.getAttribute("data-lg-slides")||this.params.count.md,this.params.count.xl=+this.element.getAttribute("data-xl-slides")||this.params.count.lg,this.params.rows={},this.params.rows.xs=+this.element.getAttribute("data-rows")||1,this.params.rows.sm=+this.element.getAttribute("data-sm-rows")||this.params.rows.xs,this.params.rows.md=+this.element.getAttribute("data-md-rows")||this.params.rows.sm,this.params.rows.lg=+this.element.getAttribute("data-lg-rows")||this.params.rows.md,this.params.rows.xl=+this.element.getAttribute("data-xl-rows")||this.params.rows.lg,this.params.state={},Object.keys(breakpoints).forEach((function(e,a){var o=0!==a?"-"+e+"-":"-",n=t.element.getAttribute("data".concat(o,"mounted"));if(null===n&&0!==a){var i=Object.keys(breakpoints)[a-1];t.params.state[e]=t.params.state[i]}else t.params.state[e]="true"===n||0===a&&"false"!==n})),this.slides=[],this.containsMobileHiddenSlides=!1,this.element.childNodes.forEach((function(e){e.tagName&&(null!==e.getAttribute("data-slide-mobile-hidden")&&(t.containsMobileHiddenSlides=!0),t.slides.push(e))})),this.createIcons(),this.checkSliderState(),this.checkSliderStateDebounced=sliderDebounce(this.checkSliderState,500,this),window.addEventListener("resize",this.checkSliderStateDebounced)}},{key:"createIcons",value:function(){var t='\n      <svg viewBox="0 0 11 19" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n        <path d="M1.4 18.1L0 16.7L7.6 9.10001L0 1.5L1.4 0L10.4 9.10001C10.4 9.10001 1.3 18.1 1.4 18.1Z"/>\n      </svg>\n    ',e='\n      <svg viewBox="0 0 11 19" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n        <path d="M9.00039 7.24792e-05L10.4004 1.40007L2.80039 9.00009L10.4004 16.6001L9.00039 18.1001L0.000391006 9.00009C0.000391006 9.00009 9.10039 7.24792e-05 9.00039 7.24792e-05Z"/>\n      </svg>\n    ',a="custom-icon-left",o="custom-icon-right";this.element.querySelectorAll(".".concat(a,", .").concat(o)).forEach((function(n){var i=n.classList.contains(a),s=n.classList.contains(o);i?(n.classList.remove(a),t=n.outerHTML):s&&(n.classList.remove(o),e=n.outerHTML),n.remove()})),this.nextArrow='<button type="button" class="button button_style-1 slick-next">'.concat(t,"</button>"),this.prevArrow='<button type="button" class="button button_style-1 slick-prev">'.concat(e,"</button>")}},{key:"checkSliderState",value:function(){if(!this.mounted||this.savedWindowWidth!==window.innerWidth){var t;for(var e in this.savedWindowWidth=window.innerWidth,this.mounted&&this.unmount(),breakpoints)window.innerWidth>=breakpoints[e]&&(t=this.params.state[e]);t?(this.element.classList.remove("visible"),this.containsMobileHiddenSlides&&this.checkSlidesVisibility(),this.mount()):this.element.classList.add("visible")}}},{key:"checkSlidesVisibility",value:function(){var t=this;this.slides.forEach((function(t){t.remove()})),this.slides.forEach((function(e){var a=null!==e.getAttribute("data-slide-mobile-hidden"),o=window.innerWidth<breakpoints.sm;a&&o||t.element.insertAdjacentElement("beforeend",e)}))}},{key:"mount",value:function(){$(this.element).slick({autoplay:this.params.autoplay,autoplaySpeed:this.params.autoplayTimeout,mobileFirst:!0,slidesToShow:this.params.count.xs,slidesToScroll:this.params.count.xs,rows:this.params.rows.xs,prevArrow:this.prevArrow,nextArrow:this.nextArrow,arrows:this.params.arrows,adaptiveHeight:this.params.adaptiveHeight,dots:this.params.dots,centerMode:this.params.centerMode,accessibility:!1,responsive:[{breakpoint:breakpoints.sm-1,settings:{slidesToShow:this.params.count.sm,slidesToScroll:this.params.count.sm,rows:this.params.rows.sm}},{breakpoint:breakpoints.md-1,settings:{slidesToShow:this.params.count.md,slidesToScroll:this.params.count.md,rows:this.params.rows.md}},{breakpoint:breakpoints.lg-1,settings:{slidesToShow:this.params.count.lg,slidesToScroll:this.params.count.lg,rows:this.params.rows.lg}},{breakpoint:breakpoints.xl-1,settings:{slidesToShow:this.params.count.xl,slidesToScroll:this.params.count.xl,rows:this.params.rows.xl}}]}),this.mounted=!0}},{key:"unmount",value:function(){$(this.element).slick("unslick"),this.mounted=!1}}]),t}();$(document).ready((function(){$(".catalog-filter-accordion a.opener").click((function(){return $(this).parent().find("ul:first").slideToggle(),$(this).parent().toggleClass("active"),!1})),$("[data-expand]").on("click",(function(t){var e=$(t.currentTarget),a=e.parent();a.find("[data-collapse-content]").removeClass("d-none"),a.find("[data-collapse]").removeClass("d-none"),e.addClass("d-none")})),$("[data-collapse]").on("click",(function(t){var e=$(t.currentTarget),a=e.parent();a.find("[data-collapse-content]").addClass("d-none"),a.find("[data-expand]").removeClass("d-none"),e.addClass("d-none")})),$("[data-expand-menu]").on("click",(function(){$(".mobile-side-menu__background").addClass("d-block"),$(".mobile-side-menu-content").addClass("mobile-side-menu-content_active")})),$("[data-collapse-menu]").on("click",(function(){$(".mobile-side-menu__background").removeClass("d-block"),$(".mobile-side-menu-content").removeClass("mobile-side-menu-content_active"),$("[data-menu-page]:not(:first-child)").removeClass("mobile-side-menu-content__page_active")})),$("[data-menu-page-expand]").on("click",(function(t){var e=$(t.currentTarget).attr("data-menu-page-expand");$('[data-menu-page="'.concat(e,'"]')).addClass("mobile-side-menu-content__page_active")})),$("[data-menu-page-collapse]").on("click",(function(t){var e=$(t.currentTarget).attr("data-menu-page-collapse");$('[data-menu-page="'.concat(e,'"]')).removeClass("mobile-side-menu-content__page_active")})),$(".product-card-slideshow__sector").on("mousemove",(function(t){var e=$(t.currentTarget),a=e.attr("data-sector"),o=e.parent().parent();o.find(".product-card-slideshow__image_active").removeClass("product-card-slideshow__image_active"),o.find(".product-card-slideshow__dot_active").removeClass("product-card-slideshow__dot_active"),o.find('[data-sector-image="'.concat(a,'"]')).addClass("product-card-slideshow__image_active"),o.find('[data-sector-dot="'.concat(a,'"]')).addClass("product-card-slideshow__dot_active")}));var t=0,e=0;$(".product-card-slideshow__sectors").on("touchstart",(function(e){t=e.changedTouches[0].screenX})),$(".product-card-slideshow__sectors").on("touchend",(function(a){e=a.changedTouches[0].screenX;var o=$(a.currentTarget).parent(),n=o.find(".product-card-slideshow__image_active"),i=Number(n.attr("data-sector-image")),s=o.find(".product-card-slideshow__image").length;if(e<t){if(o.find(".product-card-slideshow__image_active").removeClass("product-card-slideshow__image_active"),o.find(".product-card-slideshow__dot_active").removeClass("product-card-slideshow__dot_active"),i>=s)return o.find('[data-sector-image="'.concat(1,'"]')).addClass("product-card-slideshow__image_active"),void o.find('[data-sector-dot="'.concat(1,'"]')).addClass("product-card-slideshow__dot_active");o.find('[data-sector-image="'.concat(i+1,'"]')).addClass("product-card-slideshow__image_active"),o.find('[data-sector-dot="'.concat(i+1,'"]')).addClass("product-card-slideshow__dot_active")}if(e>t){if(o.find(".product-card-slideshow__image_active").removeClass("product-card-slideshow__image_active"),o.find(".product-card-slideshow__dot_active").removeClass("product-card-slideshow__dot_active"),i<=1)return o.find('[data-sector-image="'.concat(s,'"]')).addClass("product-card-slideshow__image_active"),void o.find('[data-sector-dot="'.concat(s,'"]')).addClass("product-card-slideshow__dot_active");o.find('[data-sector-image="'.concat(i-1,'"]')).addClass("product-card-slideshow__image_active"),o.find('[data-sector-dot="'.concat(i-1,'"]')).addClass("product-card-slideshow__dot_active")}}))})),$(".like-btn").on("click",(function(t){t.preventDefault(),$(this).toggleClass("active")})),$(".city-selection__link").click((function(){$(".city-selection__list").toggle(0)})),$(window).click((function(t){t.target.classList.contains("city-selection__link")||$(".city-selection__list").toggle(!1)})),$(".burger-menu").click((function(){$(".mobile-menu").toggle(0)})),$(".catalog-inner-btn").click((function(t){t.preventDefault(),$(this).toggleClass("open"),$(".catalog-header-content").toggle(0)})),$(".catalog-inner-btn,.catalog-menu__head a").click((function(t){t.preventDefault(),$(".catalog-menu").toggle(0)})),$(".burger-catalog").click((function(t){t.preventDefault(),$(this).toggleClass("open")})),$(".share-btn").click((function(){$(".share-block__show").toggle(0)})),$(".close-panel").click((function(){$(".bottom-panel").toggle(0)})),$(".filter-btn, .close-btn-2").click((function(){$(".catalog-filter").toggle(0)})),$(".catalog-side__title").click((function(){$(".catalog-side__content").toggle(0),$(".catalog-side__content-accordeon").toggle(0)})),$(".catalog-opened").click((function(){$(".catalog-opened .submenu").toggle(0)})),$(".burger-menu").click((function(){$(this).toggleClass("menu-on")})),$(".catalog-inner").click((function(){$(this).toggleClass("open"),$(".catalog-inner-content").toggle(0)})),$((function(){$(".smoothScroll").click((function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var t=$(this.hash);if((t=t.length?t:$("[name="+this.hash.slice(1)+"]")).length)return $("html,body").animate({scrollTop:t.offset().top},1e3),!1}}))}));var bigSlides=$(".main-slider .owl-carousel"),autoPlayTimeoutSec=parseInt(bigSlides.data("autoplay-timeout"));bigSlides.owlCarousel({loop:!0,margin:5,nav:!0,dots:!0,items:1,autoplay:!0,autoplayTimeout:1e3*autoPlayTimeoutSec,navText:['<svg class="icon" viewBox="0 0 10.5 18.1"><path stroke="none" d="M9,0l1.4,1.4L2.8,9l7.6,7.6L9,18.1L0,9C0,9,9.1,0,9,0z"></path></svg>','<svg class="icon" viewBox="0 0 10.5 18.1"><path stroke="none" d="M1.4,18.1L0,16.7l7.6-7.6L0,1.5L1.4,0l9,9.1C10.4,9.1,1.3,18.1,1.4,18.1z"></path></svg>']});var radioButtons=document.querySelectorAll('.delivery-selection input[type="radio"]'),choices=document.querySelectorAll(".delivery-choice");radioButtons.forEach((function(t){t.addEventListener("change",(function(){var t=this;choices.forEach((function(e){e.classList.contains(t.id)||e.classList.contains("delivery-type-"+t.value)?e.style.display="block":e.style.display="none"}))}))})),$(".shopping-cart-item__delete").click((function(){$(this).parent(".shopping-cart-item").remove()})),$(".slider .owl-carousel").owlCarousel({loop:!0,margin:0,items:1,nav:!0}),$(".news-slider .owl-carousel").owlCarousel({loop:!0,margin:0,items:4,responsive:{0:{nav:!1,dots:!0,items:1},479:{nav:!1,dots:!0,items:2},768:{nav:!0,dots:!1,items:3},992:{items:4}}}),$(".action-slider .owl-carousel").owlCarousel({loop:!0,margin:20,nav:!0,dots:!1,items:3,responsive:{0:{nav:!1,dots:!0,items:1},479:{nav:!1,dots:!0,items:2},768:{nav:!0,dots:!1,items:3}}}),$(".partners-slider .owl-carousel").owlCarousel({loop:!0,margin:0,nav:!0,dots:!1,items:5,responsive:{0:{dots:!0,nav:!1,items:1},566:{nav:!1,dots:!0,items:2},768:{nav:!1,dots:!0,items:3},900:{nav:!1,dots:!0,items:4},950:{dots:!1}}}),function(t){t("select.custom-select").each((function(){var e=t(this),a=e.attr("id"),o=e.children("optgroup"),n="",i="";o.length?(o.each((function(){var e=t(this),a=e.attr("label");n+='<li class="optgroup">'+a+"</li>",e.children("option").each((function(){var e=t(this),a=e.attr("value"),o=e.html();"selected"===e.attr("selected")?(i=o,n+='<li class="selected" data-value="'+a+'">'+o+"</li>"):n+='<li data-value="'+a+'">'+o+"</li>"}))})),e.children("option").each((function(){var e=t(this),a=e.attr("value"),o=e.html();"selected"===e.attr("selected")?(i=o,n='<li class="selected" data-value="'+a+'">'+o+"</li>"+n):n='<li data-value="'+a+'">'+o+"</li>"+n}))):e.children("option").each((function(){var e=t(this),a=e.attr("value"),o=e.html();"selected"===e.attr("selected")?(i=o,n+='<li class="selected" data-value="'+a+'">'+o+"</li>"):n+='<li data-value="'+a+'">'+o+"</li>"})),t('<div class="dropdown-container"><div class="dropdown-select entypo-down-open-big"><svg class="icon"><use xlink:href="#tab-arrow"></use></svg><span>'+i+'</span></div><ul class="dropdown-select-ul" data-role="'+a+'">'+n+"</ul></div> \x3c!-- .custom-select-wrapper --\x3e").insertAfter(e)}));var e=t(".dropdown-select"),a=t(".dropdown-select-ul"),o=t(".dropdown-select-ul li");e.on("click",(function(){t(this).parent(".dropdown-container").toggleClass("active")})),a.on("mouseleave",(function(){t(this).parent(".dropdown-container").removeClass("active")})),o.on("click",(function(){var e=t(this);if(!e.hasClass("optgroup")){var a=e.parent("ul"),o=a.siblings(".dropdown-select"),n=e.html(),i=e.attr("data-value"),s="#"+a.attr("data-role");a.parent(".dropdown-container").toggleClass("active"),e.siblings("li").removeClass("selected"),e.addClass("selected"),t(s).val(i),o.children("span").html(n)}}))}(jQuery),$(".tab-content").hide(),$(".tab-content:first").show(),$("ul.tabs li,.product-card__review-link a,.schedule-btn a").click((function(){$(".tab-content").hide();var t=$(this).attr("rel");$("#"+t).fadeIn(),$("ul.tabs li").removeClass("active"),$(this).addClass("active"),$(".tab_drawer_heading").removeClass("d_active"),$(".tab_drawer_heading[rel^='"+t+"']").addClass("d_active")})),$(".tab_drawer_heading").click((function(){var t=$(this).attr("rel"),e=$("#"+t+":hidden"),a=$(this).not(".d_active");$(".tab-content").hide(),e.fadeIn(),$(".tab_drawer_heading").removeClass("d_active"),a.addClass("d_active"),$("ul.tabs li").removeClass("active"),$("ul.tabs li[rel^='"+t+"']").addClass("active")})),$("ul.tabs li").last().addClass("tab_last"),jQuery(document).ready((function(){jQuery(".schedule-btn a").click((function(){jQuery(".schedule-link").toggleClass("active")}))})),jQuery(document).ready((function(){jQuery(".product-card__review-link a").click((function(){jQuery(".review-tab-link").toggleClass("active")}))})),$(document).ready((function(){var t=$("#sync1"),e=$("#sync2");t.owlCarousel({items:1,slideSpeed:2e3,nav:!0,autoplay:!1,dots:!0,loop:!0,responsiveRefreshRate:200,margin:10}).on("changed.owl.carousel",(function(t){var a=t.item.count-1,o=Math.round(t.item.index-t.item.count/2-.5);o<0&&(o=a);o>a&&(o=0);e.find(".owl-item").removeClass("current").eq(o).addClass("current");var n=e.find(".owl-item.active").length-1,i=e.find(".owl-item.active").first().index(),s=e.find(".owl-item.active").last().index();o>s&&e.data("owl.carousel").to(o,100,!0);o<i&&e.data("owl.carousel").to(o-n,100,!0)})),e.on("initialized.owl.carousel",(function(){e.find(".owl-item").eq(0).addClass("current")})).owlCarousel({items:3,dots:!0,nav:!0,margin:10,smartSpeed:200,slideSpeed:500,slideBy:3,responsiveRefreshRate:100}).on("changed.owl.carousel",(function(e){var a=e.item.index;t.data("owl.carousel").to(a,100,!0)})),e.on("click",".owl-item",(function(e){e.preventDefault();var a=$(this).index();t.data("owl.carousel").to(a,300,!0)}))})),function(){var t=$(".button1"),e=$(".button2"),a=$(".button3"),o=$(".product-item");e.click((function(e){t.removeClass("current"),a.removeClass("current"),$(e.currentTarget).addClass("current"),localStorage.setItem("catalogGrid","wide"),o.removeClass("product-item--line"),o.addClass("product-item--wide")})),a.click((function(a){e.removeClass("current"),t.removeClass("current"),$(a.currentTarget).addClass("current"),localStorage.setItem("catalogGrid","wide"),o.removeClass("product-item--wide"),o.addClass("product-item--line")})),t.click((function(t){e.removeClass("current"),a.removeClass("current"),$(t.currentTarget).addClass("current"),localStorage.setItem("catalogGrid","default"),o.removeClass("product-item--wide"),o.removeClass("product-item--line")}))}();var keypressSliders=$(".range-slider");function gallery(){$.fancybox&&$(".owl-item [data-fancybox]").on("click",(function(){var t=$(this).parents(".owl-carousel").find(".owl-item:not(.cloned) [data-fancybox]");return $.fancybox.open(t,{selector:t,backFocus:!1},t.index(this)),!1}))}function header(){var t,e,a=$("header"),o=!1;function n(){a.hasClass("header_landing")||(e=$(window).scrollTop(),t=a.height(),e>t?a.addClass("fixed"):a.removeClass("fixed"))}n(),$(window).scroll((function(){o||(o=!0,setTimeout((function(){n(),o=!1}),100))}))}function homeBanner(){var t=$(".home-banner .owl-carousel");t.length&&t.owlCarousel({loop:!0,nav:!0,smartSpeed:500,dots:!0,items:1,lazyLoad:!0,autoplay:!0,autoplayTimeout:1e3*(+t.data("autoplay-timeout")||5),navText:['<svg class="icon" viewBox="0 0 10.5 18.1"><path stroke="none" d="M9,0l1.4,1.4L2.8,9l7.6,7.6L9,18.1L0,9C0,9,9.1,0,9,0z"></path></svg>','<svg class="icon" viewBox="0 0 10.5 18.1"><path stroke="none" d="M1.4,18.1L0,16.7l7.6-7.6L0,1.5L1.4,0l9,9.1C10.4,9.1,1.3,18.1,1.4,18.1z"></path></svg>']})}$(keypressSliders).each((function(t,e){var a=$(e).data("name"),o=document.getElementById("id_"+a+"_0"),n=document.getElementById("id_"+a+"_1"),i=[o,n];if(o&&n)var s=parseInt(o.dataset.currentValue),r=parseInt(n.dataset.currentValue),l=parseInt(o.dataset.minValue),c=parseInt(n.dataset.maxValue);var d="";function u(t,a){var o=[null,null];o[t]=a,e.noUiSlider.set(o)}"price_range"==a&&(d=" ₽"),"undefined"!=typeof noUiSlider&&noUiSlider.create(e,{start:[s,r],connect:!0,range:{min:l,max:c},format:wNumb({decimals:0,thousand:" ",postfix:d}),step:1}),null!==e&&e.noUiSlider&&e.noUiSlider.on("update",(function(t,e){i[e].value=t[e]})),i.forEach((function(t,a){null!==t&&(t.addEventListener("change",(function(){u(a,this.value)})),t.addEventListener("keydown",(function(t){var o,n=e.noUiSlider.get(),i=Number(n[a]),s=e.noUiSlider.steps()[a];switch(t.which){case 13:u(a,this.value);break;case 38:!1===(o=s[1])&&(o=1),null!==o&&u(a,i+o);break;case 40:!1===(o=s[0])&&(o=1),null!==o&&u(a,i-o)}})))}))})),$("#menu").mmenu({extensions:["position-front"]});var menuApi=$("#menu").data("mmenu");function _defineProperties(t,e){for(var a=0;a<e.length;a++){var o=e[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,a){return e&&_defineProperties(t.prototype,e),a&&_defineProperties(t,a),t}function _createForOfIteratorHelper(t,e){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){a&&(t=a);var o=0,n=function(){};return{s:n,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,r=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return s=t.done,t},e:function(t){r=!0,i=t},f:function(){try{s||null==a.return||a.return()}finally{if(r)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,o=new Array(e);a<e;a++)o[a]=t[a];return o}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function landing_sliders(){var t=$(".landing-slider .owl-carousel");t.length&&t.each((function(){var t,e,a,o,n=$(this);n.is(".landing-slider_1 .owl-carousel")?(t=2,e=2,a=3,o=4):n.is(".landing-slider_2 .owl-carousel")&&(t=1,e=2,a=3,o=4),n.owlCarousel({loop:!0,margin:20,responsive:{0:{items:t,margin:16},576:{items:e},768:{items:a},992:{items:o}}})}))}function toggle(){var t=$(".toggle-section");t.each((function(){var t,e,a=$(this),o=a.children(".toggle-section__trigger"),n=a.children(".toggle-section__content"),i=n.find(".toggle-section__close"),s=!!a.hasClass("active");(o.on("click",(function(){s=!s,r()})),i.on("click",(function(){s=!1,r()})),a.is("[data-hover]"))&&(o.add(n).on("mouseenter",(function(t){isTouch||(e&&clearTimeout(e),s=!0,r())})),o.add(n).on("mouseleave",(function(t){var a;isTouch||(a=$(this).is(o)?500:100,e=setTimeout((function(){s=!1,r()}),a))})));function r(){s?(a.add(n).add(o).addClass("active"),a.is("[data-slide]")&&n.slideDown(250)):(a.add(o).add(n).removeClass("active"),a.is("[data-slide]")&&(t?n.stop().slideUp(250):n.hide(0)))}(a.is("[data-out-hide]")||a.is("[data-hover]"))&&$(document).on("click touchstart",(function(t){var e=$(t.target);e.closest(n).length||e.closest(o).length||!s||(s=!1,r())})),r(),t=!0}))}function up(){var t=$(".js-up");function e(){$(window).scrollTop()>50?t.addClass("visible"):t.removeClass("visible")}var a=!1;$(window).on("scroll",(function(){a||(a=!0,setTimeout((function(){e(),a=!1}),100))})),e(),t.on("click",(function(t){t.preventDefault(),$("html, body").animate({scrollTop:0},500)}))}function chatBlock(){var t=$(".chat-block"),e=$("[data-chat-open]"),a=$("[data-chat-close]");e.on("click",(function(){t.addClass("active")})),a.on("click",(function(){t.removeClass("active")}))}$("[data-open-menu]").click((function(){menuApi.open()})),$("[data-close-menu]").click((function(){menuApi.close()})),console.log(123345346),function(t){var e="cscrlb";function a(a,o){var n,i,s,r,l,c=a,d=t(a),u=d.find(".cscrlb-content"),m=7/8,h="vert",p="scrollTop",v="height",f="top";function g(e){e.preventDefault();var a=e.pageY;"horiz"===h&&(a=e.pageX),r=a-s.offset()[f],t(document).on("mousemove",w),t(document).on("mouseup",b)}function w(t){t.preventDefault();var e=t.pageY;"horiz"===h&&(e=t.pageX);var a=(e-i.offset()[f]-r)/i[v]()*u[v]();n[p](a)}function b(){t(document).off("mousemove",w),t(document).off("mouseup",b)}function _(t){if(t.target!==s[0]){var e=m*n[v](),a=("vert"===h?t.originalEvent.layerY:t.originalEvent.layerX)<s.position()[f]?n[p]()-e:n[p]()+e;n[p](a)}}function y(t){C()}function $(){var t=u[v](),e=n[p](),a=i[v](),o=a/t,r=Math.round(o*e),l=Math.floor(o*(a+2));a<t?("vert"===h?s.css({top:r,height:l}):s.css({left:r,width:l}),i.show()):i.hide()}function C(){$(),k()}function k(){s.addClass("visible"),o.autoHide&&("number"==typeof l&&window.clearTimeout(l),l=window.setTimeout((function(){s.removeClass("visible"),"number"==typeof l&&window.clearTimeout(l)}),1e3))}function x(){"vert"===h?(n.width(d.width()+S()),n.height(d.height())):(n.width(d.width()),n.height(d.height()+S()),u.height(d.height()))}function S(){var e=t('<div class="scrollbar-width-tester" style="width:50px;height:50px;overflow-y:scroll;position:absolute;top:-200px;left:-200px;"><div style="height:100px;"></div>');t("body").append(e);var a=t(e).innerWidth(),o=t("div",e).innerWidth();return e.remove(),a===o&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1?17:a-o}function T(){x(),$()}return o=t.extend({},t.fn[e].defaults,o),window.onload=function(){u.focus()},d.hasClass("horizontal")&&(h="horiz",p="scrollLeft",v="width",f="left"),d.prepend('<div class="cscrlb-scrollbar"><div class="drag-handle"></div></div>'),i=d.find(".cscrlb-scrollbar"),s=d.find(".drag-handle"),o.wrapContent&&u.wrap('<div class="cscrlb-scroll-content" />'),n=d.find(".cscrlb-scroll-content"),x(),o.autoHide&&d.on("mouseenter",C),s.on("mousedown",g),i.on("mousedown",_),n.on("scroll",y),$(),t(window).on("resize",(function(){T()})),o.autoHide||k(),{option:function(t,e){if(!e)return o[t];o[t]=e},destroy:function(){var t;u.insertBefore(i),i.remove(),n.remove(),u.css({height:d.height()+"px","overflow-y":"scroll"}),void 0!==o[t="onDestroy"]&&o[t].call(c),d.removeData("plugin_"+e)},recalculate:T}}t.fn[e]=function(o){if("string"==typeof arguments[0]){var n,i=arguments[0],s=Array.prototype.slice.call(arguments,1);return this.each((function(){if(!t.data(this,"plugin_"+e)||"function"!=typeof t.data(this,"plugin_"+e)[i])throw new Error(" "+i+" "+e);n=t.data(this,"plugin_"+e)[i].apply(this,s)})),void 0!==n?n:this}if("object"===_typeof(o)||!o)return this.each((function(){t.data(this,"plugin_"+e)||t.data(this,"plugin_"+e,new a(this,o))}))},t.fn[e].defaults={onInit:function(){},onDestroy:function(){},wrapContent:!0,autoHide:!1}}(jQuery),$((function(){$(".cscrlb-scrollable").cscrlb()})),$(document).ready((function(){homeBanner(),header(),gallery(),landing_sliders(),up(),chatBlock(),toggle(),new СustomInteraction({targets:"a, button, [data-custom-interaction], .image-zoom"}),document.querySelectorAll(".slider-constructor").forEach((function(t){new SliderConstructor(t).init()}))}));var СustomInteraction=function t(){var e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t),this.targets=a.targets,this.touchendDelay=a.touchendDelay||100;var o=function(t){var a=[];a[0]=t.target!==document?t.target.closest(e.targets):null;for(var o=a[0],n=0;a[0]&&(o=o.parentNode)!==document;)o.matches(a.value)&&(n++,a[n]=o);if("touchstart"==t.type){if(e.touched=!0,e.timeout&&clearTimeout(e.timeout),a[0]){var i,s=_createForOfIteratorHelper(a);try{for(s.s();!(i=s.n()).done;){i.value.setAttribute("data-touch","")}}catch(t){s.e(t)}finally{s.f()}}}else("touchend"==t.type||"contextmenu"==t.type&&e.touched)&&(e.timeout=setTimeout((function(){e.touched=!1}),e.touchendDelay),a[0]&&setTimeout((function(){var t,e=_createForOfIteratorHelper(a);try{for(e.s();!(t=e.n()).done;){t.value.removeAttribute("data-touch")}}catch(t){e.e(t)}finally{e.f()}}),e.touchendDelay));"mouseenter"==t.type&&!e.touched&&a[0]&&a[0]==t.target?a[0].setAttribute("data-hover",""):"mouseleave"==t.type&&!e.touched&&a[0]&&a[0]==t.target&&(a[0].removeAttribute("data-click"),a[0].removeAttribute("data-hover")),"mousedown"==t.type&&!e.touched&&a[0]?a[0].setAttribute("data-click",""):"mouseup"==t.type&&!e.touched&&a[0]&&a[0].removeAttribute("data-click")};document.addEventListener("touchstart",o),document.addEventListener("touchend",o),document.addEventListener("mouseenter",o,!0),document.addEventListener("mouseleave",o,!0),document.addEventListener("mousedown",o),document.addEventListener("mouseup",o),document.addEventListener("contextmenu",o)};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuanMiLCJzaGFyZWQvY29uc3RhbnRzL2JyZWFrUG9pbnRzLmpzIiwic2hhcmVkL2xpYi9kZWJvdW5jZS10aHJvdHRsZS5qcyIsImZlYXR1cmVzL3NsaWRlckNvbnN0cnVjdG9yLmpzIiwiZmVhdHVyZXMvY2xpY2tFdmVudHMuanMiLCJmZWF0dXJlcy9zbW9vdGhTY3JvbGwuanMiLCJmZWF0dXJlcy9iaWdTbGlkZXMuanMiLCJmZWF0dXJlcy9jdXN0b21TZWxlY3QuanMiLCJmZWF0dXJlcy90YWJzLmpzIiwiZmVhdHVyZXMvc3luY1NsaWRlcnMuanMiXSwibmFtZXMiOlsiYnJlYWtwb2ludHMiLCJ4cyIsInNtIiwibWQiLCJsZyIsInhsIiwidGhyb3R0bGUiLCJkZWxheSIsImNhbGxiYWNrIiwib3B0aW9ucyIsInRpbWVvdXRJRCIsIl9yZWYiLCJfcmVmJG5vVHJhaWxpbmciLCJub1RyYWlsaW5nIiwiX3JlZiRub0xlYWRpbmciLCJub0xlYWRpbmciLCJfcmVmJGRlYm91bmNlTW9kZSIsImRlYm91bmNlTW9kZSIsInVuZGVmaW5lZCIsImNhbmNlbGxlZCIsImxhc3RFeGVjIiwiY2xlYXJFeGlzdGluZ1RpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJ3cmFwcGVyIiwiX2xlbiIsImFyZ3VtZW50cyIsImxlbmd0aCIsImFyZ3VtZW50c18iLCJBcnJheSIsIl9rZXkiLCJzZWxmIiwidGhpcyIsImVsYXBzZWQiLCJEYXRlIiwibm93IiwiZXhlYyIsImFwcGx5IiwiY2xlYXIiLCJzZXRUaW1lb3V0IiwiY2FuY2VsIiwiX3JlZjIkdXBjb21pbmdPbmx5IiwidXBjb21pbmdPbmx5IiwiZGVib3VuY2UiLCJfcmVmJGF0QmVnaW4iLCJhdEJlZ2luIiwidHJvdGxlRnVuYyIsImNvbnNvbGUiLCJsb2ciLCJfdHlwZW9mIiwib2JqIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJjb25zdHJ1Y3RvciIsInByb3RvdHlwZSIsInNsaWRlckRlYm91bmNlIiwiZnVuYyIsImludGVydmFsIiwiY29udGV4dCIsInRpbWVvdXQiLCJfYXJndW1lbnRzIiwiX3RoaXMiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiU2xpZGVyQ29uc3RydWN0b3IiLCJlbGVtZW50IiwiX2NsYXNzQ2FsbENoZWNrIiwiX2NyZWF0ZUNsYXNzIiwia2V5IiwidmFsdWUiLCJfdGhpczMiLCJwYXJhbXMiLCJhdXRvcGxheSIsImdldEF0dHJpYnV0ZSIsImF1dG9wbGF5VGltZW91dCIsImFycm93cyIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwiZG90cyIsImFkYXB0aXZlSGVpZ2h0IiwiY2VudGVyTW9kZSIsImNvdW50Iiwicm93cyIsInN0YXRlIiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJpbmRleCIsImJyZWFrcG9pbnQiLCJhdHRyIiwiY29uY2F0IiwicHJldktleSIsInNsaWRlcyIsImNvbnRhaW5zTW9iaWxlSGlkZGVuU2xpZGVzIiwiY2hpbGROb2RlcyIsInNsaWRlIiwidGFnTmFtZSIsInB1c2giLCJjcmVhdGVJY29ucyIsImNoZWNrU2xpZGVyU3RhdGUiLCJjaGVja1NsaWRlclN0YXRlRGVib3VuY2VkIiwibGVmdEljb24iLCJyaWdodEljb24iLCJsZWZ0SWNvbkNsYXNzIiwicmlnaHRJY29uQ2xhc3MiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaWNvbiIsImlzTGVmdEljb24iLCJjbGFzc0xpc3QiLCJjb250YWlucyIsImlzUmlnaHRJY29uIiwicmVtb3ZlIiwib3V0ZXJIVE1MIiwibmV4dEFycm93IiwicHJldkFycm93IiwibW91bnRlZCIsInNhdmVkV2luZG93V2lkdGgiLCJpbm5lcldpZHRoIiwidW5tb3VudCIsImNoZWNrU2xpZGVzVmlzaWJpbGl0eSIsIm1vdW50IiwiYWRkIiwiX3RoaXM0Iiwic2hvdWxkQmVIaWRkZW4iLCJpbnNlcnRBZGphY2VudEVsZW1lbnQiLCIkIiwic2xpY2siLCJhdXRvcGxheVNwZWVkIiwibW9iaWxlRmlyc3QiLCJzbGlkZXNUb1Nob3ciLCJzbGlkZXNUb1Njcm9sbCIsImFjY2Vzc2liaWxpdHkiLCJyZXNwb25zaXZlIiwic2V0dGluZ3MiLCJkb2N1bWVudCIsInJlYWR5IiwiY2xpY2siLCJwYXJlbnQiLCJmaW5kIiwic2xpZGVUb2dnbGUiLCJ0b2dnbGVDbGFzcyIsIm9uIiwiZXZlbnQiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsImlkIiwidG91Y2hzdGFydFgiLCJ0b3VjaGVuZFgiLCJjaGFuZ2VkVG91Y2hlcyIsInNjcmVlblgiLCJpbWciLCJOdW1iZXIiLCJwcmV2ZW50RGVmYXVsdCIsInRvZ2dsZSIsImUiLCJsb2NhdGlvbiIsInBhdGhuYW1lIiwicmVwbGFjZSIsImhvc3RuYW1lIiwiaGFzaCIsInNsaWNlIiwiYW5pbWF0ZSIsInNjcm9sbFRvcCIsIm9mZnNldCIsInRvcCIsImJpZ1NsaWRlcyIsImF1dG9QbGF5VGltZW91dFNlYyIsInBhcnNlSW50IiwiZGF0YSIsIm93bENhcm91c2VsIiwibG9vcCIsIm1hcmdpbiIsIm5hdiIsIml0ZW1zIiwibmF2VGV4dCIsInJhZGlvQnV0dG9ucyIsImNob2ljZXMiLCJidG4iLCJjbGlja2VkIiwiY2hvaWNlIiwic3R5bGUiLCJkaXNwbGF5IiwiZWFjaCIsInRoYXQiLCJsaXN0SUQiLCJncm91cHMiLCJjaGlsZHJlbiIsInRoZU9wdGlvbnMiLCJzdGFydGluZ09wdGlvbiIsImN1ckdyb3VwIiwiY3VyTmFtZSIsImN1ck9wdCIsImN1clZhbCIsImN1ckh0bWwiLCJodG1sIiwiaW5zZXJ0QWZ0ZXIiLCJzZWxlY3RkZCIsInNlbGVjdHVsIiwic2VsZWN0bGkiLCJoYXNDbGFzcyIsInBhcmVudFVsIiwidGhpc2RkIiwic2libGluZ3MiLCJsaWh0bWwiLCJsaXZhbHVlIiwib3JpZ2luYWxTZWxlY3QiLCJ2YWwiLCJqUXVlcnkiLCJoaWRlIiwic2hvdyIsImFjdGl2ZVRhYiIsImZhZGVJbiIsImRfYWN0aXZlVGFiIiwiYWN0aXZlVGFiQmxvY2siLCIkdGhpc0FjdGl2ZSIsIm5vdCIsImxhc3QiLCJzeW5jMSIsInN5bmMyIiwic2xpZGVTcGVlZCIsInJlc3BvbnNpdmVSZWZyZXNoUmF0ZSIsImVsIiwiaXRlbSIsImN1cnJlbnQiLCJNYXRoIiwicm91bmQiLCJlcSIsIm9uc2NyZWVuIiwic3RhcnQiLCJmaXJzdCIsImVuZCIsInRvIiwic21hcnRTcGVlZCIsInNsaWRlQnkiLCJudW1iZXIiLCJidXR0b25EZWZhdWx0VmlldyIsImJ1dHRvbldpZGVWaWV3IiwiYnV0dG9uTGluZVZpZXciLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwia2V5cHJlc3NTbGlkZXJzIiwiZ2FsbGVyeSIsImZhbmN5Ym94IiwiJHNlbGVjdG9yIiwicGFyZW50cyIsIm9wZW4iLCJzZWxlY3RvciIsImJhY2tGb2N1cyIsImhlYWRlciIsImhlaWdodCIsInNjcm9sbCIsIiRoZWFkZXIiLCJpc1Rocm90dGxlZCIsImNoZWNrIiwiaG9tZUJhbm5lciIsIiRzbGlkZXIiLCJsYXp5TG9hZCIsImtleXByZXNzU2xpZGVyIiwiZmllbGRfbmFtZSIsImlucHV0MCIsImdldEVsZW1lbnRCeUlkIiwiaW5wdXQxIiwiaW5wdXRzIiwic3RhcnRWYWwiLCJkYXRhc2V0IiwiY3VycmVudFZhbHVlIiwiZW5kVmFsIiwibWluVmFsIiwibWluVmFsdWUiLCJtYXhWYWwiLCJtYXhWYWx1ZSIsInBvc3RmaXgiLCJzZXRTbGlkZXJIYW5kbGUiLCJpIiwiciIsIm5vVWlTbGlkZXIiLCJzZXQiLCJjcmVhdGUiLCJjb25uZWN0IiwicmFuZ2UiLCJtaW4iLCJtYXgiLCJmb3JtYXQiLCJ3TnVtYiIsImRlY2ltYWxzIiwidGhvdXNhbmQiLCJzdGVwIiwidmFsdWVzIiwiaGFuZGxlIiwiaW5wdXQiLCJwb3NpdGlvbiIsImdldCIsInN0ZXBzIiwid2hpY2giLCJtbWVudSIsImV4dGVuc2lvbnMiLCJtZW51QXBpIiwiX2RlZmluZVByb3BlcnRpZXMiLCJwcm9wcyIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJkZWZpbmVQcm9wZXJ0eSIsIkNvbnN0cnVjdG9yIiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwiX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIiLCJvIiwiYWxsb3dBcnJheUxpa2UiLCJpdCIsImlzQXJyYXkiLCJfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkiLCJGIiwicyIsIm4iLCJkb25lIiwiX2UiLCJmIiwiVHlwZUVycm9yIiwiZXJyIiwibm9ybWFsQ29tcGxldGlvbiIsImRpZEVyciIsIm5leHQiLCJfZTIiLCJyZXR1cm4iLCJtaW5MZW4iLCJfYXJyYXlMaWtlVG9BcnJheSIsInRvU3RyaW5nIiwiY2FsbCIsIm5hbWUiLCJmcm9tIiwidGVzdCIsImFyciIsImxlbiIsImFycjIiLCJpbnN0YW5jZSIsImxhbmRpbmdfc2xpZGVycyIsIiRzbGlkZXJzIiwiY291bnQxIiwiY291bnQyIiwiY291bnQzIiwiY291bnQ0IiwiJHRoaXMiLCJpcyIsIiRzZWN0aW9uIiwiaW5pdGlhbGl6ZWQiLCIkdG9nZ2xlIiwiJGNvbnRlbnQiLCIkY2xvc2UiLCJpc1RvdWNoIiwic2xpZGVEb3duIiwic3RvcCIsInNsaWRlVXAiLCIkdGFyZ2V0IiwiY2xvc2VzdCIsInVwIiwiJGJ0biIsImNoYXRCbG9jayIsIiRibG9jayIsIiRvcGVuIiwiY2xvc2UiLCJwbHVnaW5OYW1lIiwiUGx1Z2luIiwiJHNjcm9sbENvbnRlbnRFbCIsIiRzY3JvbGxiYXJFbCIsIiRkcmFnSGFuZGxlRWwiLCJkcmFnT2Zmc2V0IiwiZmxhc2hUaW1lb3V0IiwiJGVsIiwiJGNvbnRlbnRFbCIsInBhZ2VKdW1wTXVsdHAiLCJzY3JvbGxEaXJlY3Rpb24iLCJzY3JvbGxPZmZzZXRBdHRyIiwic2l6ZUF0dHIiLCJvZmZzZXRBdHRyIiwic3RhcnREcmFnIiwiZXZlbnRPZmZzZXQiLCJwYWdlWSIsInBhZ2VYIiwiZHJhZyIsImVuZERyYWciLCJzY3JvbGxQb3MiLCJvZmYiLCJqdW1wU2Nyb2xsIiwianVtcEFtdCIsIm9yaWdpbmFsRXZlbnQiLCJsYXllclkiLCJsYXllclgiLCJvblNjcm9sbGVkIiwiZmxhc2hTY3JvbGxiYXIiLCJyZXNpemVTY3JvbGxiYXIiLCJjb250ZW50U2l6ZSIsInNjcm9sbE9mZnNldCIsInNjcm9sbGJhclNpemUiLCJzY3JvbGxiYXJSYXRpbyIsImhhbmRsZU9mZnNldCIsImhhbmRsZVNpemUiLCJmbG9vciIsImNzcyIsImxlZnQiLCJ3aWR0aCIsInNob3dTY3JvbGxiYXIiLCJhdXRvSGlkZSIsInJlc2l6ZVNjcm9sbENvbnRlbnQiLCJzY3JvbGxiYXJXaWR0aCIsInRlbXBFbCIsImFwcGVuZCIsIndpZHRoTWludXNTY3JvbGxiYXJzIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwidG9Mb3dlckNhc2UiLCJpbmRleE9mIiwicmVjYWxjdWxhdGUiLCJleHRlbmQiLCJmbiIsImRlZmF1bHRzIiwib25sb2FkIiwiZm9jdXMiLCJwcmVwZW5kIiwid3JhcENvbnRlbnQiLCJ3cmFwIiwib3B0aW9uIiwiZGVzdHJveSIsImhvb2tOYW1lIiwiaW5zZXJ0QmVmb3JlIiwicmVtb3ZlRGF0YSIsInJldHVyblZhbCIsIm1ldGhvZE5hbWUiLCJhcmdzIiwiRXJyb3IiLCJvbkluaXQiLCJvbkRlc3Ryb3kiLCJjc2NybGIiLCLQoXVzdG9tSW50ZXJhY3Rpb24iLCJ0YXJnZXRzIiwiaW5pdCIsIl90aGlzMiIsInRvdWNoZW5kRGVsYXkiLCJldmVudHMiLCIkdGFyZ2V0cyIsIiRlbGVtZW50IiwicGFyZW50Tm9kZSIsInR5cGUiLCJ0b3VjaGVkIiwiX3N0ZXAiLCJfaXRlcmF0b3IiLCJzZXRBdHRyaWJ1dGUiLCJfc3RlcDIiLCJfaXRlcmF0b3IyIiwicmVtb3ZlQXR0cmlidXRlIl0sIm1hcHBpbmdzIjoiQUFBQSxhQUVBLElDRkFBLFlBQUEsQ0FFQUMsR0FBQSxFQUVBQyxHQUFBLElBRUFDLEdBQUEsSUFFQUMsR0FBQSxLQUVBQyxHQUFBLE1EUEEsU0FBQUMsU0FBQUMsRUFBQUMsRUFBQUMsR0FDQSxJQVFBQyxFQVJB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QUFBUyxFQUFBdkksTUFBQXNJLEVBQUFDLEVBQUF0SSxLQUFBQyxNQUFBLENBQ0FvSSxFQUFBN1gsTUFFQStYLGdCQUFBLGFBQ0EsQ0FDQSxDQUFBLE1BQUFsSSxHQUNBaUksRUFBQXZTLEVBQUFzSyxFQUNBLENBQUEsUUFDQWlJLEVBQUFuSSxHQUNBLENBQ0EsR0FBQXVILEVBQUFDLGdCQUtBLGNBQUExUyxFQUFBK1MsT0FDQU4sRUFBQU8sU0FDQUosRUFBQSxJQUNBQSxFQUFBLElBQUE1UyxFQUFBQyxPQUVBMlMsRUFBQSxHQUFBTyxhQUFBLGFBQUEsSUFJQSxjQUFBblQsRUFBQStTLE9BQ0FOLEVBQUFPLFNBQ0FKLEVBQUEsSUFDQUEsRUFBQSxJQUFBNVMsRUFBQUMsU0FFQTJTLEVBQUEsR0FBQVUsZ0JBQUEsY0FDQVYsRUFBQSxHQUFBVSxnQkFBQSxlQUdBLGFBQUF0VCxFQUFBK1MsT0FBQU4sRUFBQU8sU0FBQUosRUFBQSxHQUNBQSxFQUFBLEdBQUFPLGFBQUEsYUFBQSxJQUdBLFdBQUFuVCxFQUFBK1MsT0FBQU4sRUFBQU8sU0FBQUosRUFBQSxJQUNBQSxFQUFBLEdBQUFVLGdCQUFBLGFBRUEsRUFFQTlULFNBQUF2RSxpQkFBQSxhQUFBMFgsR0FDQW5ULFNBQUF2RSxpQkFBQSxXQUFBMFgsR0FDQW5ULFNBQUF2RSxpQkFBQSxhQUFBMFgsR0FBQSxHQUNBblQsU0FBQXZFLGlCQUFBLGFBQUEwWCxHQUFBLEdBQ0FuVCxTQUFBdkUsaUJBQUEsWUFBQTBYLEdBQ0FuVCxTQUFBdkUsaUJBQUEsVUFBQTBYLEdBQ0FuVCxTQUFBdkUsaUJBQUEsY0FBQTBYLEVBQ0EiLCJmaWxlIjoic2NyaXB0cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIihcInVzZSBzdHJpY3RcIik7XHJcblxyXG52YXIgYnJlYWtwb2ludHMgPSB7XHJcblxyXG4gIHhzOiAwLFxyXG5cclxuICBzbTogNTc2LFxyXG5cclxuICBtZDogNzY4LFxyXG5cclxuICBsZzogMTAyNCxcclxuXHJcbiAgeGw6IDEyODAsXHJcblxyXG59O1xyXG5cclxuXHJcbmZ1bmN0aW9uIHRocm90dGxlKGRlbGF5LCBjYWxsYmFjaywgb3B0aW9ucykge1xyXG4gIHZhciBfcmVmID0gb3B0aW9ucyB8fCB7fSxcclxuICAgIF9yZWYkbm9UcmFpbGluZyA9IF9yZWYubm9UcmFpbGluZyxcclxuICAgIG5vVHJhaWxpbmcgPSBfcmVmJG5vVHJhaWxpbmcgPT09IHZvaWQgMCA/IGZhbHNlIDogX3JlZiRub1RyYWlsaW5nLFxyXG4gICAgX3JlZiRub0xlYWRpbmcgPSBfcmVmLm5vTGVhZGluZyxcclxuICAgIG5vTGVhZGluZyA9IF9yZWYkbm9MZWFkaW5nID09PSB2b2lkIDAgPyBmYWxzZSA6IF9yZWYkbm9MZWFkaW5nLFxyXG4gICAgX3JlZiRkZWJvdW5jZU1vZGUgPSBfcmVmLmRlYm91bmNlTW9kZSxcclxuICAgIGRlYm91bmNlTW9kZSA9IF9yZWYkZGVib3VuY2VNb2RlID09PSB2b2lkIDAgPyB1bmRlZmluZWQgOiBfcmVmJGRlYm91bmNlTW9kZTtcclxuXHJcbiAgdmFyIHRpbWVvdXRJRDtcclxuICB2YXIgY2FuY2VsbGVkID0gZmFsc2U7XHJcblxyXG4gIHZhciBsYXN0RXhlYyA9IDA7XHJcblxyXG4gIGZ1bmN0aW9uIGNsZWFyRXhpc3RpbmdUaW1lb3V0KCkge1xyXG4gICAgaWYgKHRpbWVvdXRJRCkge1xyXG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dElEKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNhbmNlbChvcHRpb25zKSB7XHJcbiAgICB2YXIgX3JlZjIgPSBvcHRpb25zIHx8IHt9LFxyXG4gICAgICBfcmVmMiR1cGNvbWluZ09ubHkgPSBfcmVmMi51cGNvbWluZ09ubHksXHJcbiAgICAgIHVwY29taW5nT25seSA9IF9yZWYyJHVwY29taW5nT25seSA9PT0gdm9pZCAwID8gZmFsc2UgOiBfcmVmMiR1cGNvbWluZ09ubHk7XHJcblxyXG4gICAgY2xlYXJFeGlzdGluZ1RpbWVvdXQoKTtcclxuICAgIGNhbmNlbGxlZCA9ICF1cGNvbWluZ09ubHk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiB3cmFwcGVyKCkge1xyXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3VtZW50c18gPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XHJcbiAgICAgIGFyZ3VtZW50c19bX2tleV0gPSBhcmd1bWVudHNbX2tleV07XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGVsYXBzZWQgPSBEYXRlLm5vdygpIC0gbGFzdEV4ZWM7XHJcblxyXG4gICAgaWYgKGNhbmNlbGxlZCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZXhlYygpIHtcclxuICAgICAgbGFzdEV4ZWMgPSBEYXRlLm5vdygpO1xyXG4gICAgICBjYWxsYmFjay5hcHBseShzZWxmLCBhcmd1bWVudHNfKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjbGVhcigpIHtcclxuICAgICAgdGltZW91dElEID0gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghbm9MZWFkaW5nICYmIGRlYm91bmNlTW9kZSAmJiAhdGltZW91dElEKSB7XHJcbiAgICAgIGV4ZWMoKTtcclxuICAgIH1cclxuXHJcbiAgICBjbGVhckV4aXN0aW5nVGltZW91dCgpO1xyXG5cclxuICAgIGlmIChkZWJvdW5jZU1vZGUgPT09IHVuZGVmaW5lZCAmJiBlbGFwc2VkID4gZGVsYXkpIHtcclxuICAgICAgaWYgKG5vTGVhZGluZykge1xyXG4gICAgICAgIGxhc3RFeGVjID0gRGF0ZS5ub3coKTtcclxuXHJcbiAgICAgICAgaWYgKCFub1RyYWlsaW5nKSB7XHJcbiAgICAgICAgICB0aW1lb3V0SUQgPSBzZXRUaW1lb3V0KGRlYm91bmNlTW9kZSA/IGNsZWFyIDogZXhlYywgZGVsYXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBleGVjKCk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAobm9UcmFpbGluZyAhPT0gdHJ1ZSkge1xyXG4gICAgICB0aW1lb3V0SUQgPSBzZXRUaW1lb3V0KFxyXG4gICAgICAgIGRlYm91bmNlTW9kZSA/IGNsZWFyIDogZXhlYyxcclxuICAgICAgICBkZWJvdW5jZU1vZGUgPT09IHVuZGVmaW5lZCA/IGRlbGF5IC0gZWxhcHNlZCA6IGRlbGF5XHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB3cmFwcGVyLmNhbmNlbCA9IGNhbmNlbDtcclxuXHJcbiAgcmV0dXJuIHdyYXBwZXI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRlYm91bmNlKGRlbGF5LCBjYWxsYmFjaywgb3B0aW9ucykge1xyXG4gIHZhciBfcmVmID0gb3B0aW9ucyB8fCB7fSxcclxuICAgIF9yZWYkYXRCZWdpbiA9IF9yZWYuYXRCZWdpbixcclxuICAgIGF0QmVnaW4gPSBfcmVmJGF0QmVnaW4gPT09IHZvaWQgMCA/IGZhbHNlIDogX3JlZiRhdEJlZ2luO1xyXG5cclxuICByZXR1cm4gdGhyb3R0bGUoZGVsYXksIGNhbGxiYWNrLCB7XHJcbiAgICBkZWJvdW5jZU1vZGU6IGF0QmVnaW4gIT09IGZhbHNlLFxyXG4gIH0pO1xyXG59XHJcblxyXG5jb25zdCB0cm90bGVGdW5jID0gZGVib3VuY2UoMTAwMCwgKCkgPT4ge1xyXG4gIGNvbnNvbGUubG9nKDEyMyk7XHJcbn0pO1xyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgKCkgPT4ge1xyXG4gIHRyb3RsZUZ1bmMoKTtcclxuICBjb25zb2xlLmxvZyg1MjMpO1xyXG59KTtcclxuXHJcbmZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7XHJcbiAgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiO1xyXG4gIGlmICh0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIikge1xyXG4gICAgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7XHJcbiAgICAgIHJldHVybiB0eXBlb2Ygb2JqO1xyXG4gICAgfTtcclxuICB9IGVsc2Uge1xyXG4gICAgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7XHJcbiAgICAgIHJldHVybiBvYmogJiZcclxuICAgICAgICB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiZcclxuICAgICAgICBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJlxyXG4gICAgICAgIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZVxyXG4gICAgICAgID8gXCJzeW1ib2xcIlxyXG4gICAgICAgIDogdHlwZW9mIG9iajtcclxuICAgIH07XHJcbiAgfVxyXG4gIHJldHVybiBfdHlwZW9mKG9iaik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNsaWRlckRlYm91bmNlKGZ1bmMsIGludGVydmFsLCBjb250ZXh0KSB7XHJcbiAgdmFyIHRpbWVvdXQgPSBmYWxzZTtcclxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIF9hcmd1bWVudHMgPSBhcmd1bWVudHMsXHJcbiAgICAgIF90aGlzID0gdGhpcztcclxuXHJcbiAgICBpZiAodGltZW91dCkgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xyXG4gICAgdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICBmdW5jLmFwcGx5KGNvbnRleHQgfHwgX3RoaXMsIF9hcmd1bWVudHMpO1xyXG4gICAgfSwgaW50ZXJ2YWwpO1xyXG4gIH07XHJcbn1cclxuXHJcbmNvbnN0IFNsaWRlckNvbnN0cnVjdG9yID0gLyojX19QVVJFX18qLyAoZnVuY3Rpb24gKCkge1xyXG4gIGZ1bmN0aW9uIFNsaWRlckNvbnN0cnVjdG9yKGVsZW1lbnQpIHtcclxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTbGlkZXJDb25zdHJ1Y3Rvcik7XHJcblxyXG4gICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9jcmVhdGVDbGFzcyhTbGlkZXJDb25zdHJ1Y3RvciwgW1xyXG4gICAge1xyXG4gICAgICBrZXk6IFwiaW5pdFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdCgpIHtcclxuICAgICAgICBsZXQgX3RoaXMzID0gdGhpcztcclxuXHJcbiAgICAgICAgdGhpcy5wYXJhbXMgPSB7fTtcclxuICAgICAgICB0aGlzLnBhcmFtcy5hdXRvcGxheSA9IHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWF1dG9wbGF5LXRpbWVvdXRcIikgIT09IG51bGw7XHJcbiAgICAgICAgdGhpcy5wYXJhbXMuYXV0b3BsYXlUaW1lb3V0ID0gK3RoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWF1dG9wbGF5LXRpbWVvdXRcIikgfHwgNTAwMDtcclxuICAgICAgICB0aGlzLnBhcmFtcy5hcnJvd3MgPSB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1uby1hcnJvd3NcIikgPT09IG51bGwgPyB0cnVlIDogZmFsc2U7XHJcblxyXG4gICAgICAgIGNvbnN0IG1lZGlhUXVlcnkgPSB3aW5kb3cubWF0Y2hNZWRpYShcIihtaW4td2lkdGg6IDU3NS45OHB4KVwiKTtcclxuICAgICAgICAvLyBDaGVjayBpZiB0aGUgbWVkaWEgcXVlcnkgaXMgdHJ1ZVxyXG4gICAgICAgIGlmIChtZWRpYVF1ZXJ5Lm1hdGNoZXMpIHtcclxuICAgICAgICAgIHRoaXMucGFyYW1zLmRvdHMgPSB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1uby1kb3RzXCIpID09PSBudWxsID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLnBhcmFtcy5kb3RzID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMucGFyYW1zLmFkYXB0aXZlSGVpZ2h0ID0gdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtYWRhcHRpdmUtaGVpZ2h0XCIpICE9PSBudWxsO1xyXG4gICAgICAgIHRoaXMucGFyYW1zLmNlbnRlck1vZGUgPSB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1jZW50ZXJcIikgPT09IG51bGwgPyBmYWxzZSA6IHRydWU7XHJcbiAgICAgICAgdGhpcy5wYXJhbXMuY291bnQgPSB7fTtcclxuICAgICAgICB0aGlzLnBhcmFtcy5jb3VudC54cyA9ICt0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1zbGlkZXNcIikgfHwgMTtcclxuICAgICAgICB0aGlzLnBhcmFtcy5jb3VudC5zbSA9ICt0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1zbS1zbGlkZXNcIikgfHwgdGhpcy5wYXJhbXMuY291bnQueHM7XHJcbiAgICAgICAgdGhpcy5wYXJhbXMuY291bnQubWQgPSArdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtbWQtc2xpZGVzXCIpIHx8IHRoaXMucGFyYW1zLmNvdW50LnNtO1xyXG4gICAgICAgIHRoaXMucGFyYW1zLmNvdW50LmxnID0gK3RoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWxnLXNsaWRlc1wiKSB8fCB0aGlzLnBhcmFtcy5jb3VudC5tZDtcclxuICAgICAgICB0aGlzLnBhcmFtcy5jb3VudC54bCA9ICt0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS14bC1zbGlkZXNcIikgfHwgdGhpcy5wYXJhbXMuY291bnQubGc7XHJcbiAgICAgICAgdGhpcy5wYXJhbXMucm93cyA9IHt9O1xyXG4gICAgICAgICh0aGlzLnBhcmFtcy5yb3dzLnhzID0gK3RoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXJvd3NcIikgfHwgMSksXHJcbiAgICAgICAgICAodGhpcy5wYXJhbXMucm93cy5zbSA9ICt0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1zbS1yb3dzXCIpIHx8IHRoaXMucGFyYW1zLnJvd3MueHMpLFxyXG4gICAgICAgICAgKHRoaXMucGFyYW1zLnJvd3MubWQgPSArdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtbWQtcm93c1wiKSB8fCB0aGlzLnBhcmFtcy5yb3dzLnNtKSxcclxuICAgICAgICAgICh0aGlzLnBhcmFtcy5yb3dzLmxnID0gK3RoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWxnLXJvd3NcIikgfHwgdGhpcy5wYXJhbXMucm93cy5tZCksXHJcbiAgICAgICAgICAodGhpcy5wYXJhbXMucm93cy54bCA9ICt0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS14bC1yb3dzXCIpIHx8IHRoaXMucGFyYW1zLnJvd3MubGcpO1xyXG4gICAgICAgIHRoaXMucGFyYW1zLnN0YXRlID0ge307XHJcbiAgICAgICAgT2JqZWN0LmtleXMoYnJlYWtwb2ludHMpLmZvckVhY2goZnVuY3Rpb24gKGtleSwgaW5kZXgpIHtcclxuICAgICAgICAgIGxldCBicmVha3BvaW50ID0gaW5kZXggIT09IDAgPyBcIi1cIiArIGtleSArIFwiLVwiIDogXCItXCI7XHJcblxyXG4gICAgICAgICAgbGV0IGF0dHIgPSBfdGhpczMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhXCIuY29uY2F0KGJyZWFrcG9pbnQsIFwibW91bnRlZFwiKSk7XHJcblxyXG4gICAgICAgICAgaWYgKGF0dHIgPT09IG51bGwgJiYgaW5kZXggIT09IDApIHtcclxuICAgICAgICAgICAgbGV0IHByZXZLZXkgPSBPYmplY3Qua2V5cyhicmVha3BvaW50cylbaW5kZXggLSAxXTtcclxuICAgICAgICAgICAgX3RoaXMzLnBhcmFtcy5zdGF0ZVtrZXldID0gX3RoaXMzLnBhcmFtcy5zdGF0ZVtwcmV2S2V5XTtcclxuICAgICAgICAgIH0gZWxzZSBpZiAoYXR0ciA9PT0gXCJ0cnVlXCIgfHwgKGluZGV4ID09PSAwICYmIGF0dHIgIT09IFwiZmFsc2VcIikpIHtcclxuICAgICAgICAgICAgX3RoaXMzLnBhcmFtcy5zdGF0ZVtrZXldID0gdHJ1ZTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIF90aGlzMy5wYXJhbXMuc3RhdGVba2V5XSA9IGZhbHNlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuc2xpZGVzID0gW107XHJcbiAgICAgICAgdGhpcy5jb250YWluc01vYmlsZUhpZGRlblNsaWRlcyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5jaGlsZE5vZGVzLmZvckVhY2goZnVuY3Rpb24gKHNsaWRlKSB7XHJcbiAgICAgICAgICBpZiAoIXNsaWRlLnRhZ05hbWUpIHJldHVybjtcclxuXHJcbiAgICAgICAgICBpZiAoc2xpZGUuZ2V0QXR0cmlidXRlKFwiZGF0YS1zbGlkZS1tb2JpbGUtaGlkZGVuXCIpICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIF90aGlzMy5jb250YWluc01vYmlsZUhpZGRlblNsaWRlcyA9IHRydWU7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgX3RoaXMzLnNsaWRlcy5wdXNoKHNsaWRlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNyZWF0ZUljb25zKCk7XHJcbiAgICAgICAgdGhpcy5jaGVja1NsaWRlclN0YXRlKCk7XHJcbiAgICAgICAgdGhpcy5jaGVja1NsaWRlclN0YXRlRGVib3VuY2VkID0gc2xpZGVyRGVib3VuY2UodGhpcy5jaGVja1NsaWRlclN0YXRlLCA1MDAsIHRoaXMpO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHRoaXMuY2hlY2tTbGlkZXJTdGF0ZURlYm91bmNlZCk7XHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBrZXk6IFwiY3JlYXRlSWNvbnNcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUljb25zKCkge1xyXG4gICAgICAgIGxldCBsZWZ0SWNvbiA9XHJcbiAgICAgICAgICAnXFxuICAgICAgPHN2ZyB2aWV3Qm94PVwiMCAwIDExIDE5XCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj5cXG4gICAgICAgIDxwYXRoIGQ9XCJNMS40IDE4LjFMMCAxNi43TDcuNiA5LjEwMDAxTDAgMS41TDEuNCAwTDEwLjQgOS4xMDAwMUMxMC40IDkuMTAwMDEgMS4zIDE4LjEgMS40IDE4LjFaXCIvPlxcbiAgICAgIDwvc3ZnPlxcbiAgICAnO1xyXG4gICAgICAgIGxldCByaWdodEljb24gPVxyXG4gICAgICAgICAgJ1xcbiAgICAgIDxzdmcgdmlld0JveD1cIjAgMCAxMSAxOVwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+XFxuICAgICAgICA8cGF0aCBkPVwiTTkuMDAwMzkgNy4yNDc5MmUtMDVMMTAuNDAwNCAxLjQwMDA3TDIuODAwMzkgOS4wMDAwOUwxMC40MDA0IDE2LjYwMDFMOS4wMDAzOSAxOC4xMDAxTDAuMDAwMzkxMDA2IDkuMDAwMDlDMC4wMDAzOTEwMDYgOS4wMDAwOSA5LjEwMDM5IDcuMjQ3OTJlLTA1IDkuMDAwMzkgNy4yNDc5MmUtMDVaXCIvPlxcbiAgICAgIDwvc3ZnPlxcbiAgICAnO1xyXG4gICAgICAgIGxldCBsZWZ0SWNvbkNsYXNzID0gXCJjdXN0b20taWNvbi1sZWZ0XCI7XHJcbiAgICAgICAgbGV0IHJpZ2h0SWNvbkNsYXNzID0gXCJjdXN0b20taWNvbi1yaWdodFwiO1xyXG4gICAgICAgIGxldCBjdXN0b21JY29ucyA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFxyXG4gICAgICAgICAgXCIuXCIuY29uY2F0KGxlZnRJY29uQ2xhc3MsIFwiLCAuXCIpLmNvbmNhdChyaWdodEljb25DbGFzcylcclxuICAgICAgICApO1xyXG4gICAgICAgIGN1c3RvbUljb25zLmZvckVhY2goZnVuY3Rpb24gKGljb24pIHtcclxuICAgICAgICAgIGxldCBpc0xlZnRJY29uID0gaWNvbi5jbGFzc0xpc3QuY29udGFpbnMobGVmdEljb25DbGFzcyk7XHJcbiAgICAgICAgICBsZXQgaXNSaWdodEljb24gPSBpY29uLmNsYXNzTGlzdC5jb250YWlucyhyaWdodEljb25DbGFzcyk7XHJcblxyXG4gICAgICAgICAgaWYgKGlzTGVmdEljb24pIHtcclxuICAgICAgICAgICAgaWNvbi5jbGFzc0xpc3QucmVtb3ZlKGxlZnRJY29uQ2xhc3MpO1xyXG4gICAgICAgICAgICBsZWZ0SWNvbiA9IGljb24ub3V0ZXJIVE1MO1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChpc1JpZ2h0SWNvbikge1xyXG4gICAgICAgICAgICBpY29uLmNsYXNzTGlzdC5yZW1vdmUocmlnaHRJY29uQ2xhc3MpO1xyXG4gICAgICAgICAgICByaWdodEljb24gPSBpY29uLm91dGVySFRNTDtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpY29uLnJlbW92ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMubmV4dEFycm93ID0gJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnV0dG9uIGJ1dHRvbl9zdHlsZS0xIHNsaWNrLW5leHRcIj4nLmNvbmNhdChcclxuICAgICAgICAgIGxlZnRJY29uLFxyXG4gICAgICAgICAgXCI8L2J1dHRvbj5cIlxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy5wcmV2QXJyb3cgPSAnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidXR0b24gYnV0dG9uX3N0eWxlLTEgc2xpY2stcHJldlwiPicuY29uY2F0KFxyXG4gICAgICAgICAgcmlnaHRJY29uLFxyXG4gICAgICAgICAgXCI8L2J1dHRvbj5cIlxyXG4gICAgICAgICk7XHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBrZXk6IFwiY2hlY2tTbGlkZXJTdGF0ZVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY2hlY2tTbGlkZXJTdGF0ZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5tb3VudGVkICYmIHRoaXMuc2F2ZWRXaW5kb3dXaWR0aCA9PT0gd2luZG93LmlubmVyV2lkdGgpIHJldHVybjtcclxuICAgICAgICB0aGlzLnNhdmVkV2luZG93V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubW91bnRlZCkge1xyXG4gICAgICAgICAgdGhpcy51bm1vdW50KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgc3RhdGU7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGJyZWFrcG9pbnQgaW4gYnJlYWtwb2ludHMpIHtcclxuICAgICAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA+PSBicmVha3BvaW50c1ticmVha3BvaW50XSkge1xyXG4gICAgICAgICAgICBzdGF0ZSA9IHRoaXMucGFyYW1zLnN0YXRlW2JyZWFrcG9pbnRdO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHN0YXRlKSB7XHJcbiAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInZpc2libGVcIik7XHJcblxyXG4gICAgICAgICAgaWYgKHRoaXMuY29udGFpbnNNb2JpbGVIaWRkZW5TbGlkZXMpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGVja1NsaWRlc1Zpc2liaWxpdHkoKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICB0aGlzLm1vdW50KCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwidmlzaWJsZVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBrZXk6IFwiY2hlY2tTbGlkZXNWaXNpYmlsaXR5XCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjaGVja1NsaWRlc1Zpc2liaWxpdHkoKSB7XHJcbiAgICAgICAgbGV0IF90aGlzNCA9IHRoaXM7XHJcblxyXG4gICAgICAgIHRoaXMuc2xpZGVzLmZvckVhY2goZnVuY3Rpb24gKHNsaWRlKSB7XHJcbiAgICAgICAgICBzbGlkZS5yZW1vdmUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnNsaWRlcy5mb3JFYWNoKGZ1bmN0aW9uIChzbGlkZSkge1xyXG4gICAgICAgICAgbGV0IHNob3VsZEJlSGlkZGVuID0gc2xpZGUuZ2V0QXR0cmlidXRlKFwiZGF0YS1zbGlkZS1tb2JpbGUtaGlkZGVuXCIpICE9PSBudWxsO1xyXG4gICAgICAgICAgbGV0IGJyZWFrcG9pbnQgPSB3aW5kb3cuaW5uZXJXaWR0aCA8IGJyZWFrcG9pbnRzLnNtO1xyXG5cclxuICAgICAgICAgIGlmICghKHNob3VsZEJlSGlkZGVuICYmIGJyZWFrcG9pbnQpKSB7XHJcbiAgICAgICAgICAgIF90aGlzNC5lbGVtZW50Lmluc2VydEFkamFjZW50RWxlbWVudChcImJlZm9yZWVuZFwiLCBzbGlkZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBrZXk6IFwibW91bnRcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIG1vdW50KCkge1xyXG4gICAgICAgICQodGhpcy5lbGVtZW50KS5zbGljayh7XHJcbiAgICAgICAgICBhdXRvcGxheTogdGhpcy5wYXJhbXMuYXV0b3BsYXksXHJcbiAgICAgICAgICBhdXRvcGxheVNwZWVkOiB0aGlzLnBhcmFtcy5hdXRvcGxheVRpbWVvdXQsXHJcbiAgICAgICAgICBtb2JpbGVGaXJzdDogdHJ1ZSxcclxuICAgICAgICAgIHNsaWRlc1RvU2hvdzogdGhpcy5wYXJhbXMuY291bnQueHMsXHJcbiAgICAgICAgICBzbGlkZXNUb1Njcm9sbDogdGhpcy5wYXJhbXMuY291bnQueHMsXHJcbiAgICAgICAgICByb3dzOiB0aGlzLnBhcmFtcy5yb3dzLnhzLFxyXG4gICAgICAgICAgcHJldkFycm93OiB0aGlzLnByZXZBcnJvdyxcclxuICAgICAgICAgIG5leHRBcnJvdzogdGhpcy5uZXh0QXJyb3csXHJcbiAgICAgICAgICBhcnJvd3M6IHRoaXMucGFyYW1zLmFycm93cyxcclxuICAgICAgICAgIGFkYXB0aXZlSGVpZ2h0OiB0aGlzLnBhcmFtcy5hZGFwdGl2ZUhlaWdodCxcclxuICAgICAgICAgIGRvdHM6IHRoaXMucGFyYW1zLmRvdHMsXHJcbiAgICAgICAgICBjZW50ZXJNb2RlOiB0aGlzLnBhcmFtcy5jZW50ZXJNb2RlLFxyXG4gICAgICAgICAgYWNjZXNzaWJpbGl0eTogZmFsc2UsXHJcbiAgICAgICAgICByZXNwb25zaXZlOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBicmVha3BvaW50OiBicmVha3BvaW50cy5zbSAtIDEsXHJcbiAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogdGhpcy5wYXJhbXMuY291bnQuc20sXHJcbiAgICAgICAgICAgICAgICBzbGlkZXNUb1Njcm9sbDogdGhpcy5wYXJhbXMuY291bnQuc20sXHJcbiAgICAgICAgICAgICAgICByb3dzOiB0aGlzLnBhcmFtcy5yb3dzLnNtLFxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBicmVha3BvaW50OiBicmVha3BvaW50cy5tZCAtIDEsXHJcbiAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogdGhpcy5wYXJhbXMuY291bnQubWQsXHJcbiAgICAgICAgICAgICAgICBzbGlkZXNUb1Njcm9sbDogdGhpcy5wYXJhbXMuY291bnQubWQsXHJcbiAgICAgICAgICAgICAgICByb3dzOiB0aGlzLnBhcmFtcy5yb3dzLm1kLFxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBicmVha3BvaW50OiBicmVha3BvaW50cy5sZyAtIDEsXHJcbiAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogdGhpcy5wYXJhbXMuY291bnQubGcsXHJcbiAgICAgICAgICAgICAgICBzbGlkZXNUb1Njcm9sbDogdGhpcy5wYXJhbXMuY291bnQubGcsXHJcbiAgICAgICAgICAgICAgICByb3dzOiB0aGlzLnBhcmFtcy5yb3dzLmxnLFxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBicmVha3BvaW50OiBicmVha3BvaW50cy54bCAtIDEsXHJcbiAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogdGhpcy5wYXJhbXMuY291bnQueGwsXHJcbiAgICAgICAgICAgICAgICBzbGlkZXNUb1Njcm9sbDogdGhpcy5wYXJhbXMuY291bnQueGwsXHJcbiAgICAgICAgICAgICAgICByb3dzOiB0aGlzLnBhcmFtcy5yb3dzLnhsLFxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICBdLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMubW91bnRlZCA9IHRydWU7XHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBrZXk6IFwidW5tb3VudFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gdW5tb3VudCgpIHtcclxuICAgICAgICAkKHRoaXMuZWxlbWVudCkuc2xpY2soXCJ1bnNsaWNrXCIpO1xyXG4gICAgICAgIHRoaXMubW91bnRlZCA9IGZhbHNlO1xyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICBdKTtcclxuXHJcbiAgcmV0dXJuIFNsaWRlckNvbnN0cnVjdG9yO1xyXG59KSgpO1xyXG5cclxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xyXG4gICQoXCIuY2F0YWxvZy1maWx0ZXItYWNjb3JkaW9uIGEub3BlbmVyXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICQodGhpcykucGFyZW50KCkuZmluZChcInVsOmZpcnN0XCIpLnNsaWRlVG9nZ2xlKCk7XHJcbiAgICAkKHRoaXMpLnBhcmVudCgpLnRvZ2dsZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH0pO1xyXG5cclxuICAkKFwiW2RhdGEtZXhwYW5kXVwiKS5vbihcImNsaWNrXCIsIChldmVudCkgPT4ge1xyXG4gICAgY29uc3QgdGFyZ2V0ID0gJChldmVudC5jdXJyZW50VGFyZ2V0KTtcclxuICAgIGNvbnN0IHBhcmVudCA9IHRhcmdldC5wYXJlbnQoKTtcclxuICAgIHBhcmVudC5maW5kKFwiW2RhdGEtY29sbGFwc2UtY29udGVudF1cIikucmVtb3ZlQ2xhc3MoXCJkLW5vbmVcIik7XHJcbiAgICBwYXJlbnQuZmluZChcIltkYXRhLWNvbGxhcHNlXVwiKS5yZW1vdmVDbGFzcyhcImQtbm9uZVwiKTtcclxuICAgIHRhcmdldC5hZGRDbGFzcyhcImQtbm9uZVwiKTtcclxuICB9KTtcclxuXHJcbiAgJChcIltkYXRhLWNvbGxhcHNlXVwiKS5vbihcImNsaWNrXCIsIChldmVudCkgPT4ge1xyXG4gICAgY29uc3QgdGFyZ2V0ID0gJChldmVudC5jdXJyZW50VGFyZ2V0KTtcclxuICAgIGNvbnN0IHBhcmVudCA9IHRhcmdldC5wYXJlbnQoKTtcclxuICAgIHBhcmVudC5maW5kKFwiW2RhdGEtY29sbGFwc2UtY29udGVudF1cIikuYWRkQ2xhc3MoXCJkLW5vbmVcIik7XHJcbiAgICBwYXJlbnQuZmluZChcIltkYXRhLWV4cGFuZF1cIikucmVtb3ZlQ2xhc3MoXCJkLW5vbmVcIik7XHJcbiAgICB0YXJnZXQuYWRkQ2xhc3MoXCJkLW5vbmVcIik7XHJcbiAgfSk7XHJcblxyXG4gICQoXCJbZGF0YS1leHBhbmQtbWVudV1cIikub24oXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAkKFwiLm1vYmlsZS1zaWRlLW1lbnVfX2JhY2tncm91bmRcIikuYWRkQ2xhc3MoXCJkLWJsb2NrXCIpO1xyXG4gICAgJChcIi5tb2JpbGUtc2lkZS1tZW51LWNvbnRlbnRcIikuYWRkQ2xhc3MoXCJtb2JpbGUtc2lkZS1tZW51LWNvbnRlbnRfYWN0aXZlXCIpO1xyXG4gIH0pO1xyXG5cclxuICAkKFwiW2RhdGEtY29sbGFwc2UtbWVudV1cIikub24oXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAkKFwiLm1vYmlsZS1zaWRlLW1lbnVfX2JhY2tncm91bmRcIikucmVtb3ZlQ2xhc3MoXCJkLWJsb2NrXCIpO1xyXG4gICAgJChcIi5tb2JpbGUtc2lkZS1tZW51LWNvbnRlbnRcIikucmVtb3ZlQ2xhc3MoXCJtb2JpbGUtc2lkZS1tZW51LWNvbnRlbnRfYWN0aXZlXCIpO1xyXG4gICAgJChgW2RhdGEtbWVudS1wYWdlXTpub3QoOmZpcnN0LWNoaWxkKWApLnJlbW92ZUNsYXNzKFwibW9iaWxlLXNpZGUtbWVudS1jb250ZW50X19wYWdlX2FjdGl2ZVwiKTtcclxuICB9KTtcclxuXHJcbiAgJChcIltkYXRhLW1lbnUtcGFnZS1leHBhbmRdXCIpLm9uKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICBjb25zdCBpZCA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuYXR0cihcImRhdGEtbWVudS1wYWdlLWV4cGFuZFwiKTtcclxuICAgICQoYFtkYXRhLW1lbnUtcGFnZT1cIiR7aWR9XCJdYCkuYWRkQ2xhc3MoXCJtb2JpbGUtc2lkZS1tZW51LWNvbnRlbnRfX3BhZ2VfYWN0aXZlXCIpO1xyXG4gIH0pO1xyXG5cclxuICAkKFwiW2RhdGEtbWVudS1wYWdlLWNvbGxhcHNlXVwiKS5vbihcImNsaWNrXCIsIChldmVudCkgPT4ge1xyXG4gICAgY29uc3QgaWQgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmF0dHIoXCJkYXRhLW1lbnUtcGFnZS1jb2xsYXBzZVwiKTtcclxuICAgICQoYFtkYXRhLW1lbnUtcGFnZT1cIiR7aWR9XCJdYCkucmVtb3ZlQ2xhc3MoXCJtb2JpbGUtc2lkZS1tZW51LWNvbnRlbnRfX3BhZ2VfYWN0aXZlXCIpO1xyXG4gIH0pO1xyXG5cclxuICAkKFwiLnByb2R1Y3QtY2FyZC1zbGlkZXNob3dfX3NlY3RvclwiKS5vbihcIm1vdXNlbW92ZVwiLCAoZXZlbnQpID0+IHtcclxuICAgIGNvbnN0IHRhcmdldCA9ICQoZXZlbnQuY3VycmVudFRhcmdldCk7XHJcbiAgICBjb25zdCBpZCA9IHRhcmdldC5hdHRyKFwiZGF0YS1zZWN0b3JcIik7XHJcbiAgICBjb25zdCBwYXJlbnQgPSB0YXJnZXQucGFyZW50KCkucGFyZW50KCk7XHJcbiAgICBwYXJlbnRcclxuICAgIC5maW5kKFwiLnByb2R1Y3QtY2FyZC1zbGlkZXNob3dfX2ltYWdlX2FjdGl2ZVwiKVxyXG4gICAgLnJlbW92ZUNsYXNzKFwicHJvZHVjdC1jYXJkLXNsaWRlc2hvd19faW1hZ2VfYWN0aXZlXCIpO1xyXG4gICAgcGFyZW50XHJcbiAgICAuZmluZChcIi5wcm9kdWN0LWNhcmQtc2xpZGVzaG93X19kb3RfYWN0aXZlXCIpXHJcbiAgICAucmVtb3ZlQ2xhc3MoXCJwcm9kdWN0LWNhcmQtc2xpZGVzaG93X19kb3RfYWN0aXZlXCIpO1xyXG4gICAgcGFyZW50LmZpbmQoYFtkYXRhLXNlY3Rvci1pbWFnZT1cIiR7aWR9XCJdYCkuYWRkQ2xhc3MoXCJwcm9kdWN0LWNhcmQtc2xpZGVzaG93X19pbWFnZV9hY3RpdmVcIik7XHJcbiAgICBwYXJlbnQuZmluZChgW2RhdGEtc2VjdG9yLWRvdD1cIiR7aWR9XCJdYCkuYWRkQ2xhc3MoXCJwcm9kdWN0LWNhcmQtc2xpZGVzaG93X19kb3RfYWN0aXZlXCIpO1xyXG4gIH0pO1xyXG5cclxuICBsZXQgdG91Y2hzdGFydFggPSAwO1xyXG4gIGxldCB0b3VjaGVuZFggPSAwO1xyXG5cclxuICAkKFwiLnByb2R1Y3QtY2FyZC1zbGlkZXNob3dfX3NlY3RvcnNcIikub24oXCJ0b3VjaHN0YXJ0XCIsIChldmVudCkgPT4ge1xyXG4gICAgdG91Y2hzdGFydFggPSBldmVudC5jaGFuZ2VkVG91Y2hlc1swXS5zY3JlZW5YO1xyXG4gIH0pO1xyXG5cclxuICAkKFwiLnByb2R1Y3QtY2FyZC1zbGlkZXNob3dfX3NlY3RvcnNcIikub24oXCJ0b3VjaGVuZFwiLCAoZXZlbnQpID0+IHtcclxuICAgIHRvdWNoZW5kWCA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnNjcmVlblg7XHJcbiAgICBjb25zdCBwYXJlbnQgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudCgpO1xyXG4gICAgY29uc3QgaW1nID0gcGFyZW50LmZpbmQoXCIucHJvZHVjdC1jYXJkLXNsaWRlc2hvd19faW1hZ2VfYWN0aXZlXCIpO1xyXG4gICAgY29uc3QgaWQgPSBOdW1iZXIoaW1nLmF0dHIoXCJkYXRhLXNlY3Rvci1pbWFnZVwiKSk7XHJcbiAgICBjb25zdCBsZW5ndGggPSBwYXJlbnQuZmluZChcIi5wcm9kdWN0LWNhcmQtc2xpZGVzaG93X19pbWFnZVwiKS5sZW5ndGg7XHJcblxyXG4gICAgaWYgKHRvdWNoZW5kWCA8IHRvdWNoc3RhcnRYKSB7XHJcbiAgICAgIHBhcmVudFxyXG4gICAgICAuZmluZChcIi5wcm9kdWN0LWNhcmQtc2xpZGVzaG93X19pbWFnZV9hY3RpdmVcIilcclxuICAgICAgLnJlbW92ZUNsYXNzKFwicHJvZHVjdC1jYXJkLXNsaWRlc2hvd19faW1hZ2VfYWN0aXZlXCIpO1xyXG4gICAgICBwYXJlbnRcclxuICAgICAgLmZpbmQoXCIucHJvZHVjdC1jYXJkLXNsaWRlc2hvd19fZG90X2FjdGl2ZVwiKVxyXG4gICAgICAucmVtb3ZlQ2xhc3MoXCJwcm9kdWN0LWNhcmQtc2xpZGVzaG93X19kb3RfYWN0aXZlXCIpO1xyXG4gICAgICBpZiAoaWQgPj0gbGVuZ3RoKSB7XHJcbiAgICAgICAgcGFyZW50LmZpbmQoYFtkYXRhLXNlY3Rvci1pbWFnZT1cIiR7MX1cIl1gKS5hZGRDbGFzcyhcInByb2R1Y3QtY2FyZC1zbGlkZXNob3dfX2ltYWdlX2FjdGl2ZVwiKTtcclxuICAgICAgICBwYXJlbnQuZmluZChgW2RhdGEtc2VjdG9yLWRvdD1cIiR7MX1cIl1gKS5hZGRDbGFzcyhcInByb2R1Y3QtY2FyZC1zbGlkZXNob3dfX2RvdF9hY3RpdmVcIik7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHBhcmVudFxyXG4gICAgICAuZmluZChgW2RhdGEtc2VjdG9yLWltYWdlPVwiJHtpZCArIDF9XCJdYClcclxuICAgICAgLmFkZENsYXNzKFwicHJvZHVjdC1jYXJkLXNsaWRlc2hvd19faW1hZ2VfYWN0aXZlXCIpO1xyXG4gICAgICBwYXJlbnQuZmluZChgW2RhdGEtc2VjdG9yLWRvdD1cIiR7aWQgKyAxfVwiXWApLmFkZENsYXNzKFwicHJvZHVjdC1jYXJkLXNsaWRlc2hvd19fZG90X2FjdGl2ZVwiKTtcclxuICAgIH1cclxuICAgIGlmICh0b3VjaGVuZFggPiB0b3VjaHN0YXJ0WCkge1xyXG4gICAgICBwYXJlbnRcclxuICAgICAgLmZpbmQoXCIucHJvZHVjdC1jYXJkLXNsaWRlc2hvd19faW1hZ2VfYWN0aXZlXCIpXHJcbiAgICAgIC5yZW1vdmVDbGFzcyhcInByb2R1Y3QtY2FyZC1zbGlkZXNob3dfX2ltYWdlX2FjdGl2ZVwiKTtcclxuICAgICAgcGFyZW50XHJcbiAgICAgIC5maW5kKFwiLnByb2R1Y3QtY2FyZC1zbGlkZXNob3dfX2RvdF9hY3RpdmVcIilcclxuICAgICAgLnJlbW92ZUNsYXNzKFwicHJvZHVjdC1jYXJkLXNsaWRlc2hvd19fZG90X2FjdGl2ZVwiKTtcclxuICAgICAgaWYgKGlkIDw9IDEpIHtcclxuICAgICAgICBwYXJlbnRcclxuICAgICAgICAuZmluZChgW2RhdGEtc2VjdG9yLWltYWdlPVwiJHtsZW5ndGh9XCJdYClcclxuICAgICAgICAuYWRkQ2xhc3MoXCJwcm9kdWN0LWNhcmQtc2xpZGVzaG93X19pbWFnZV9hY3RpdmVcIik7XHJcbiAgICAgICAgcGFyZW50LmZpbmQoYFtkYXRhLXNlY3Rvci1kb3Q9XCIke2xlbmd0aH1cIl1gKS5hZGRDbGFzcyhcInByb2R1Y3QtY2FyZC1zbGlkZXNob3dfX2RvdF9hY3RpdmVcIik7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHBhcmVudFxyXG4gICAgICAuZmluZChgW2RhdGEtc2VjdG9yLWltYWdlPVwiJHtpZCAtIDF9XCJdYClcclxuICAgICAgLmFkZENsYXNzKFwicHJvZHVjdC1jYXJkLXNsaWRlc2hvd19faW1hZ2VfYWN0aXZlXCIpO1xyXG4gICAgICBwYXJlbnQuZmluZChgW2RhdGEtc2VjdG9yLWRvdD1cIiR7aWQgLSAxfVwiXWApLmFkZENsYXNzKFwicHJvZHVjdC1jYXJkLXNsaWRlc2hvd19fZG90X2FjdGl2ZVwiKTtcclxuICAgIH1cclxuICB9KTtcclxufSk7XHJcbiQoXCIubGlrZS1idG5cIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICQodGhpcykudG9nZ2xlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbn0pO1xyXG4kKFwiLmNpdHktc2VsZWN0aW9uX19saW5rXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAkKFwiLmNpdHktc2VsZWN0aW9uX19saXN0XCIpLnRvZ2dsZSgwKTtcclxufSk7XHJcbiQod2luZG93KS5jbGljayhmdW5jdGlvbiAoZSkge1xyXG4gIGlmICghZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiY2l0eS1zZWxlY3Rpb25fX2xpbmtcIikpIHtcclxuICAgICQoXCIuY2l0eS1zZWxlY3Rpb25fX2xpc3RcIikudG9nZ2xlKGZhbHNlKTtcclxuICB9XHJcbn0pO1xyXG4kKFwiLmJ1cmdlci1tZW51XCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAkKFwiLm1vYmlsZS1tZW51XCIpLnRvZ2dsZSgwKTtcclxufSk7XHJcbiQoXCIuY2F0YWxvZy1pbm5lci1idG5cIikuY2xpY2soZnVuY3Rpb24gKGUpIHtcclxuICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgJCh0aGlzKS50b2dnbGVDbGFzcyhcIm9wZW5cIik7XHJcbiAgJChcIi5jYXRhbG9nLWhlYWRlci1jb250ZW50XCIpLnRvZ2dsZSgwKTtcclxufSk7XHJcbiQoXCIuY2F0YWxvZy1pbm5lci1idG4sLmNhdGFsb2ctbWVudV9faGVhZCBhXCIpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICQoXCIuY2F0YWxvZy1tZW51XCIpLnRvZ2dsZSgwKTtcclxufSk7XHJcbiQoXCIuYnVyZ2VyLWNhdGFsb2dcIikuY2xpY2soZnVuY3Rpb24gKGUpIHtcclxuICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgJCh0aGlzKS50b2dnbGVDbGFzcyhcIm9wZW5cIik7XHJcbn0pO1xyXG4kKFwiLnNoYXJlLWJ0blwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgJChcIi5zaGFyZS1ibG9ja19fc2hvd1wiKS50b2dnbGUoMCk7XHJcbn0pO1xyXG4kKFwiLmNsb3NlLXBhbmVsXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAkKFwiLmJvdHRvbS1wYW5lbFwiKS50b2dnbGUoMCk7XHJcbn0pO1xyXG4kKFwiLmZpbHRlci1idG4sIC5jbG9zZS1idG4tMlwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgJChcIi5jYXRhbG9nLWZpbHRlclwiKS50b2dnbGUoMCk7XHJcbn0pO1xyXG4kKFwiLmNhdGFsb2ctc2lkZV9fdGl0bGVcIikuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICQoXCIuY2F0YWxvZy1zaWRlX19jb250ZW50XCIpLnRvZ2dsZSgwKTtcclxuICAkKFwiLmNhdGFsb2ctc2lkZV9fY29udGVudC1hY2NvcmRlb25cIikudG9nZ2xlKDApO1xyXG59KTtcclxuJChcIi5jYXRhbG9nLW9wZW5lZFwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgJChcIi5jYXRhbG9nLW9wZW5lZCAuc3VibWVudVwiKS50b2dnbGUoMCk7XHJcbn0pO1xyXG4kKFwiLmJ1cmdlci1tZW51XCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAkKHRoaXMpLnRvZ2dsZUNsYXNzKFwibWVudS1vblwiKTtcclxufSk7XHJcbiQoXCIuY2F0YWxvZy1pbm5lclwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgJCh0aGlzKS50b2dnbGVDbGFzcyhcIm9wZW5cIik7XHJcbiAgJChcIi5jYXRhbG9nLWlubmVyLWNvbnRlbnRcIikudG9nZ2xlKDApO1xyXG59KTtcclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gIC8vIFRoaXMgd2lsbCBzZWxlY3QgZXZlcnl0aGluZyB3aXRoIHRoZSBjbGFzcyBzbW9vdGhTY3JvbGxcclxuICAvLyBUaGlzIHNob3VsZCBwcmV2ZW50IHByb2JsZW1zIHdpdGggY2Fyb3VzZWwsIHNjcm9sbHNweSwgZXRjLi4uXHJcbiAgJChcIi5zbW9vdGhTY3JvbGxcIikuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKFxyXG4gICAgICBsb2NhdGlvbi5wYXRobmFtZS5yZXBsYWNlKC9eXFwvLywgXCJcIikgPT0gdGhpcy5wYXRobmFtZS5yZXBsYWNlKC9eXFwvLywgXCJcIikgJiZcclxuICAgICAgbG9jYXRpb24uaG9zdG5hbWUgPT0gdGhpcy5ob3N0bmFtZVxyXG4gICAgKSB7XHJcbiAgICAgIHZhciB0YXJnZXQgPSAkKHRoaXMuaGFzaCk7XHJcbiAgICAgIHRhcmdldCA9IHRhcmdldC5sZW5ndGggPyB0YXJnZXQgOiAkKFwiW25hbWU9XCIgKyB0aGlzLmhhc2guc2xpY2UoMSkgKyBcIl1cIik7XHJcblxyXG4gICAgICBpZiAodGFyZ2V0Lmxlbmd0aCkge1xyXG4gICAgICAgICQoXCJodG1sLGJvZHlcIikuYW5pbWF0ZShcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgc2Nyb2xsVG9wOiB0YXJnZXQub2Zmc2V0KCkudG9wLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIDEwMDBcclxuICAgICAgICApOyAvLyBUaGUgbnVtYmVyIGhlcmUgcmVwcmVzZW50cyB0aGUgc3BlZWQgb2YgdGhlIHNjcm9sbCBpbiBtaWxsaXNlY29uZHNcclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSk7XHJcbn0pO1xyXG5cclxudmFyIGJpZ1NsaWRlcyA9ICQoXCIubWFpbi1zbGlkZXIgLm93bC1jYXJvdXNlbFwiKSxcclxuICBhdXRvUGxheVRpbWVvdXRTZWMgPSBwYXJzZUludChiaWdTbGlkZXMuZGF0YShcImF1dG9wbGF5LXRpbWVvdXRcIikpO1xyXG5iaWdTbGlkZXMub3dsQ2Fyb3VzZWwoe1xyXG4gIGxvb3A6IHRydWUsXHJcbiAgbWFyZ2luOiA1LFxyXG4gIG5hdjogdHJ1ZSxcclxuICBkb3RzOiB0cnVlLFxyXG4gIGl0ZW1zOiAxLFxyXG4gIGF1dG9wbGF5OiB0cnVlLFxyXG4gIGF1dG9wbGF5VGltZW91dDogYXV0b1BsYXlUaW1lb3V0U2VjICogMTAwMCxcclxuICBuYXZUZXh0OiBbXHJcbiAgICAnPHN2ZyBjbGFzcz1cImljb25cIiB2aWV3Qm94PVwiMCAwIDEwLjUgMTguMVwiPjxwYXRoIHN0cm9rZT1cIm5vbmVcIiBkPVwiTTksMGwxLjQsMS40TDIuOCw5bDcuNiw3LjZMOSwxOC4xTDAsOUMwLDksOS4xLDAsOSwwelwiPjwvcGF0aD48L3N2Zz4nLFxyXG4gICAgJzxzdmcgY2xhc3M9XCJpY29uXCIgdmlld0JveD1cIjAgMCAxMC41IDE4LjFcIj48cGF0aCBzdHJva2U9XCJub25lXCIgZD1cIk0xLjQsMTguMUwwLDE2LjdsNy42LTcuNkwwLDEuNUwxLjQsMGw5LDkuMUMxMC40LDkuMSwxLjMsMTguMSwxLjQsMTguMXpcIj48L3BhdGg+PC9zdmc+JyxcclxuICBdLFxyXG59KTtcclxudmFyIHJhZGlvQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kZWxpdmVyeS1zZWxlY3Rpb24gaW5wdXRbdHlwZT1cInJhZGlvXCJdJyk7XHJcbnZhciBjaG9pY2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5kZWxpdmVyeS1jaG9pY2VcIik7XHJcbnJhZGlvQnV0dG9ucy5mb3JFYWNoKGZ1bmN0aW9uIChidG4pIHtcclxuICBidG4uYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgY2xpY2tlZCA9IHRoaXM7XHJcbiAgICBjaG9pY2VzLmZvckVhY2goZnVuY3Rpb24gKGNob2ljZSkge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgY2hvaWNlLmNsYXNzTGlzdC5jb250YWlucyhjbGlja2VkLmlkKSB8fFxyXG4gICAgICAgIGNob2ljZS5jbGFzc0xpc3QuY29udGFpbnMoXCJkZWxpdmVyeS10eXBlLVwiICsgY2xpY2tlZC52YWx1ZSlcclxuICAgICAgKSB7XHJcbiAgICAgICAgY2hvaWNlLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY2hvaWNlLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pO1xyXG4kKFwiLnNob3BwaW5nLWNhcnQtaXRlbV9fZGVsZXRlXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAkKHRoaXMpLnBhcmVudChcIi5zaG9wcGluZy1jYXJ0LWl0ZW1cIikucmVtb3ZlKCk7XHJcbn0pO1xyXG4kKFwiLnNsaWRlciAub3dsLWNhcm91c2VsXCIpLm93bENhcm91c2VsKHtcclxuICBsb29wOiB0cnVlLFxyXG4gIG1hcmdpbjogMCxcclxuICBpdGVtczogMSxcclxuICBuYXY6IHRydWUsXHJcbn0pO1xyXG4kKFwiLm5ld3Mtc2xpZGVyIC5vd2wtY2Fyb3VzZWxcIikub3dsQ2Fyb3VzZWwoe1xyXG4gIGxvb3A6IHRydWUsXHJcbiAgbWFyZ2luOiAwLFxyXG4gIGl0ZW1zOiA0LFxyXG4gIHJlc3BvbnNpdmU6IHtcclxuICAgIDA6IHtcclxuICAgICAgbmF2OiBmYWxzZSxcclxuICAgICAgZG90czogdHJ1ZSxcclxuICAgICAgaXRlbXM6IDEsXHJcbiAgICB9LFxyXG4gICAgNDc5OiB7XHJcbiAgICAgIG5hdjogZmFsc2UsXHJcbiAgICAgIGRvdHM6IHRydWUsXHJcbiAgICAgIGl0ZW1zOiAyLFxyXG4gICAgfSxcclxuICAgIDc2ODoge1xyXG4gICAgICBuYXY6IHRydWUsXHJcbiAgICAgIGRvdHM6IGZhbHNlLFxyXG4gICAgICBpdGVtczogMyxcclxuICAgIH0sXHJcbiAgICA5OTI6IHtcclxuICAgICAgaXRlbXM6IDQsXHJcbiAgICB9LFxyXG4gIH0sXHJcbn0pO1xyXG4kKFwiLmFjdGlvbi1zbGlkZXIgLm93bC1jYXJvdXNlbFwiKS5vd2xDYXJvdXNlbCh7XHJcbiAgbG9vcDogdHJ1ZSxcclxuICBtYXJnaW46IDIwLFxyXG4gIG5hdjogdHJ1ZSxcclxuICBkb3RzOiBmYWxzZSxcclxuICBpdGVtczogMyxcclxuICByZXNwb25zaXZlOiB7XHJcbiAgICAwOiB7XHJcbiAgICAgIG5hdjogZmFsc2UsXHJcbiAgICAgIGRvdHM6IHRydWUsXHJcbiAgICAgIGl0ZW1zOiAxLFxyXG4gICAgfSxcclxuICAgIDQ3OToge1xyXG4gICAgICBuYXY6IGZhbHNlLFxyXG4gICAgICBkb3RzOiB0cnVlLFxyXG4gICAgICBpdGVtczogMixcclxuICAgIH0sXHJcbiAgICA3Njg6IHtcclxuICAgICAgbmF2OiB0cnVlLFxyXG4gICAgICBkb3RzOiBmYWxzZSxcclxuICAgICAgaXRlbXM6IDMsXHJcbiAgICB9LFxyXG4gIH0sXHJcbn0pO1xyXG4kKFwiLnBhcnRuZXJzLXNsaWRlciAub3dsLWNhcm91c2VsXCIpLm93bENhcm91c2VsKHtcclxuICBsb29wOiB0cnVlLFxyXG4gIG1hcmdpbjogMCxcclxuICBuYXY6IHRydWUsXHJcbiAgZG90czogZmFsc2UsXHJcbiAgaXRlbXM6IDUsXHJcbiAgcmVzcG9uc2l2ZToge1xyXG4gICAgMDoge1xyXG4gICAgICBkb3RzOiB0cnVlLFxyXG4gICAgICBuYXY6IGZhbHNlLFxyXG4gICAgICBpdGVtczogMSxcclxuICAgIH0sXHJcbiAgICA1NjY6IHtcclxuICAgICAgbmF2OiBmYWxzZSxcclxuICAgICAgZG90czogdHJ1ZSxcclxuICAgICAgaXRlbXM6IDIsXHJcbiAgICB9LFxyXG4gICAgNzY4OiB7XHJcbiAgICAgIG5hdjogZmFsc2UsXHJcbiAgICAgIGRvdHM6IHRydWUsXHJcbiAgICAgIGl0ZW1zOiAzLFxyXG4gICAgfSxcclxuICAgIDkwMDoge1xyXG4gICAgICBuYXY6IGZhbHNlLFxyXG4gICAgICBkb3RzOiB0cnVlLFxyXG4gICAgICBpdGVtczogNCxcclxuICAgIH0sXHJcbiAgICA5NTA6IHtcclxuICAgICAgZG90czogZmFsc2UsXHJcbiAgICB9LFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuKGZ1bmN0aW9uICgkKSB7XHJcbiAgdmFyIGN1c3RvbVNlbGVjdCA9ICQoXCJzZWxlY3QuY3VzdG9tLXNlbGVjdFwiKTsgLy8gRklSU1QsIGNyZWF0ZSB0aGUgY3VzdG9tIHNlbGVjdCBtZW51cyBmcm9tIHRoZSBleGlzdGluZyBzZWxlY3RcclxuXHJcbiAgY3VzdG9tU2VsZWN0LmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHRoYXQgPSAkKHRoaXMpO1xyXG4gICAgdmFyIGxpc3RJRCA9IHRoYXQuYXR0cihcImlkXCIpLFxyXG4gICAgICBncm91cHMgPSB0aGF0LmNoaWxkcmVuKFwib3B0Z3JvdXBcIiksXHJcbiAgICAgIHRoZU9wdGlvbnMgPSBcIlwiLFxyXG4gICAgICBzdGFydGluZ09wdGlvbiA9IFwiXCIsXHJcbiAgICAgIGN1c3RvbVNlbGVjdCA9IFwiXCI7IC8vY2hlY2sgaWYgdGhlcmUgYXJlIG9wdGlvbiBncm91cHNcclxuXHJcbiAgICBpZiAoZ3JvdXBzLmxlbmd0aCkge1xyXG4gICAgICBncm91cHMuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGN1ckdyb3VwID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgY3VyTmFtZSA9IGN1ckdyb3VwLmF0dHIoXCJsYWJlbFwiKTsgLy9PcGVuIHRoZSBvcHRpb24gZ3JvdXBcclxuXHJcbiAgICAgICAgdGhlT3B0aW9ucyArPSAnPGxpIGNsYXNzPVwib3B0Z3JvdXBcIj4nICsgY3VyTmFtZSArIFwiPC9saT5cIjsgLy9nZXQgdGhlIG9wdGlvbnNcclxuXHJcbiAgICAgICAgY3VyR3JvdXAuY2hpbGRyZW4oXCJvcHRpb25cIikuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICB2YXIgY3VyT3B0ID0gJCh0aGlzKTtcclxuICAgICAgICAgIHZhciBjdXJWYWwgPSBjdXJPcHQuYXR0cihcInZhbHVlXCIpLFxyXG4gICAgICAgICAgICBjdXJIdG1sID0gY3VyT3B0Lmh0bWwoKSxcclxuICAgICAgICAgICAgaXNTZWxlY3RlZCA9IGN1ck9wdC5hdHRyKFwic2VsZWN0ZWRcIik7XHJcblxyXG4gICAgICAgICAgaWYgKGlzU2VsZWN0ZWQgPT09IFwic2VsZWN0ZWRcIikge1xyXG4gICAgICAgICAgICBzdGFydGluZ09wdGlvbiA9IGN1ckh0bWw7XHJcbiAgICAgICAgICAgIHRoZU9wdGlvbnMgKz0gJzxsaSBjbGFzcz1cInNlbGVjdGVkXCIgZGF0YS12YWx1ZT1cIicgKyBjdXJWYWwgKyAnXCI+JyArIGN1ckh0bWwgKyBcIjwvbGk+XCI7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGVPcHRpb25zICs9ICc8bGkgZGF0YS12YWx1ZT1cIicgKyBjdXJWYWwgKyAnXCI+JyArIGN1ckh0bWwgKyBcIjwvbGk+XCI7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7IC8vQ2xvc2UgdGhlIG9wdGlvbiBncm91cFxyXG4gICAgICAgIC8vdGhlT3B0aW9ucyArPSAnPGxpIGNsYXNzPVwib3B0Z3JvdXAtY2xvc2VcIj48L2xpPic7XHJcbiAgICAgIH0pOyAvL2FkZCBvcHRpb25zIG5vdCBpbiBhIGdyb3VwIHRvIHRoZSB0b3Agb2YgdGhlIGxpc3RcclxuXHJcbiAgICAgIHRoYXQuY2hpbGRyZW4oXCJvcHRpb25cIikuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGN1ck9wdCA9ICQodGhpcyk7XHJcbiAgICAgICAgdmFyIGN1clZhbCA9IGN1ck9wdC5hdHRyKFwidmFsdWVcIiksXHJcbiAgICAgICAgICBjdXJIdG1sID0gY3VyT3B0Lmh0bWwoKSxcclxuICAgICAgICAgIGlzU2VsZWN0ZWQgPSBjdXJPcHQuYXR0cihcInNlbGVjdGVkXCIpO1xyXG5cclxuICAgICAgICBpZiAoaXNTZWxlY3RlZCA9PT0gXCJzZWxlY3RlZFwiKSB7XHJcbiAgICAgICAgICBzdGFydGluZ09wdGlvbiA9IGN1ckh0bWw7XHJcbiAgICAgICAgICB0aGVPcHRpb25zID1cclxuICAgICAgICAgICAgJzxsaSBjbGFzcz1cInNlbGVjdGVkXCIgZGF0YS12YWx1ZT1cIicgKyBjdXJWYWwgKyAnXCI+JyArIGN1ckh0bWwgKyBcIjwvbGk+XCIgKyB0aGVPcHRpb25zO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGVPcHRpb25zID0gJzxsaSBkYXRhLXZhbHVlPVwiJyArIGN1clZhbCArICdcIj4nICsgY3VySHRtbCArIFwiPC9saT5cIiArIHRoZU9wdGlvbnM7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoYXQuY2hpbGRyZW4oXCJvcHRpb25cIikuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGN1ck9wdCA9ICQodGhpcyk7XHJcbiAgICAgICAgdmFyIGN1clZhbCA9IGN1ck9wdC5hdHRyKFwidmFsdWVcIiksXHJcbiAgICAgICAgICBjdXJIdG1sID0gY3VyT3B0Lmh0bWwoKSxcclxuICAgICAgICAgIGlzU2VsZWN0ZWQgPSBjdXJPcHQuYXR0cihcInNlbGVjdGVkXCIpO1xyXG5cclxuICAgICAgICBpZiAoaXNTZWxlY3RlZCA9PT0gXCJzZWxlY3RlZFwiKSB7XHJcbiAgICAgICAgICBzdGFydGluZ09wdGlvbiA9IGN1ckh0bWw7XHJcbiAgICAgICAgICB0aGVPcHRpb25zICs9ICc8bGkgY2xhc3M9XCJzZWxlY3RlZFwiIGRhdGEtdmFsdWU9XCInICsgY3VyVmFsICsgJ1wiPicgKyBjdXJIdG1sICsgXCI8L2xpPlwiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGVPcHRpb25zICs9ICc8bGkgZGF0YS12YWx1ZT1cIicgKyBjdXJWYWwgKyAnXCI+JyArIGN1ckh0bWwgKyBcIjwvbGk+XCI7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0gLy9idWlsZCB0aGUgY3VzdG9tIHNlbGVjdFxyXG5cclxuICAgIGN1c3RvbVNlbGVjdCA9XHJcbiAgICAgICc8ZGl2IGNsYXNzPVwiZHJvcGRvd24tY29udGFpbmVyXCI+PGRpdiBjbGFzcz1cImRyb3Bkb3duLXNlbGVjdCBlbnR5cG8tZG93bi1vcGVuLWJpZ1wiPjxzdmcgY2xhc3M9XCJpY29uXCI+PHVzZSB4bGluazpocmVmPVwiI3RhYi1hcnJvd1wiPjwvdXNlPjwvc3ZnPjxzcGFuPicgK1xyXG4gICAgICBzdGFydGluZ09wdGlvbiArXHJcbiAgICAgICc8L3NwYW4+PC9kaXY+PHVsIGNsYXNzPVwiZHJvcGRvd24tc2VsZWN0LXVsXCIgZGF0YS1yb2xlPVwiJyArXHJcbiAgICAgIGxpc3RJRCArXHJcbiAgICAgICdcIj4nICtcclxuICAgICAgdGhlT3B0aW9ucyArXHJcbiAgICAgIFwiPC91bD48L2Rpdj4gPCEtLSAuY3VzdG9tLXNlbGVjdC13cmFwcGVyIC0tPlwiOyAvL2FwcGVuZCBpdCBhZnRlciB0aGUgYWN0dWFsIHNlbGVjdFxyXG5cclxuICAgICQoY3VzdG9tU2VsZWN0KS5pbnNlcnRBZnRlcih0aGF0KTtcclxuICB9KTtcclxuICB2YXIgc2VsZWN0ZGQgPSAkKFwiLmRyb3Bkb3duLXNlbGVjdFwiKSxcclxuICAgIHNlbGVjdHVsID0gJChcIi5kcm9wZG93bi1zZWxlY3QtdWxcIiksXHJcbiAgICBzZWxlY3RsaSA9ICQoXCIuZHJvcGRvd24tc2VsZWN0LXVsIGxpXCIpOyAvL1RIRU4gbWFrZSB0aGVtIHdvcmtcclxuXHJcbiAgc2VsZWN0ZGQub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAkKHRoaXMpLnBhcmVudChcIi5kcm9wZG93bi1jb250YWluZXJcIikudG9nZ2xlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgfSk7IC8vSGlkZSBpdCBvbiBtb3VzZWxlYXZlXHJcblxyXG4gIHNlbGVjdHVsLm9uKFwibW91c2VsZWF2ZVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAkKHRoaXMpLnBhcmVudChcIi5kcm9wZG93bi1jb250YWluZXJcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgfSk7IC8vc2VsZWN0IHRoZSBvcHRpb25cclxuXHJcbiAgc2VsZWN0bGkub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgdGhhdCA9ICQodGhpcyk7IC8vZW5zdXJlIGNsaWNraW5nIGdyb3VwIGxhYmVscyBkb2VzIG5vdCBjYXVzZSBjaGFuZ2VcclxuXHJcbiAgICBpZiAoIXRoYXQuaGFzQ2xhc3MoXCJvcHRncm91cFwiKSkge1xyXG4gICAgICB2YXIgcGFyZW50VWwgPSB0aGF0LnBhcmVudChcInVsXCIpLFxyXG4gICAgICAgIHRoaXNkZCA9IHBhcmVudFVsLnNpYmxpbmdzKFwiLmRyb3Bkb3duLXNlbGVjdFwiKSxcclxuICAgICAgICBsaWh0bWwgPSB0aGF0Lmh0bWwoKSxcclxuICAgICAgICBsaXZhbHVlID0gdGhhdC5hdHRyKFwiZGF0YS12YWx1ZVwiKSxcclxuICAgICAgICBvcmlnaW5hbFNlbGVjdCA9IFwiI1wiICsgcGFyZW50VWwuYXR0cihcImRhdGEtcm9sZVwiKTsgLy9jbG9zZSB0aGUgZHJvcGRvd25cclxuXHJcbiAgICAgIHBhcmVudFVsLnBhcmVudChcIi5kcm9wZG93bi1jb250YWluZXJcIikudG9nZ2xlQ2xhc3MoXCJhY3RpdmVcIik7IC8vcmVtb3ZlIHNlbGVjdGVkIGNsYXNzIGZyb20gYWxsIGxpc3QgaXRlbXNcclxuXHJcbiAgICAgIHRoYXQuc2libGluZ3MoXCJsaVwiKS5yZW1vdmVDbGFzcyhcInNlbGVjdGVkXCIpOyAvL2FkZCAuc2VsZWN0ZWQgdG8gY2xpY2tlZCBsaVxyXG5cclxuICAgICAgdGhhdC5hZGRDbGFzcyhcInNlbGVjdGVkXCIpOyAvL3NldCB0aGUgdmFsdWUgb2YgdGhlIGhpZGRlbiBpbnB1dFxyXG5cclxuICAgICAgJChvcmlnaW5hbFNlbGVjdCkudmFsKGxpdmFsdWUpOyAvL2NoYW5nZSB0aGUgZHJvcGRvd24gdGV4dFxyXG5cclxuICAgICAgdGhpc2RkLmNoaWxkcmVuKFwic3BhblwiKS5odG1sKGxpaHRtbCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn0pKGpRdWVyeSk7XHJcblxyXG4kKFwiLnRhYi1jb250ZW50XCIpLmhpZGUoKTtcclxuJChcIi50YWItY29udGVudDpmaXJzdFwiKS5zaG93KCk7XHJcbi8qIGlmIGluIHRhYiBtb2RlICovXHJcblxyXG4kKFwidWwudGFicyBsaSwucHJvZHVjdC1jYXJkX19yZXZpZXctbGluayBhLC5zY2hlZHVsZS1idG4gYVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgJChcIi50YWItY29udGVudFwiKS5oaWRlKCk7XHJcbiAgdmFyIGFjdGl2ZVRhYiA9ICQodGhpcykuYXR0cihcInJlbFwiKTtcclxuICAkKFwiI1wiICsgYWN0aXZlVGFiKS5mYWRlSW4oKTtcclxuICAkKFwidWwudGFicyBsaVwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAkKHRoaXMpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICQoXCIudGFiX2RyYXdlcl9oZWFkaW5nXCIpLnJlbW92ZUNsYXNzKFwiZF9hY3RpdmVcIik7XHJcbiAgJChcIi50YWJfZHJhd2VyX2hlYWRpbmdbcmVsXj0nXCIgKyBhY3RpdmVUYWIgKyBcIiddXCIpLmFkZENsYXNzKFwiZF9hY3RpdmVcIik7XHJcbn0pO1xyXG4vKiBpZiBpbiBkcmF3ZXIgbW9kZSAqL1xyXG5cclxuJChcIi50YWJfZHJhd2VyX2hlYWRpbmdcIikuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gIHZhciBkX2FjdGl2ZVRhYiA9ICQodGhpcykuYXR0cihcInJlbFwiKSxcclxuICAgIGFjdGl2ZVRhYkJsb2NrID0gJChcIiNcIiArIGRfYWN0aXZlVGFiICsgXCI6aGlkZGVuXCIpLFxyXG4gICAgJHRoaXNBY3RpdmUgPSAkKHRoaXMpLm5vdChcIi5kX2FjdGl2ZVwiKTtcclxuICAkKFwiLnRhYi1jb250ZW50XCIpLmhpZGUoKTtcclxuICBhY3RpdmVUYWJCbG9jay5mYWRlSW4oKTtcclxuICAkKFwiLnRhYl9kcmF3ZXJfaGVhZGluZ1wiKS5yZW1vdmVDbGFzcyhcImRfYWN0aXZlXCIpO1xyXG4gICR0aGlzQWN0aXZlLmFkZENsYXNzKFwiZF9hY3RpdmVcIik7XHJcbiAgJChcInVsLnRhYnMgbGlcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgJChcInVsLnRhYnMgbGlbcmVsXj0nXCIgKyBkX2FjdGl2ZVRhYiArIFwiJ11cIikuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbn0pO1xyXG4vKiBFeHRyYSBjbGFzcyBcInRhYl9sYXN0XCJcclxuIHRvIGFkZCBib3JkZXIgdG8gcmlnaHQgc2lkZVxyXG4gb2YgbGFzdCB0YWIgKi9cclxuXHJcbiQoXCJ1bC50YWJzIGxpXCIpLmxhc3QoKS5hZGRDbGFzcyhcInRhYl9sYXN0XCIpO1xyXG5qUXVlcnkoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcclxuICBqUXVlcnkoXCIuc2NoZWR1bGUtYnRuIGFcIikuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgalF1ZXJ5KFwiLnNjaGVkdWxlLWxpbmtcIikudG9nZ2xlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgfSk7XHJcbn0pO1xyXG5qUXVlcnkoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcclxuICBqUXVlcnkoXCIucHJvZHVjdC1jYXJkX19yZXZpZXctbGluayBhXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgIGpRdWVyeShcIi5yZXZpZXctdGFiLWxpbmtcIikudG9nZ2xlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgfSk7XHJcbn0pOyAvL3NsaWRlc2hvd1xyXG5cclxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xyXG4gIHZhciBzeW5jMSA9ICQoXCIjc3luYzFcIik7XHJcbiAgdmFyIHN5bmMyID0gJChcIiNzeW5jMlwiKTtcclxuICB2YXIgc2xpZGVzUGVyUGFnZSA9IDM7IC8vZ2xvYmFseSBkZWZpbmUgbnVtYmVyIG9mIGVsZW1lbnRzIHBlciBwYWdlXHJcblxyXG4gIHZhciBzeW5jZWRTZWNvbmRhcnkgPSB0cnVlO1xyXG4gIHN5bmMxXHJcbiAgLm93bENhcm91c2VsKHtcclxuICAgIGl0ZW1zOiAxLFxyXG4gICAgc2xpZGVTcGVlZDogMjAwMCxcclxuICAgIG5hdjogdHJ1ZSxcclxuICAgIGF1dG9wbGF5OiBmYWxzZSxcclxuICAgIGRvdHM6IHRydWUsXHJcbiAgICBsb29wOiB0cnVlLFxyXG4gICAgcmVzcG9uc2l2ZVJlZnJlc2hSYXRlOiAyMDAsXHJcbiAgICBtYXJnaW46IDEwLFxyXG4gIH0pXHJcbiAgLm9uKFwiY2hhbmdlZC5vd2wuY2Fyb3VzZWxcIiwgc3luY1Bvc2l0aW9uKTtcclxuICBzeW5jMlxyXG4gIC5vbihcImluaXRpYWxpemVkLm93bC5jYXJvdXNlbFwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBzeW5jMi5maW5kKFwiLm93bC1pdGVtXCIpLmVxKDApLmFkZENsYXNzKFwiY3VycmVudFwiKTtcclxuICB9KVxyXG4gIC5vd2xDYXJvdXNlbCh7XHJcbiAgICBpdGVtczogc2xpZGVzUGVyUGFnZSxcclxuICAgIGRvdHM6IHRydWUsXHJcbiAgICBuYXY6IHRydWUsXHJcbiAgICBtYXJnaW46IDEwLFxyXG4gICAgc21hcnRTcGVlZDogMjAwLFxyXG4gICAgc2xpZGVTcGVlZDogNTAwLFxyXG4gICAgc2xpZGVCeTogc2xpZGVzUGVyUGFnZSxcclxuICAgIC8vYWx0ZXJuYXRpdmVseSB5b3UgY2FuIHNsaWRlIGJ5IDEsIHRoaXMgd2F5IHRoZSBhY3RpdmUgc2xpZGUgd2lsbCBzdGljayB0byB0aGUgZmlyc3QgaXRlbSBpbiB0aGUgc2Vjb25kIGNhcm91c2VsXHJcbiAgICByZXNwb25zaXZlUmVmcmVzaFJhdGU6IDEwMCxcclxuICB9KVxyXG4gIC5vbihcImNoYW5nZWQub3dsLmNhcm91c2VsXCIsIHN5bmNQb3NpdGlvbjIpO1xyXG5cclxuICBmdW5jdGlvbiBzeW5jUG9zaXRpb24oZWwpIHtcclxuICAgIC8vaWYgeW91IHNldCBsb29wIHRvIGZhbHNlLCB5b3UgaGF2ZSB0byByZXN0b3JlIHRoaXMgbmV4dCBsaW5lXHJcbiAgICAvL3ZhciBjdXJyZW50ID0gZWwuaXRlbS5pbmRleDtcclxuICAgIC8vaWYgeW91IGRpc2FibGUgbG9vcCB5b3UgaGF2ZSB0byBjb21tZW50IHRoaXMgYmxvY2tcclxuICAgIHZhciBjb3VudCA9IGVsLml0ZW0uY291bnQgLSAxO1xyXG4gICAgdmFyIGN1cnJlbnQgPSBNYXRoLnJvdW5kKGVsLml0ZW0uaW5kZXggLSBlbC5pdGVtLmNvdW50IC8gMiAtIDAuNSk7XHJcblxyXG4gICAgaWYgKGN1cnJlbnQgPCAwKSB7XHJcbiAgICAgIGN1cnJlbnQgPSBjb3VudDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoY3VycmVudCA+IGNvdW50KSB7XHJcbiAgICAgIGN1cnJlbnQgPSAwO1xyXG4gICAgfSAvL2VuZCBibG9ja1xyXG5cclxuICAgIHN5bmMyLmZpbmQoXCIub3dsLWl0ZW1cIikucmVtb3ZlQ2xhc3MoXCJjdXJyZW50XCIpLmVxKGN1cnJlbnQpLmFkZENsYXNzKFwiY3VycmVudFwiKTtcclxuICAgIHZhciBvbnNjcmVlbiA9IHN5bmMyLmZpbmQoXCIub3dsLWl0ZW0uYWN0aXZlXCIpLmxlbmd0aCAtIDE7XHJcbiAgICB2YXIgc3RhcnQgPSBzeW5jMi5maW5kKFwiLm93bC1pdGVtLmFjdGl2ZVwiKS5maXJzdCgpLmluZGV4KCk7XHJcbiAgICB2YXIgZW5kID0gc3luYzIuZmluZChcIi5vd2wtaXRlbS5hY3RpdmVcIikubGFzdCgpLmluZGV4KCk7XHJcblxyXG4gICAgaWYgKGN1cnJlbnQgPiBlbmQpIHtcclxuICAgICAgc3luYzIuZGF0YShcIm93bC5jYXJvdXNlbFwiKS50byhjdXJyZW50LCAxMDAsIHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChjdXJyZW50IDwgc3RhcnQpIHtcclxuICAgICAgc3luYzIuZGF0YShcIm93bC5jYXJvdXNlbFwiKS50byhjdXJyZW50IC0gb25zY3JlZW4sIDEwMCwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzeW5jUG9zaXRpb24yKGVsKSB7XHJcbiAgICBpZiAoc3luY2VkU2Vjb25kYXJ5KSB7XHJcbiAgICAgIHZhciBudW1iZXIgPSBlbC5pdGVtLmluZGV4O1xyXG4gICAgICBzeW5jMS5kYXRhKFwib3dsLmNhcm91c2VsXCIpLnRvKG51bWJlciwgMTAwLCB0cnVlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN5bmMyLm9uKFwiY2xpY2tcIiwgXCIub3dsLWl0ZW1cIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIHZhciBudW1iZXIgPSAkKHRoaXMpLmluZGV4KCk7XHJcbiAgICBzeW5jMS5kYXRhKFwib3dsLmNhcm91c2VsXCIpLnRvKG51bWJlciwgMzAwLCB0cnVlKTtcclxuICB9KTtcclxufSk7XHJcblxyXG4oKCkgPT4ge1xyXG4gIGNvbnN0IGJ1dHRvbkRlZmF1bHRWaWV3ID0gJChcIi5idXR0b24xXCIpO1xyXG4gIGNvbnN0IGJ1dHRvbldpZGVWaWV3ID0gJChcIi5idXR0b24yXCIpO1xyXG4gIGNvbnN0IGJ1dHRvbkxpbmVWaWV3ID0gJChcIi5idXR0b24zXCIpO1xyXG4gIGNvbnN0IGl0ZW1zID0gJChcIi5wcm9kdWN0LWl0ZW1cIik7XHJcblxyXG4gIGJ1dHRvbldpZGVWaWV3LmNsaWNrKChldmVudCkgPT4ge1xyXG4gICAgYnV0dG9uRGVmYXVsdFZpZXcucmVtb3ZlQ2xhc3MoXCJjdXJyZW50XCIpO1xyXG4gICAgYnV0dG9uTGluZVZpZXcucmVtb3ZlQ2xhc3MoXCJjdXJyZW50XCIpO1xyXG4gICAgJChldmVudC5jdXJyZW50VGFyZ2V0KS5hZGRDbGFzcyhcImN1cnJlbnRcIik7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImNhdGFsb2dHcmlkXCIsIFwid2lkZVwiKTtcclxuICAgIGl0ZW1zLnJlbW92ZUNsYXNzKFwicHJvZHVjdC1pdGVtLS1saW5lXCIpO1xyXG4gICAgaXRlbXMuYWRkQ2xhc3MoXCJwcm9kdWN0LWl0ZW0tLXdpZGVcIik7XHJcbiAgfSk7XHJcblxyXG4gIGJ1dHRvbkxpbmVWaWV3LmNsaWNrKChldmVudCkgPT4ge1xyXG4gICAgYnV0dG9uV2lkZVZpZXcucmVtb3ZlQ2xhc3MoXCJjdXJyZW50XCIpO1xyXG4gICAgYnV0dG9uRGVmYXVsdFZpZXcucmVtb3ZlQ2xhc3MoXCJjdXJyZW50XCIpO1xyXG4gICAgJChldmVudC5jdXJyZW50VGFyZ2V0KS5hZGRDbGFzcyhcImN1cnJlbnRcIik7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImNhdGFsb2dHcmlkXCIsIFwid2lkZVwiKTtcclxuICAgIGl0ZW1zLnJlbW92ZUNsYXNzKFwicHJvZHVjdC1pdGVtLS13aWRlXCIpO1xyXG4gICAgaXRlbXMuYWRkQ2xhc3MoXCJwcm9kdWN0LWl0ZW0tLWxpbmVcIik7XHJcbiAgfSk7XHJcblxyXG4gIGJ1dHRvbkRlZmF1bHRWaWV3LmNsaWNrKChldmVudCkgPT4ge1xyXG4gICAgYnV0dG9uV2lkZVZpZXcucmVtb3ZlQ2xhc3MoXCJjdXJyZW50XCIpO1xyXG4gICAgYnV0dG9uTGluZVZpZXcucmVtb3ZlQ2xhc3MoXCJjdXJyZW50XCIpO1xyXG4gICAgJChldmVudC5jdXJyZW50VGFyZ2V0KS5hZGRDbGFzcyhcImN1cnJlbnRcIik7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImNhdGFsb2dHcmlkXCIsIFwiZGVmYXVsdFwiKTtcclxuICAgIGl0ZW1zLnJlbW92ZUNsYXNzKFwicHJvZHVjdC1pdGVtLS13aWRlXCIpO1xyXG4gICAgaXRlbXMucmVtb3ZlQ2xhc3MoXCJwcm9kdWN0LWl0ZW0tLWxpbmVcIik7XHJcbiAgfSk7XHJcbn0pKCk7XHJcblxyXG52YXIga2V5cHJlc3NTbGlkZXJzID0gJChcIi5yYW5nZS1zbGlkZXJcIik7XHJcbiQoa2V5cHJlc3NTbGlkZXJzKS5lYWNoKGZ1bmN0aW9uIChpbmRleCwga2V5cHJlc3NTbGlkZXIpIHtcclxuICB2YXIgZmllbGRfbmFtZSA9ICQoa2V5cHJlc3NTbGlkZXIpLmRhdGEoXCJuYW1lXCIpO1xyXG4gIHZhciBpbnB1dDAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImlkX1wiICsgZmllbGRfbmFtZSArIFwiXzBcIik7XHJcbiAgdmFyIGlucHV0MSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaWRfXCIgKyBmaWVsZF9uYW1lICsgXCJfMVwiKTtcclxuICB2YXIgaW5wdXRzID0gW2lucHV0MCwgaW5wdXQxXTtcclxuXHJcbiAgaWYgKGlucHV0MCAmJiBpbnB1dDEpIHtcclxuICAgIHZhciBzdGFydFZhbCA9IHBhcnNlSW50KGlucHV0MC5kYXRhc2V0LmN1cnJlbnRWYWx1ZSksXHJcbiAgICAgIGVuZFZhbCA9IHBhcnNlSW50KGlucHV0MS5kYXRhc2V0LmN1cnJlbnRWYWx1ZSk7XHJcbiAgICB2YXIgbWluVmFsID0gcGFyc2VJbnQoaW5wdXQwLmRhdGFzZXQubWluVmFsdWUpLFxyXG4gICAgICBtYXhWYWwgPSBwYXJzZUludChpbnB1dDEuZGF0YXNldC5tYXhWYWx1ZSk7XHJcbiAgfVxyXG5cclxuICB2YXIgcG9zdGZpeCA9IFwiXCI7XHJcblxyXG4gIGlmIChmaWVsZF9uYW1lID09IFwicHJpY2VfcmFuZ2VcIikge1xyXG4gICAgcG9zdGZpeCA9IFwiIOKCvVwiO1xyXG4gIH1cclxuXHJcbiAgaWYgKHR5cGVvZiBub1VpU2xpZGVyICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICBub1VpU2xpZGVyLmNyZWF0ZShrZXlwcmVzc1NsaWRlciwge1xyXG4gICAgICBzdGFydDogW3N0YXJ0VmFsLCBlbmRWYWxdLFxyXG4gICAgICBjb25uZWN0OiB0cnVlLFxyXG4gICAgICByYW5nZToge1xyXG4gICAgICAgIG1pbjogbWluVmFsLFxyXG4gICAgICAgIG1heDogbWF4VmFsLFxyXG4gICAgICB9LFxyXG4gICAgICBmb3JtYXQ6IHdOdW1iKHtcclxuICAgICAgICBkZWNpbWFsczogMCxcclxuICAgICAgICB0aG91c2FuZDogXCIgXCIsXHJcbiAgICAgICAgcG9zdGZpeDogcG9zdGZpeCxcclxuICAgICAgfSksXHJcbiAgICAgIHN0ZXA6IDEsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGlmIChrZXlwcmVzc1NsaWRlciAhPT0gbnVsbCAmJiBrZXlwcmVzc1NsaWRlci5ub1VpU2xpZGVyKSB7XHJcbiAgICBrZXlwcmVzc1NsaWRlci5ub1VpU2xpZGVyLm9uKFwidXBkYXRlXCIsIGZ1bmN0aW9uICh2YWx1ZXMsIGhhbmRsZSkge1xyXG4gICAgICBpbnB1dHNbaGFuZGxlXS52YWx1ZSA9IHZhbHVlc1toYW5kbGVdO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzZXRTbGlkZXJIYW5kbGUoaSwgdmFsdWUpIHtcclxuICAgIHZhciByID0gW251bGwsIG51bGxdO1xyXG4gICAgcltpXSA9IHZhbHVlO1xyXG4gICAga2V5cHJlc3NTbGlkZXIubm9VaVNsaWRlci5zZXQocik7XHJcbiAgfSAvLyBMaXN0ZW4gdG8ga2V5ZG93biBldmVudHMgb24gdGhlIGlucHV0IGZpZWxkLlxyXG5cclxuICBpbnB1dHMuZm9yRWFjaChmdW5jdGlvbiAoaW5wdXQsIGhhbmRsZSkge1xyXG4gICAgaWYgKGlucHV0ID09PSBudWxsKSByZXR1cm47XHJcbiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgc2V0U2xpZGVySGFuZGxlKGhhbmRsZSwgdGhpcy52YWx1ZSk7XHJcbiAgICB9KTtcclxuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgIHZhciB2YWx1ZXMgPSBrZXlwcmVzc1NsaWRlci5ub1VpU2xpZGVyLmdldCgpO1xyXG4gICAgICB2YXIgdmFsdWUgPSBOdW1iZXIodmFsdWVzW2hhbmRsZV0pOyAvLyBbW2hhbmRsZTBfZG93biwgaGFuZGxlMF91cF0sIFtoYW5kbGUxX2Rvd24sIGhhbmRsZTFfdXBdXVxyXG5cclxuICAgICAgdmFyIHN0ZXBzID0ga2V5cHJlc3NTbGlkZXIubm9VaVNsaWRlci5zdGVwcygpOyAvLyBbZG93biwgdXBdXHJcblxyXG4gICAgICB2YXIgc3RlcCA9IHN0ZXBzW2hhbmRsZV07XHJcbiAgICAgIHZhciBwb3NpdGlvbjsgLy8gMTMgaXMgZW50ZXIsXHJcbiAgICAgIC8vIDM4IGlzIGtleSB1cCxcclxuICAgICAgLy8gNDAgaXMga2V5IGRvd24uXHJcblxyXG4gICAgICBzd2l0Y2ggKGUud2hpY2gpIHtcclxuICAgICAgICBjYXNlIDEzOlxyXG4gICAgICAgICAgc2V0U2xpZGVySGFuZGxlKGhhbmRsZSwgdGhpcy52YWx1ZSk7XHJcbiAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSAzODpcclxuICAgICAgICAgIC8vIEdldCBzdGVwIHRvIGdvIGluY3JlYXNlIHNsaWRlciB2YWx1ZSAodXApXHJcbiAgICAgICAgICBwb3NpdGlvbiA9IHN0ZXBbMV07IC8vIGZhbHNlID0gbm8gc3RlcCBpcyBzZXRcclxuXHJcbiAgICAgICAgICBpZiAocG9zaXRpb24gPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uID0gMTtcclxuICAgICAgICAgIH0gLy8gbnVsbCA9IGVkZ2Ugb2Ygc2xpZGVyXHJcblxyXG4gICAgICAgICAgaWYgKHBvc2l0aW9uICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHNldFNsaWRlckhhbmRsZShoYW5kbGUsIHZhbHVlICsgcG9zaXRpb24pO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlIDQwOlxyXG4gICAgICAgICAgcG9zaXRpb24gPSBzdGVwWzBdO1xyXG5cclxuICAgICAgICAgIGlmIChwb3NpdGlvbiA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgcG9zaXRpb24gPSAxO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmIChwb3NpdGlvbiAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBzZXRTbGlkZXJIYW5kbGUoaGFuZGxlLCB2YWx1ZSAtIHBvc2l0aW9uKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gZ2FsbGVyeSgpIHtcclxuICBpZiAoJC5mYW5jeWJveCkge1xyXG4gICAgJChcIi5vd2wtaXRlbSBbZGF0YS1mYW5jeWJveF1cIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHZhciAkc2VsZWN0b3IgPSAkKHRoaXMpXHJcbiAgICAgIC5wYXJlbnRzKFwiLm93bC1jYXJvdXNlbFwiKVxyXG4gICAgICAuZmluZChcIi5vd2wtaXRlbTpub3QoLmNsb25lZCkgW2RhdGEtZmFuY3lib3hdXCIpO1xyXG4gICAgICAkLmZhbmN5Ym94Lm9wZW4oXHJcbiAgICAgICAgJHNlbGVjdG9yLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHNlbGVjdG9yOiAkc2VsZWN0b3IsXHJcbiAgICAgICAgICBiYWNrRm9jdXM6IGZhbHNlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgJHNlbGVjdG9yLmluZGV4KHRoaXMpXHJcbiAgICAgICk7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gaGVhZGVyKCkge1xyXG4gIHZhciAkaGVhZGVyID0gJChcImhlYWRlclwiKSxcclxuICAgIGhlaWdodCxcclxuICAgIHNjcm9sbDtcclxuICBsZXQgaXNUaHJvdHRsZWQgPSBmYWxzZTtcclxuICBjaGVjaygpO1xyXG4gICQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKGlzVGhyb3R0bGVkKSByZXR1cm47XHJcbiAgICBpc1Rocm90dGxlZCA9IHRydWU7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgY2hlY2soKTtcclxuICAgICAgaXNUaHJvdHRsZWQgPSBmYWxzZTtcclxuICAgIH0sIDEwMCk7XHJcbiAgfSk7XHJcblxyXG4gIGZ1bmN0aW9uIGNoZWNrKCkge1xyXG4gICAgaWYgKCEkaGVhZGVyLmhhc0NsYXNzKFwiaGVhZGVyX2xhbmRpbmdcIikpIHtcclxuICAgICAgc2Nyb2xsID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpO1xyXG4gICAgICBoZWlnaHQgPSAkaGVhZGVyLmhlaWdodCgpO1xyXG5cclxuICAgICAgaWYgKHNjcm9sbCA+IGhlaWdodCkge1xyXG4gICAgICAgICRoZWFkZXIuYWRkQ2xhc3MoXCJmaXhlZFwiKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAkaGVhZGVyLnJlbW92ZUNsYXNzKFwiZml4ZWRcIik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn0gLy9nYWxsZXJ5XHJcblxyXG5mdW5jdGlvbiBob21lQmFubmVyKCkge1xyXG4gIHZhciAkc2xpZGVyID0gJChcIi5ob21lLWJhbm5lciAub3dsLWNhcm91c2VsXCIpLFxyXG4gICAgYXJyb3dQcmV2ID1cclxuICAgICAgJzxzdmcgY2xhc3M9XCJpY29uXCIgdmlld0JveD1cIjAgMCAxMC41IDE4LjFcIj48cGF0aCBzdHJva2U9XCJub25lXCIgZD1cIk05LDBsMS40LDEuNEwyLjgsOWw3LjYsNy42TDksMTguMUwwLDlDMCw5LDkuMSwwLDksMHpcIj48L3BhdGg+PC9zdmc+JyxcclxuICAgIGFycm93TmV4dCA9XHJcbiAgICAgICc8c3ZnIGNsYXNzPVwiaWNvblwiIHZpZXdCb3g9XCIwIDAgMTAuNSAxOC4xXCI+PHBhdGggc3Ryb2tlPVwibm9uZVwiIGQ9XCJNMS40LDE4LjFMMCwxNi43bDcuNi03LjZMMCwxLjVMMS40LDBsOSw5LjFDMTAuNCw5LjEsMS4zLDE4LjEsMS40LDE4LjF6XCI+PC9wYXRoPjwvc3ZnPic7XHJcblxyXG4gIGlmICgkc2xpZGVyLmxlbmd0aCkge1xyXG4gICAgJHNsaWRlci5vd2xDYXJvdXNlbCh7XHJcbiAgICAgIGxvb3A6IHRydWUsXHJcbiAgICAgIG5hdjogdHJ1ZSxcclxuICAgICAgc21hcnRTcGVlZDogNTAwLFxyXG4gICAgICBkb3RzOiB0cnVlLFxyXG4gICAgICBpdGVtczogMSxcclxuICAgICAgbGF6eUxvYWQ6IHRydWUsXHJcbiAgICAgIGF1dG9wbGF5OiB0cnVlLFxyXG4gICAgICBhdXRvcGxheVRpbWVvdXQ6ICgrJHNsaWRlci5kYXRhKFwiYXV0b3BsYXktdGltZW91dFwiKSB8fCA1KSAqIDEwMDAsXHJcbiAgICAgIG5hdlRleHQ6IFthcnJvd1ByZXYsIGFycm93TmV4dF0sXHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbiQoXCIjbWVudVwiKS5tbWVudSh7XHJcbiAgZXh0ZW5zaW9uczogW1wicG9zaXRpb24tZnJvbnRcIl0sXHJcbn0pO1xyXG5cclxuY29uc3QgbWVudUFwaSA9ICQoXCIjbWVudVwiKS5kYXRhKFwibW1lbnVcIik7XHJcblxyXG4kKFwiW2RhdGEtb3Blbi1tZW51XVwiKS5jbGljaygoKSA9PiB7XHJcbiAgbWVudUFwaS5vcGVuKCk7XHJcbn0pO1xyXG5cclxuJChcIltkYXRhLWNsb3NlLW1lbnVdXCIpLmNsaWNrKCgpID0+IHtcclxuICBtZW51QXBpLmNsb3NlKCk7XHJcbn0pO1xyXG5cclxuY29uc29sZS5sb2coMTIzMzQ1MzQ2KTtcclxuXHJcblxyXG4oZnVuY3Rpb24gKCQpIHtcclxuICB2YXIgcGx1Z2luTmFtZSA9IFwiY3NjcmxiXCI7XHJcblxyXG4gIGZ1bmN0aW9uIFBsdWdpbihlbGVtZW50LCBvcHRpb25zKSB7XHJcbiAgICB2YXIgZWwgPSBlbGVtZW50O1xyXG4gICAgdmFyICRlbCA9ICQoZWxlbWVudCk7XHJcbiAgICB2YXIgJHNjcm9sbENvbnRlbnRFbDtcclxuICAgIHZhciAkY29udGVudEVsID0gJGVsLmZpbmQoXCIuY3NjcmxiLWNvbnRlbnRcIik7XHJcbiAgICB2YXIgJHNjcm9sbGJhckVsO1xyXG4gICAgdmFyICRkcmFnSGFuZGxlRWw7XHJcbiAgICB2YXIgZHJhZ09mZnNldDtcclxuICAgIHZhciBmbGFzaFRpbWVvdXQ7XHJcbiAgICB2YXIgcGFnZUp1bXBNdWx0cCA9IDcgLyA4O1xyXG4gICAgdmFyIHNjcm9sbERpcmVjdGlvbiA9IFwidmVydFwiO1xyXG4gICAgdmFyIHNjcm9sbE9mZnNldEF0dHIgPSBcInNjcm9sbFRvcFwiO1xyXG4gICAgdmFyIHNpemVBdHRyID0gXCJoZWlnaHRcIjtcclxuICAgIHZhciBvZmZzZXRBdHRyID0gXCJ0b3BcIjtcclxuICAgIG9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgJC5mbltwbHVnaW5OYW1lXS5kZWZhdWx0cywgb3B0aW9ucyk7XHJcblxyXG4gICAgd2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgJGNvbnRlbnRFbC5mb2N1cygpO1xyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBpbml0KCkge1xyXG4gICAgICBpZiAoJGVsLmhhc0NsYXNzKFwiaG9yaXpvbnRhbFwiKSkge1xyXG4gICAgICAgIHNjcm9sbERpcmVjdGlvbiA9IFwiaG9yaXpcIjtcclxuICAgICAgICBzY3JvbGxPZmZzZXRBdHRyID0gXCJzY3JvbGxMZWZ0XCI7XHJcbiAgICAgICAgc2l6ZUF0dHIgPSBcIndpZHRoXCI7XHJcbiAgICAgICAgb2Zmc2V0QXR0ciA9IFwibGVmdFwiO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAkZWwucHJlcGVuZCgnPGRpdiBjbGFzcz1cImNzY3JsYi1zY3JvbGxiYXJcIj48ZGl2IGNsYXNzPVwiZHJhZy1oYW5kbGVcIj48L2Rpdj48L2Rpdj4nKTtcclxuICAgICAgJHNjcm9sbGJhckVsID0gJGVsLmZpbmQoXCIuY3NjcmxiLXNjcm9sbGJhclwiKTtcclxuICAgICAgJGRyYWdIYW5kbGVFbCA9ICRlbC5maW5kKFwiLmRyYWctaGFuZGxlXCIpO1xyXG5cclxuICAgICAgaWYgKG9wdGlvbnMud3JhcENvbnRlbnQpIHtcclxuICAgICAgICAkY29udGVudEVsLndyYXAoJzxkaXYgY2xhc3M9XCJjc2NybGItc2Nyb2xsLWNvbnRlbnRcIiAvPicpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAkc2Nyb2xsQ29udGVudEVsID0gJGVsLmZpbmQoXCIuY3NjcmxiLXNjcm9sbC1jb250ZW50XCIpO1xyXG4gICAgICByZXNpemVTY3JvbGxDb250ZW50KCk7XHJcblxyXG4gICAgICBpZiAob3B0aW9ucy5hdXRvSGlkZSkge1xyXG4gICAgICAgICRlbC5vbihcIm1vdXNlZW50ZXJcIiwgZmxhc2hTY3JvbGxiYXIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAkZHJhZ0hhbmRsZUVsLm9uKFwibW91c2Vkb3duXCIsIHN0YXJ0RHJhZyk7XHJcbiAgICAgICRzY3JvbGxiYXJFbC5vbihcIm1vdXNlZG93blwiLCBqdW1wU2Nyb2xsKTtcclxuICAgICAgJHNjcm9sbENvbnRlbnRFbC5vbihcInNjcm9sbFwiLCBvblNjcm9sbGVkKTtcclxuICAgICAgcmVzaXplU2Nyb2xsYmFyKCk7XHJcbiAgICAgICQod2luZG93KS5vbihcInJlc2l6ZVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmVjYWxjdWxhdGUoKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAoIW9wdGlvbnMuYXV0b0hpZGUpIHtcclxuICAgICAgICBzaG93U2Nyb2xsYmFyKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzdGFydERyYWcoZSkge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHZhciBldmVudE9mZnNldCA9IGUucGFnZVk7XHJcblxyXG4gICAgICBpZiAoc2Nyb2xsRGlyZWN0aW9uID09PSBcImhvcml6XCIpIHtcclxuICAgICAgICBldmVudE9mZnNldCA9IGUucGFnZVg7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGRyYWdPZmZzZXQgPSBldmVudE9mZnNldCAtICRkcmFnSGFuZGxlRWwub2Zmc2V0KClbb2Zmc2V0QXR0cl07XHJcbiAgICAgICQoZG9jdW1lbnQpLm9uKFwibW91c2Vtb3ZlXCIsIGRyYWcpO1xyXG4gICAgICAkKGRvY3VtZW50KS5vbihcIm1vdXNldXBcIiwgZW5kRHJhZyk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZHJhZyhlKSB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdmFyIGV2ZW50T2Zmc2V0ID0gZS5wYWdlWTtcclxuXHJcbiAgICAgIGlmIChzY3JvbGxEaXJlY3Rpb24gPT09IFwiaG9yaXpcIikge1xyXG4gICAgICAgIGV2ZW50T2Zmc2V0ID0gZS5wYWdlWDtcclxuICAgICAgfVxyXG5cclxuICAgICAgdmFyIGRyYWdQb3MgPSBldmVudE9mZnNldCAtICRzY3JvbGxiYXJFbC5vZmZzZXQoKVtvZmZzZXRBdHRyXSAtIGRyYWdPZmZzZXQ7XHJcbiAgICAgIHZhciBkcmFnUGVyYyA9IGRyYWdQb3MgLyAkc2Nyb2xsYmFyRWxbc2l6ZUF0dHJdKCk7XHJcbiAgICAgIHZhciBzY3JvbGxQb3MgPSBkcmFnUGVyYyAqICRjb250ZW50RWxbc2l6ZUF0dHJdKCk7XHJcbiAgICAgICRzY3JvbGxDb250ZW50RWxbc2Nyb2xsT2Zmc2V0QXR0cl0oc2Nyb2xsUG9zKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBlbmREcmFnKCkge1xyXG4gICAgICAkKGRvY3VtZW50KS5vZmYoXCJtb3VzZW1vdmVcIiwgZHJhZyk7XHJcbiAgICAgICQoZG9jdW1lbnQpLm9mZihcIm1vdXNldXBcIiwgZW5kRHJhZyk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24ganVtcFNjcm9sbChlKSB7XHJcbiAgICAgIGlmIChlLnRhcmdldCA9PT0gJGRyYWdIYW5kbGVFbFswXSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgdmFyIGp1bXBBbXQgPSBwYWdlSnVtcE11bHRwICogJHNjcm9sbENvbnRlbnRFbFtzaXplQXR0cl0oKTtcclxuICAgICAgdmFyIGV2ZW50T2Zmc2V0ID1cclxuICAgICAgICBzY3JvbGxEaXJlY3Rpb24gPT09IFwidmVydFwiID8gZS5vcmlnaW5hbEV2ZW50LmxheWVyWSA6IGUub3JpZ2luYWxFdmVudC5sYXllclg7XHJcbiAgICAgIHZhciBkcmFnSGFuZGxlT2Zmc2V0ID0gJGRyYWdIYW5kbGVFbC5wb3NpdGlvbigpW29mZnNldEF0dHJdO1xyXG4gICAgICB2YXIgc2Nyb2xsUG9zID1cclxuICAgICAgICBldmVudE9mZnNldCA8IGRyYWdIYW5kbGVPZmZzZXRcclxuICAgICAgICAgID8gJHNjcm9sbENvbnRlbnRFbFtzY3JvbGxPZmZzZXRBdHRyXSgpIC0ganVtcEFtdFxyXG4gICAgICAgICAgOiAkc2Nyb2xsQ29udGVudEVsW3Njcm9sbE9mZnNldEF0dHJdKCkgKyBqdW1wQW10O1xyXG4gICAgICAkc2Nyb2xsQ29udGVudEVsW3Njcm9sbE9mZnNldEF0dHJdKHNjcm9sbFBvcyk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gb25TY3JvbGxlZChlKSB7XHJcbiAgICAgIGZsYXNoU2Nyb2xsYmFyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcmVzaXplU2Nyb2xsYmFyKCkge1xyXG4gICAgICB2YXIgY29udGVudFNpemUgPSAkY29udGVudEVsW3NpemVBdHRyXSgpO1xyXG4gICAgICB2YXIgc2Nyb2xsT2Zmc2V0ID0gJHNjcm9sbENvbnRlbnRFbFtzY3JvbGxPZmZzZXRBdHRyXSgpOyAvLyBzY3JvbGxUb3AoKSDjgYsgc2Nyb2xsTGVmdCgpXHJcblxyXG4gICAgICB2YXIgc2Nyb2xsYmFyU2l6ZSA9ICRzY3JvbGxiYXJFbFtzaXplQXR0cl0oKTtcclxuICAgICAgdmFyIHNjcm9sbGJhclJhdGlvID0gc2Nyb2xsYmFyU2l6ZSAvIGNvbnRlbnRTaXplO1xyXG4gICAgICB2YXIgaGFuZGxlT2Zmc2V0ID0gTWF0aC5yb3VuZChzY3JvbGxiYXJSYXRpbyAqIHNjcm9sbE9mZnNldCk7XHJcbiAgICAgIC8qICsgMjsgKi9cclxuXHJcbiAgICAgIHZhciBoYW5kbGVTaXplID0gTWF0aC5mbG9vcihzY3JvbGxiYXJSYXRpbyAqIChzY3JvbGxiYXJTaXplICsgMikpO1xyXG4gICAgICAvKiAgLSAyKSkgLSAyOyAqL1xyXG5cclxuICAgICAgaWYgKHNjcm9sbGJhclNpemUgPCBjb250ZW50U2l6ZSkge1xyXG4gICAgICAgIGlmIChzY3JvbGxEaXJlY3Rpb24gPT09IFwidmVydFwiKSB7XHJcbiAgICAgICAgICAkZHJhZ0hhbmRsZUVsLmNzcyh7XHJcbiAgICAgICAgICAgIHRvcDogaGFuZGxlT2Zmc2V0LFxyXG4gICAgICAgICAgICBoZWlnaHQ6IGhhbmRsZVNpemUsXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgJGRyYWdIYW5kbGVFbC5jc3Moe1xyXG4gICAgICAgICAgICBsZWZ0OiBoYW5kbGVPZmZzZXQsXHJcbiAgICAgICAgICAgIHdpZHRoOiBoYW5kbGVTaXplLFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkc2Nyb2xsYmFyRWwuc2hvdygpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICRzY3JvbGxiYXJFbC5oaWRlKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBmbGFzaFNjcm9sbGJhcigpIHtcclxuICAgICAgcmVzaXplU2Nyb2xsYmFyKCk7XHJcbiAgICAgIHNob3dTY3JvbGxiYXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzaG93U2Nyb2xsYmFyKCkge1xyXG4gICAgICAkZHJhZ0hhbmRsZUVsLmFkZENsYXNzKFwidmlzaWJsZVwiKTtcclxuXHJcbiAgICAgIGlmICghb3B0aW9ucy5hdXRvSGlkZSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHR5cGVvZiBmbGFzaFRpbWVvdXQgPT09IFwibnVtYmVyXCIpIHtcclxuICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KGZsYXNoVGltZW91dCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZsYXNoVGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBoaWRlU2Nyb2xsYmFyKCk7XHJcbiAgICAgIH0sIDEwMDApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGhpZGVTY3JvbGxiYXIoKSB7XHJcbiAgICAgICRkcmFnSGFuZGxlRWwucmVtb3ZlQ2xhc3MoXCJ2aXNpYmxlXCIpO1xyXG5cclxuICAgICAgaWYgKHR5cGVvZiBmbGFzaFRpbWVvdXQgPT09IFwibnVtYmVyXCIpIHtcclxuICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KGZsYXNoVGltZW91dCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiByZXNpemVTY3JvbGxDb250ZW50KCkge1xyXG4gICAgICBpZiAoc2Nyb2xsRGlyZWN0aW9uID09PSBcInZlcnRcIikge1xyXG4gICAgICAgICRzY3JvbGxDb250ZW50RWwud2lkdGgoJGVsLndpZHRoKCkgKyBzY3JvbGxiYXJXaWR0aCgpKTtcclxuICAgICAgICAkc2Nyb2xsQ29udGVudEVsLmhlaWdodCgkZWwuaGVpZ2h0KCkpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICRzY3JvbGxDb250ZW50RWwud2lkdGgoJGVsLndpZHRoKCkpO1xyXG4gICAgICAgICRzY3JvbGxDb250ZW50RWwuaGVpZ2h0KCRlbC5oZWlnaHQoKSArIHNjcm9sbGJhcldpZHRoKCkpO1xyXG4gICAgICAgICRjb250ZW50RWwuaGVpZ2h0KCRlbC5oZWlnaHQoKSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzY3JvbGxiYXJXaWR0aCgpIHtcclxuICAgICAgdmFyIHRlbXBFbCA9ICQoXHJcbiAgICAgICAgJzxkaXYgY2xhc3M9XCJzY3JvbGxiYXItd2lkdGgtdGVzdGVyXCIgc3R5bGU9XCJ3aWR0aDo1MHB4O2hlaWdodDo1MHB4O292ZXJmbG93LXk6c2Nyb2xsO3Bvc2l0aW9uOmFic29sdXRlO3RvcDotMjAwcHg7bGVmdDotMjAwcHg7XCI+PGRpdiBzdHlsZT1cImhlaWdodDoxMDBweDtcIj48L2Rpdj4nXHJcbiAgICAgICk7XHJcbiAgICAgICQoXCJib2R5XCIpLmFwcGVuZCh0ZW1wRWwpO1xyXG4gICAgICB2YXIgd2lkdGggPSAkKHRlbXBFbCkuaW5uZXJXaWR0aCgpO1xyXG4gICAgICB2YXIgd2lkdGhNaW51c1Njcm9sbGJhcnMgPSAkKFwiZGl2XCIsIHRlbXBFbCkuaW5uZXJXaWR0aCgpO1xyXG4gICAgICB0ZW1wRWwucmVtb3ZlKCk7XHJcblxyXG4gICAgICBpZiAoXHJcbiAgICAgICAgd2lkdGggPT09IHdpZHRoTWludXNTY3JvbGxiYXJzICYmXHJcbiAgICAgICAgbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJmaXJlZm94XCIpID4gLTFcclxuICAgICAgKSB7XHJcbiAgICAgICAgcmV0dXJuIDE3O1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gd2lkdGggLSB3aWR0aE1pbnVzU2Nyb2xsYmFycztcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiByZWNhbGN1bGF0ZSgpIHtcclxuICAgICAgcmVzaXplU2Nyb2xsQ29udGVudCgpO1xyXG4gICAgICByZXNpemVTY3JvbGxiYXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBvcHRpb24oa2V5LCB2YWwpIHtcclxuICAgICAgaWYgKHZhbCkge1xyXG4gICAgICAgIG9wdGlvbnNba2V5XSA9IHZhbDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gb3B0aW9uc1trZXldO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZGVzdHJveSgpIHtcclxuICAgICAgJGNvbnRlbnRFbC5pbnNlcnRCZWZvcmUoJHNjcm9sbGJhckVsKTtcclxuICAgICAgJHNjcm9sbGJhckVsLnJlbW92ZSgpO1xyXG4gICAgICAkc2Nyb2xsQ29udGVudEVsLnJlbW92ZSgpO1xyXG4gICAgICAkY29udGVudEVsLmNzcyh7XHJcbiAgICAgICAgaGVpZ2h0OiAkZWwuaGVpZ2h0KCkgKyBcInB4XCIsXHJcbiAgICAgICAgXCJvdmVyZmxvdy15XCI6IFwic2Nyb2xsXCIsXHJcbiAgICAgIH0pO1xyXG4gICAgICBob29rKFwib25EZXN0cm95XCIpO1xyXG4gICAgICAkZWwucmVtb3ZlRGF0YShcInBsdWdpbl9cIiArIHBsdWdpbk5hbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGhvb2soaG9va05hbWUpIHtcclxuICAgICAgaWYgKG9wdGlvbnNbaG9va05hbWVdICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBvcHRpb25zW2hvb2tOYW1lXS5jYWxsKGVsKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGluaXQoKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG9wdGlvbjogb3B0aW9uLFxyXG4gICAgICBkZXN0cm95OiBkZXN0cm95LFxyXG4gICAgICByZWNhbGN1bGF0ZTogcmVjYWxjdWxhdGUsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgJC5mbltwbHVnaW5OYW1lXSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICB2YXIgbWV0aG9kTmFtZSA9IGFyZ3VtZW50c1swXTtcclxuICAgICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xyXG4gICAgICB2YXIgcmV0dXJuVmFsO1xyXG4gICAgICB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICQuZGF0YSh0aGlzLCBcInBsdWdpbl9cIiArIHBsdWdpbk5hbWUpICYmXHJcbiAgICAgICAgICB0eXBlb2YgJC5kYXRhKHRoaXMsIFwicGx1Z2luX1wiICsgcGx1Z2luTmFtZSlbbWV0aG9kTmFtZV0gPT09IFwiZnVuY3Rpb25cIlxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgcmV0dXJuVmFsID0gJC5kYXRhKHRoaXMsIFwicGx1Z2luX1wiICsgcGx1Z2luTmFtZSlbbWV0aG9kTmFtZV0uYXBwbHkodGhpcywgYXJncyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIiBcIiArIG1ldGhvZE5hbWUgKyBcIiBcIiArIHBsdWdpbk5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAocmV0dXJuVmFsICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICByZXR1cm4gcmV0dXJuVmFsO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKF90eXBlb2Yob3B0aW9ucykgPT09IFwib2JqZWN0XCIgfHwgIW9wdGlvbnMpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCEkLmRhdGEodGhpcywgXCJwbHVnaW5fXCIgKyBwbHVnaW5OYW1lKSkge1xyXG4gICAgICAgICAgJC5kYXRhKHRoaXMsIFwicGx1Z2luX1wiICsgcGx1Z2luTmFtZSwgbmV3IFBsdWdpbih0aGlzLCBvcHRpb25zKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAkLmZuW3BsdWdpbk5hbWVdLmRlZmF1bHRzID0ge1xyXG4gICAgb25Jbml0OiBmdW5jdGlvbiBvbkluaXQoKSB7fSxcclxuICAgIG9uRGVzdHJveTogZnVuY3Rpb24gb25EZXN0cm95KCkge30sXHJcbiAgICB3cmFwQ29udGVudDogdHJ1ZSxcclxuICAgIGF1dG9IaWRlOiBmYWxzZSxcclxuICB9O1xyXG59KShqUXVlcnkpO1xyXG5cclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgJChcIi5jc2NybGItc2Nyb2xsYWJsZVwiKS5jc2NybGIoKTtcclxufSk7XHJcblxyXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xyXG4gICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtcclxuICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtcclxuICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtcclxuICAgIGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XHJcbiAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7XHJcbiAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO1xyXG4gIHJldHVybiBDb25zdHJ1Y3RvcjtcclxufVxyXG5cclxuZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobywgYWxsb3dBcnJheUxpa2UpIHtcclxuICB2YXIgaXQ7XHJcbiAgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwidW5kZWZpbmVkXCIgfHwgb1tTeW1ib2wuaXRlcmF0b3JdID09IG51bGwpIHtcclxuICAgIGlmIChcclxuICAgICAgQXJyYXkuaXNBcnJheShvKSB8fFxyXG4gICAgICAoaXQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobykpIHx8XHJcbiAgICAgIChhbGxvd0FycmF5TGlrZSAmJiBvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIilcclxuICAgICkge1xyXG4gICAgICBpZiAoaXQpIG8gPSBpdDtcclxuICAgICAgdmFyIGkgPSAwO1xyXG4gICAgICB2YXIgRiA9IGZ1bmN0aW9uIEYoKSB7fTtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzOiBGLFxyXG4gICAgICAgIG46IGZ1bmN0aW9uIG4oKSB7XHJcbiAgICAgICAgICBpZiAoaSA+PSBvLmxlbmd0aCkgcmV0dXJuIHsgZG9uZTogdHJ1ZSB9O1xyXG4gICAgICAgICAgcmV0dXJuIHsgZG9uZTogZmFsc2UsIHZhbHVlOiBvW2krK10gfTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGU6IGZ1bmN0aW9uIGUoX2UpIHtcclxuICAgICAgICAgIHRocm93IF9lO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZjogRixcclxuICAgICAgfTtcclxuICAgIH1cclxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXHJcbiAgICAgIFwiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIlxyXG4gICAgKTtcclxuICB9XHJcbiAgdmFyIG5vcm1hbENvbXBsZXRpb24gPSB0cnVlLFxyXG4gICAgZGlkRXJyID0gZmFsc2UsXHJcbiAgICBlcnI7XHJcbiAgcmV0dXJuIHtcclxuICAgIHM6IGZ1bmN0aW9uIHMoKSB7XHJcbiAgICAgIGl0ID0gb1tTeW1ib2wuaXRlcmF0b3JdKCk7XHJcbiAgICB9LFxyXG4gICAgbjogZnVuY3Rpb24gbigpIHtcclxuICAgICAgdmFyIHN0ZXAgPSBpdC5uZXh0KCk7XHJcbiAgICAgIG5vcm1hbENvbXBsZXRpb24gPSBzdGVwLmRvbmU7XHJcbiAgICAgIHJldHVybiBzdGVwO1xyXG4gICAgfSxcclxuICAgIGU6IGZ1bmN0aW9uIGUoX2UyKSB7XHJcbiAgICAgIGRpZEVyciA9IHRydWU7XHJcbiAgICAgIGVyciA9IF9lMjtcclxuICAgIH0sXHJcbiAgICBmOiBmdW5jdGlvbiBmKCkge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGlmICghbm9ybWFsQ29tcGxldGlvbiAmJiBpdC5yZXR1cm4gIT0gbnVsbCkgaXQucmV0dXJuKCk7XHJcbiAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgaWYgKGRpZEVycikgdGhyb3cgZXJyO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gIH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHtcclxuICBpZiAoIW8pIHJldHVybjtcclxuICBpZiAodHlwZW9mIG8gPT09IFwic3RyaW5nXCIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pO1xyXG4gIHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTtcclxuICBpZiAobiA9PT0gXCJPYmplY3RcIiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lO1xyXG4gIGlmIChuID09PSBcIk1hcFwiIHx8IG4gPT09IFwiU2V0XCIpIHJldHVybiBBcnJheS5mcm9tKG8pO1xyXG4gIGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKVxyXG4gICAgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7XHJcbiAgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7XHJcbiAgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICBhcnIyW2ldID0gYXJyW2ldO1xyXG4gIH1cclxuICByZXR1cm4gYXJyMjtcclxufVxyXG5cclxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xyXG4gIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XHJcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xyXG4gIH1cclxufVxyXG5cclxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xyXG4gIGhvbWVCYW5uZXIoKTtcclxuICBoZWFkZXIoKTtcclxuICBnYWxsZXJ5KCk7XHJcbiAgbGFuZGluZ19zbGlkZXJzKCk7XHJcbiAgdXAoKTtcclxuICBjaGF0QmxvY2soKTtcclxuICB0b2dnbGUoKTsgLy9pbnRlcmFjdGlvblxyXG5cclxuICBuZXcg0KF1c3RvbUludGVyYWN0aW9uKHtcclxuICAgIHRhcmdldHM6IFwiYSwgYnV0dG9uLCBbZGF0YS1jdXN0b20taW50ZXJhY3Rpb25dLCAuaW1hZ2Utem9vbVwiLFxyXG4gIH0pOyAvL3NsaWRlciBjb25zdHJ1Y3RvclxyXG5cclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNsaWRlci1jb25zdHJ1Y3RvclwiKS5mb3JFYWNoKGZ1bmN0aW9uICgkdGhpcykge1xyXG4gICAgbmV3IFNsaWRlckNvbnN0cnVjdG9yKCR0aGlzKS5pbml0KCk7XHJcbiAgfSk7XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gbGFuZGluZ19zbGlkZXJzKCkge1xyXG4gIHZhciAkc2xpZGVycyA9ICQoXCIubGFuZGluZy1zbGlkZXIgLm93bC1jYXJvdXNlbFwiKTtcclxuXHJcbiAgaWYgKCRzbGlkZXJzLmxlbmd0aCkge1xyXG4gICAgJHNsaWRlcnMuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XHJcbiAgICAgIHZhciBjb3VudDEsIGNvdW50MiwgY291bnQzLCBjb3VudDQ7XHJcblxyXG4gICAgICBpZiAoJHRoaXMuaXMoXCIubGFuZGluZy1zbGlkZXJfMSAub3dsLWNhcm91c2VsXCIpKSB7XHJcbiAgICAgICAgY291bnQxID0gMjtcclxuICAgICAgICBjb3VudDIgPSAyO1xyXG4gICAgICAgIGNvdW50MyA9IDM7XHJcbiAgICAgICAgY291bnQ0ID0gNDtcclxuICAgICAgfSBlbHNlIGlmICgkdGhpcy5pcyhcIi5sYW5kaW5nLXNsaWRlcl8yIC5vd2wtY2Fyb3VzZWxcIikpIHtcclxuICAgICAgICBjb3VudDEgPSAxO1xyXG4gICAgICAgIGNvdW50MiA9IDI7XHJcbiAgICAgICAgY291bnQzID0gMztcclxuICAgICAgICBjb3VudDQgPSA0O1xyXG4gICAgICB9XHJcblxyXG4gICAgICAkdGhpcy5vd2xDYXJvdXNlbCh7XHJcbiAgICAgICAgbG9vcDogdHJ1ZSxcclxuICAgICAgICBtYXJnaW46IDIwLFxyXG4gICAgICAgIHJlc3BvbnNpdmU6IHtcclxuICAgICAgICAgIDA6IHtcclxuICAgICAgICAgICAgaXRlbXM6IGNvdW50MSxcclxuICAgICAgICAgICAgbWFyZ2luOiAxNixcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICA1NzY6IHtcclxuICAgICAgICAgICAgaXRlbXM6IGNvdW50MixcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICA3Njg6IHtcclxuICAgICAgICAgICAgaXRlbXM6IGNvdW50MyxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICA5OTI6IHtcclxuICAgICAgICAgICAgaXRlbXM6IGNvdW50NCxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRvZ2dsZSgpIHtcclxuICB2YXIgJHNlY3Rpb24gPSAkKFwiLnRvZ2dsZS1zZWN0aW9uXCIpLFxyXG4gICAgc3BlZWQgPSAyNTA7XHJcbiAgJHNlY3Rpb24uZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgJHRoaXMgPSAkKHRoaXMpLFxyXG4gICAgICAkdG9nZ2xlID0gJHRoaXMuY2hpbGRyZW4oXCIudG9nZ2xlLXNlY3Rpb25fX3RyaWdnZXJcIiksXHJcbiAgICAgICRjb250ZW50ID0gJHRoaXMuY2hpbGRyZW4oXCIudG9nZ2xlLXNlY3Rpb25fX2NvbnRlbnRcIiksXHJcbiAgICAgICRjbG9zZSA9ICRjb250ZW50LmZpbmQoXCIudG9nZ2xlLXNlY3Rpb25fX2Nsb3NlXCIpLFxyXG4gICAgICBzdGF0ZSA9ICR0aGlzLmhhc0NsYXNzKFwiYWN0aXZlXCIpID8gdHJ1ZSA6IGZhbHNlLFxyXG4gICAgICBpbml0aWFsaXplZDtcclxuICAgICR0b2dnbGUub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHN0YXRlID0gIXN0YXRlID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICBjaGVjaygpO1xyXG4gICAgfSk7XHJcbiAgICAkY2xvc2Uub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHN0YXRlID0gZmFsc2U7XHJcbiAgICAgIGNoZWNrKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoJHRoaXMuaXMoXCJbZGF0YS1ob3Zlcl1cIikpIHtcclxuICAgICAgdmFyIHRpbWVvdXQ7XHJcbiAgICAgICR0b2dnbGUuYWRkKCRjb250ZW50KS5vbihcIm1vdXNlZW50ZXJcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKCFpc1RvdWNoKSB7XHJcbiAgICAgICAgICBpZiAodGltZW91dCkgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xyXG4gICAgICAgICAgc3RhdGUgPSB0cnVlO1xyXG4gICAgICAgICAgY2hlY2soKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICAkdG9nZ2xlLmFkZCgkY29udGVudCkub24oXCJtb3VzZWxlYXZlXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGlmICghaXNUb3VjaCkge1xyXG4gICAgICAgICAgdmFyIGRlbGF5O1xyXG5cclxuICAgICAgICAgIGlmICgkKHRoaXMpLmlzKCR0b2dnbGUpKSB7XHJcbiAgICAgICAgICAgIGRlbGF5ID0gNTAwO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZGVsYXkgPSAxMDA7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzdGF0ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBjaGVjaygpO1xyXG4gICAgICAgICAgfSwgZGVsYXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCR0aGlzLmlzKFwiW2RhdGEtb3V0LWhpZGVdXCIpIHx8ICR0aGlzLmlzKFwiW2RhdGEtaG92ZXJdXCIpKSB7XHJcbiAgICAgICQoZG9jdW1lbnQpLm9uKFwiY2xpY2sgdG91Y2hzdGFydFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICB2YXIgJHRhcmdldCA9ICQoZXZlbnQudGFyZ2V0KTtcclxuXHJcbiAgICAgICAgaWYgKCEkdGFyZ2V0LmNsb3Nlc3QoJGNvbnRlbnQpLmxlbmd0aCAmJiAhJHRhcmdldC5jbG9zZXN0KCR0b2dnbGUpLmxlbmd0aCAmJiBzdGF0ZSkge1xyXG4gICAgICAgICAgc3RhdGUgPSBmYWxzZTtcclxuICAgICAgICAgIGNoZWNrKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjaGVjaygpIHtcclxuICAgICAgaWYgKHN0YXRlKSB7XHJcbiAgICAgICAgJHRoaXMuYWRkKCRjb250ZW50KS5hZGQoJHRvZ2dsZSkuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcblxyXG4gICAgICAgIGlmICgkdGhpcy5pcyhcIltkYXRhLXNsaWRlXVwiKSkge1xyXG4gICAgICAgICAgJGNvbnRlbnQuc2xpZGVEb3duKHNwZWVkKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJHRoaXMuYWRkKCR0b2dnbGUpLmFkZCgkY29udGVudCkucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcblxyXG4gICAgICAgIGlmICgkdGhpcy5pcyhcIltkYXRhLXNsaWRlXVwiKSkge1xyXG4gICAgICAgICAgaWYgKGluaXRpYWxpemVkKSB7XHJcbiAgICAgICAgICAgICRjb250ZW50LnN0b3AoKS5zbGlkZVVwKHNwZWVkKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICRjb250ZW50LmhpZGUoMCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2hlY2soKTtcclxuICAgIGluaXRpYWxpemVkID0gdHJ1ZTtcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gdXAoKSB7XHJcbiAgdmFyICRidG4gPSAkKFwiLmpzLXVwXCIpO1xyXG5cclxuICBmdW5jdGlvbiBjaGVjaygpIHtcclxuICAgIHZhciBzY3JvbGwgPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCk7XHJcblxyXG4gICAgaWYgKHNjcm9sbCA+IDUwKSB7XHJcbiAgICAgICRidG4uYWRkQ2xhc3MoXCJ2aXNpYmxlXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgJGJ0bi5yZW1vdmVDbGFzcyhcInZpc2libGVcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBsZXQgaXNUaHJvdHRsZWQgPSBmYWxzZTtcclxuICAkKHdpbmRvdykub24oXCJzY3JvbGxcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKGlzVGhyb3R0bGVkKSByZXR1cm47XHJcbiAgICBpc1Rocm90dGxlZCA9IHRydWU7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgY2hlY2soKTtcclxuICAgICAgaXNUaHJvdHRsZWQgPSBmYWxzZTtcclxuICAgIH0sIDEwMCk7XHJcbiAgfSk7XHJcbiAgY2hlY2soKTtcclxuICAkYnRuLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgJChcImh0bWwsIGJvZHlcIikuYW5pbWF0ZShcclxuICAgICAge1xyXG4gICAgICAgIHNjcm9sbFRvcDogMCxcclxuICAgICAgfSxcclxuICAgICAgNTAwXHJcbiAgICApO1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjaGF0QmxvY2soKSB7XHJcbiAgdmFyICRibG9jayA9ICQoXCIuY2hhdC1ibG9ja1wiKSxcclxuICAgICRvcGVuID0gJChcIltkYXRhLWNoYXQtb3Blbl1cIiksXHJcbiAgICAkY2xvc2UgPSAkKFwiW2RhdGEtY2hhdC1jbG9zZV1cIik7XHJcbiAgJG9wZW4ub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAkYmxvY2suYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgfSk7XHJcbiAgJGNsb3NlLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgJGJsb2NrLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG4gIH0pO1xyXG59XHJcblxyXG52YXIg0KF1c3RvbUludGVyYWN0aW9uID0gZnVuY3Rpb24g0KF1c3RvbUludGVyYWN0aW9uKCkge1xyXG4gIHZhciBfdGhpczIgPSB0aGlzO1xyXG5cclxuICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XHJcblxyXG4gIF9jbGFzc0NhbGxDaGVjayh0aGlzLCDQoXVzdG9tSW50ZXJhY3Rpb24pO1xyXG5cclxuICB0aGlzLnRhcmdldHMgPSBvcHRpb25zLnRhcmdldHM7XHJcbiAgdGhpcy50b3VjaGVuZERlbGF5ID0gb3B0aW9ucy50b3VjaGVuZERlbGF5IHx8IDEwMDsgLy9tc1xyXG5cclxuICB2YXIgZXZlbnRzID0gZnVuY3Rpb24gZXZlbnRzKGV2ZW50KSB7XHJcbiAgICB2YXIgJHRhcmdldHMgPSBbXTtcclxuICAgICR0YXJnZXRzWzBdID0gZXZlbnQudGFyZ2V0ICE9PSBkb2N1bWVudCA/IGV2ZW50LnRhcmdldC5jbG9zZXN0KF90aGlzMi50YXJnZXRzKSA6IG51bGw7XHJcbiAgICB2YXIgJGVsZW1lbnQgPSAkdGFyZ2V0c1swXSxcclxuICAgICAgaSA9IDA7XHJcblxyXG4gICAgd2hpbGUgKCR0YXJnZXRzWzBdKSB7XHJcbiAgICAgICRlbGVtZW50ID0gJGVsZW1lbnQucGFyZW50Tm9kZTtcclxuXHJcbiAgICAgIGlmICgkZWxlbWVudCAhPT0gZG9jdW1lbnQpIHtcclxuICAgICAgICBpZiAoJGVsZW1lbnQubWF0Y2hlcygkdGFyZ2V0cy52YWx1ZSkpIHtcclxuICAgICAgICAgIGkrKztcclxuICAgICAgICAgICR0YXJnZXRzW2ldID0gJGVsZW1lbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9IC8vdG91Y2hzdGFydFxyXG5cclxuICAgIGlmIChldmVudC50eXBlID09IFwidG91Y2hzdGFydFwiKSB7XHJcbiAgICAgIF90aGlzMi50b3VjaGVkID0gdHJ1ZTtcclxuICAgICAgaWYgKF90aGlzMi50aW1lb3V0KSBjbGVhclRpbWVvdXQoX3RoaXMyLnRpbWVvdXQpO1xyXG5cclxuICAgICAgaWYgKCR0YXJnZXRzWzBdKSB7XHJcbiAgICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKCR0YXJnZXRzKSxcclxuICAgICAgICAgIF9zdGVwO1xyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTsgKSB7XHJcbiAgICAgICAgICAgIHZhciAkdGFyZ2V0ID0gX3N0ZXAudmFsdWU7XHJcbiAgICAgICAgICAgICR0YXJnZXQuc2V0QXR0cmlidXRlKFwiZGF0YS10b3VjaFwiLCBcIlwiKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgIF9pdGVyYXRvci5lKGVycik7XHJcbiAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgIF9pdGVyYXRvci5mKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAvL3RvdWNoZW5kXHJcbiAgICBlbHNlIGlmIChldmVudC50eXBlID09IFwidG91Y2hlbmRcIiB8fCAoZXZlbnQudHlwZSA9PSBcImNvbnRleHRtZW51XCIgJiYgX3RoaXMyLnRvdWNoZWQpKSB7XHJcbiAgICAgIF90aGlzMi50aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgX3RoaXMyLnRvdWNoZWQgPSBmYWxzZTtcclxuICAgICAgfSwgX3RoaXMyLnRvdWNoZW5kRGVsYXkpO1xyXG5cclxuICAgICAgaWYgKCR0YXJnZXRzWzBdKSB7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICB2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKCR0YXJnZXRzKSxcclxuICAgICAgICAgICAgX3N0ZXAyO1xyXG5cclxuICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7ICkge1xyXG4gICAgICAgICAgICAgIHZhciBfJHRhcmdldCA9IF9zdGVwMi52YWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgXyR0YXJnZXQucmVtb3ZlQXR0cmlidXRlKFwiZGF0YS10b3VjaFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgIF9pdGVyYXRvcjIuZShlcnIpO1xyXG4gICAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgICAgX2l0ZXJhdG9yMi5mKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSwgX3RoaXMyLnRvdWNoZW5kRGVsYXkpO1xyXG4gICAgICB9XHJcbiAgICB9IC8vbW91c2VlbnRlclxyXG5cclxuICAgIGlmIChcclxuICAgICAgZXZlbnQudHlwZSA9PSBcIm1vdXNlZW50ZXJcIiAmJlxyXG4gICAgICAhX3RoaXMyLnRvdWNoZWQgJiZcclxuICAgICAgJHRhcmdldHNbMF0gJiZcclxuICAgICAgJHRhcmdldHNbMF0gPT0gZXZlbnQudGFyZ2V0XHJcbiAgICApIHtcclxuICAgICAgJHRhcmdldHNbMF0uc2V0QXR0cmlidXRlKFwiZGF0YS1ob3ZlclwiLCBcIlwiKTtcclxuICAgIH1cclxuICAgIC8vbW91c2VsZWF2ZVxyXG4gICAgZWxzZSBpZiAoXHJcbiAgICAgIGV2ZW50LnR5cGUgPT0gXCJtb3VzZWxlYXZlXCIgJiZcclxuICAgICAgIV90aGlzMi50b3VjaGVkICYmXHJcbiAgICAgICR0YXJnZXRzWzBdICYmXHJcbiAgICAgICR0YXJnZXRzWzBdID09IGV2ZW50LnRhcmdldFxyXG4gICAgKSB7XHJcbiAgICAgICR0YXJnZXRzWzBdLnJlbW92ZUF0dHJpYnV0ZShcImRhdGEtY2xpY2tcIik7XHJcbiAgICAgICR0YXJnZXRzWzBdLnJlbW92ZUF0dHJpYnV0ZShcImRhdGEtaG92ZXJcIik7XHJcbiAgICB9IC8vbW91c2Vkb3duXHJcblxyXG4gICAgaWYgKGV2ZW50LnR5cGUgPT0gXCJtb3VzZWRvd25cIiAmJiAhX3RoaXMyLnRvdWNoZWQgJiYgJHRhcmdldHNbMF0pIHtcclxuICAgICAgJHRhcmdldHNbMF0uc2V0QXR0cmlidXRlKFwiZGF0YS1jbGlja1wiLCBcIlwiKTtcclxuICAgIH1cclxuICAgIC8vbW91c2V1cFxyXG4gICAgZWxzZSBpZiAoZXZlbnQudHlwZSA9PSBcIm1vdXNldXBcIiAmJiAhX3RoaXMyLnRvdWNoZWQgJiYgJHRhcmdldHNbMF0pIHtcclxuICAgICAgJHRhcmdldHNbMF0ucmVtb3ZlQXR0cmlidXRlKFwiZGF0YS1jbGlja1wiKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCBldmVudHMpO1xyXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCBldmVudHMpO1xyXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWVudGVyXCIsIGV2ZW50cywgdHJ1ZSk7XHJcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIiwgZXZlbnRzLCB0cnVlKTtcclxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGV2ZW50cyk7XHJcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgZXZlbnRzKTtcclxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY29udGV4dG1lbnVcIiwgZXZlbnRzKTtcclxufTtcclxuIiwidmFyIGJyZWFrcG9pbnRzID0ge1xyXG4gIHhzOiAwLFxyXG4gIHNtOiA1NzYsXHJcbiAgbWQ6IDc2OCxcclxuICBsZzogMTAyNCxcclxuICB4bDogMTI4MCxcclxufTtcclxuIiwiZnVuY3Rpb24gdGhyb3R0bGUoZGVsYXksIGNhbGxiYWNrLCBvcHRpb25zKSB7XHJcbiAgdmFyIF9yZWYgPSBvcHRpb25zIHx8IHt9LFxyXG4gICAgX3JlZiRub1RyYWlsaW5nID0gX3JlZi5ub1RyYWlsaW5nLFxyXG4gICAgbm9UcmFpbGluZyA9IF9yZWYkbm9UcmFpbGluZyA9PT0gdm9pZCAwID8gZmFsc2UgOiBfcmVmJG5vVHJhaWxpbmcsXHJcbiAgICBfcmVmJG5vTGVhZGluZyA9IF9yZWYubm9MZWFkaW5nLFxyXG4gICAgbm9MZWFkaW5nID0gX3JlZiRub0xlYWRpbmcgPT09IHZvaWQgMCA/IGZhbHNlIDogX3JlZiRub0xlYWRpbmcsXHJcbiAgICBfcmVmJGRlYm91bmNlTW9kZSA9IF9yZWYuZGVib3VuY2VNb2RlLFxyXG4gICAgZGVib3VuY2VNb2RlID0gX3JlZiRkZWJvdW5jZU1vZGUgPT09IHZvaWQgMCA/IHVuZGVmaW5lZCA6IF9yZWYkZGVib3VuY2VNb2RlO1xyXG5cclxuICB2YXIgdGltZW91dElEO1xyXG4gIHZhciBjYW5jZWxsZWQgPSBmYWxzZTtcclxuXHJcbiAgdmFyIGxhc3RFeGVjID0gMDtcclxuXHJcbiAgZnVuY3Rpb24gY2xlYXJFeGlzdGluZ1RpbWVvdXQoKSB7XHJcbiAgICBpZiAodGltZW91dElEKSB7XHJcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SUQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY2FuY2VsKG9wdGlvbnMpIHtcclxuICAgIHZhciBfcmVmMiA9IG9wdGlvbnMgfHwge30sXHJcbiAgICAgIF9yZWYyJHVwY29taW5nT25seSA9IF9yZWYyLnVwY29taW5nT25seSxcclxuICAgICAgdXBjb21pbmdPbmx5ID0gX3JlZjIkdXBjb21pbmdPbmx5ID09PSB2b2lkIDAgPyBmYWxzZSA6IF9yZWYyJHVwY29taW5nT25seTtcclxuXHJcbiAgICBjbGVhckV4aXN0aW5nVGltZW91dCgpO1xyXG4gICAgY2FuY2VsbGVkID0gIXVwY29taW5nT25seTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHdyYXBwZXIoKSB7XHJcbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJndW1lbnRzXyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcclxuICAgICAgYXJndW1lbnRzX1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgZWxhcHNlZCA9IERhdGUubm93KCkgLSBsYXN0RXhlYztcclxuXHJcbiAgICBpZiAoY2FuY2VsbGVkKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBleGVjKCkge1xyXG4gICAgICBsYXN0RXhlYyA9IERhdGUubm93KCk7XHJcbiAgICAgIGNhbGxiYWNrLmFwcGx5KHNlbGYsIGFyZ3VtZW50c18pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNsZWFyKCkge1xyXG4gICAgICB0aW1lb3V0SUQgPSB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFub0xlYWRpbmcgJiYgZGVib3VuY2VNb2RlICYmICF0aW1lb3V0SUQpIHtcclxuICAgICAgZXhlYygpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyRXhpc3RpbmdUaW1lb3V0KCk7XHJcblxyXG4gICAgaWYgKGRlYm91bmNlTW9kZSA9PT0gdW5kZWZpbmVkICYmIGVsYXBzZWQgPiBkZWxheSkge1xyXG4gICAgICBpZiAobm9MZWFkaW5nKSB7XHJcbiAgICAgICAgbGFzdEV4ZWMgPSBEYXRlLm5vdygpO1xyXG5cclxuICAgICAgICBpZiAoIW5vVHJhaWxpbmcpIHtcclxuICAgICAgICAgIHRpbWVvdXRJRCA9IHNldFRpbWVvdXQoZGVib3VuY2VNb2RlID8gY2xlYXIgOiBleGVjLCBkZWxheSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGV4ZWMoKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChub1RyYWlsaW5nICE9PSB0cnVlKSB7XHJcbiAgICAgIHRpbWVvdXRJRCA9IHNldFRpbWVvdXQoXHJcbiAgICAgICAgZGVib3VuY2VNb2RlID8gY2xlYXIgOiBleGVjLFxyXG4gICAgICAgIGRlYm91bmNlTW9kZSA9PT0gdW5kZWZpbmVkID8gZGVsYXkgLSBlbGFwc2VkIDogZGVsYXlcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHdyYXBwZXIuY2FuY2VsID0gY2FuY2VsO1xyXG5cclxuICByZXR1cm4gd3JhcHBlcjtcclxufVxyXG5cclxuZnVuY3Rpb24gZGVib3VuY2UoZGVsYXksIGNhbGxiYWNrLCBvcHRpb25zKSB7XHJcbiAgdmFyIF9yZWYgPSBvcHRpb25zIHx8IHt9LFxyXG4gICAgX3JlZiRhdEJlZ2luID0gX3JlZi5hdEJlZ2luLFxyXG4gICAgYXRCZWdpbiA9IF9yZWYkYXRCZWdpbiA9PT0gdm9pZCAwID8gZmFsc2UgOiBfcmVmJGF0QmVnaW47XHJcblxyXG4gIHJldHVybiB0aHJvdHRsZShkZWxheSwgY2FsbGJhY2ssIHtcclxuICAgIGRlYm91bmNlTW9kZTogYXRCZWdpbiAhPT0gZmFsc2UsXHJcbiAgfSk7XHJcbn1cclxuXHJcbmNvbnN0IHRyb3RsZUZ1bmMgPSBkZWJvdW5jZSgxMDAwLCAoKSA9PiB7XHJcbiAgY29uc29sZS5sb2coMTIzKTtcclxufSk7XHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCAoKSA9PiB7XHJcbiAgdHJvdGxlRnVuYygpO1xyXG4gIGNvbnNvbGUubG9nKDUyMyk7XHJcbn0pO1xyXG4iLCJmdW5jdGlvbiBfdHlwZW9mKG9iaikge1xyXG4gIFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjtcclxuICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIpIHtcclxuICAgIF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikge1xyXG4gICAgICByZXR1cm4gdHlwZW9mIG9iajtcclxuICAgIH07XHJcbiAgfSBlbHNlIHtcclxuICAgIF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikge1xyXG4gICAgICByZXR1cm4gb2JqICYmXHJcbiAgICAgICAgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmXHJcbiAgICAgICAgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiZcclxuICAgICAgICBvYmogIT09IFN5bWJvbC5wcm90b3R5cGVcclxuICAgICAgICA/IFwic3ltYm9sXCJcclxuICAgICAgICA6IHR5cGVvZiBvYmo7XHJcbiAgICB9O1xyXG4gIH1cclxuICByZXR1cm4gX3R5cGVvZihvYmopO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzbGlkZXJEZWJvdW5jZShmdW5jLCBpbnRlcnZhbCwgY29udGV4dCkge1xyXG4gIHZhciB0aW1lb3V0ID0gZmFsc2U7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBfYXJndW1lbnRzID0gYXJndW1lbnRzLFxyXG4gICAgICBfdGhpcyA9IHRoaXM7XHJcblxyXG4gICAgaWYgKHRpbWVvdXQpIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcclxuICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgZnVuYy5hcHBseShjb250ZXh0IHx8IF90aGlzLCBfYXJndW1lbnRzKTtcclxuICAgIH0sIGludGVydmFsKTtcclxuICB9O1xyXG59XHJcblxyXG5jb25zdCBTbGlkZXJDb25zdHJ1Y3RvciA9IC8qI19fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHtcclxuICBmdW5jdGlvbiBTbGlkZXJDb25zdHJ1Y3RvcihlbGVtZW50KSB7XHJcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2xpZGVyQ29uc3RydWN0b3IpO1xyXG5cclxuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfY3JlYXRlQ2xhc3MoU2xpZGVyQ29uc3RydWN0b3IsIFtcclxuICAgIHtcclxuICAgICAga2V5OiBcImluaXRcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQoKSB7XHJcbiAgICAgICAgbGV0IF90aGlzMyA9IHRoaXM7XHJcblxyXG4gICAgICAgIHRoaXMucGFyYW1zID0ge307XHJcbiAgICAgICAgdGhpcy5wYXJhbXMuYXV0b3BsYXkgPSB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1hdXRvcGxheS10aW1lb3V0XCIpICE9PSBudWxsO1xyXG4gICAgICAgIHRoaXMucGFyYW1zLmF1dG9wbGF5VGltZW91dCA9ICt0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1hdXRvcGxheS10aW1lb3V0XCIpIHx8IDUwMDA7XHJcbiAgICAgICAgdGhpcy5wYXJhbXMuYXJyb3dzID0gdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtbm8tYXJyb3dzXCIpID09PSBudWxsID8gdHJ1ZSA6IGZhbHNlO1xyXG5cclxuICAgICAgICBjb25zdCBtZWRpYVF1ZXJ5ID0gd2luZG93Lm1hdGNoTWVkaWEoXCIobWluLXdpZHRoOiA1NzUuOThweClcIik7XHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIG1lZGlhIHF1ZXJ5IGlzIHRydWVcclxuICAgICAgICBpZiAobWVkaWFRdWVyeS5tYXRjaGVzKSB7XHJcbiAgICAgICAgICB0aGlzLnBhcmFtcy5kb3RzID0gdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtbm8tZG90c1wiKSA9PT0gbnVsbCA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5wYXJhbXMuZG90cyA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnBhcmFtcy5hZGFwdGl2ZUhlaWdodCA9IHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWFkYXB0aXZlLWhlaWdodFwiKSAhPT0gbnVsbDtcclxuICAgICAgICB0aGlzLnBhcmFtcy5jZW50ZXJNb2RlID0gdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtY2VudGVyXCIpID09PSBudWxsID8gZmFsc2UgOiB0cnVlO1xyXG4gICAgICAgIHRoaXMucGFyYW1zLmNvdW50ID0ge307XHJcbiAgICAgICAgdGhpcy5wYXJhbXMuY291bnQueHMgPSArdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtc2xpZGVzXCIpIHx8IDE7XHJcbiAgICAgICAgdGhpcy5wYXJhbXMuY291bnQuc20gPSArdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtc20tc2xpZGVzXCIpIHx8IHRoaXMucGFyYW1zLmNvdW50LnhzO1xyXG4gICAgICAgIHRoaXMucGFyYW1zLmNvdW50Lm1kID0gK3RoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW1kLXNsaWRlc1wiKSB8fCB0aGlzLnBhcmFtcy5jb3VudC5zbTtcclxuICAgICAgICB0aGlzLnBhcmFtcy5jb3VudC5sZyA9ICt0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1sZy1zbGlkZXNcIikgfHwgdGhpcy5wYXJhbXMuY291bnQubWQ7XHJcbiAgICAgICAgdGhpcy5wYXJhbXMuY291bnQueGwgPSArdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEteGwtc2xpZGVzXCIpIHx8IHRoaXMucGFyYW1zLmNvdW50LmxnO1xyXG4gICAgICAgIHRoaXMucGFyYW1zLnJvd3MgPSB7fTtcclxuICAgICAgICAodGhpcy5wYXJhbXMucm93cy54cyA9ICt0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1yb3dzXCIpIHx8IDEpLFxyXG4gICAgICAgICAgKHRoaXMucGFyYW1zLnJvd3Muc20gPSArdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtc20tcm93c1wiKSB8fCB0aGlzLnBhcmFtcy5yb3dzLnhzKSxcclxuICAgICAgICAgICh0aGlzLnBhcmFtcy5yb3dzLm1kID0gK3RoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW1kLXJvd3NcIikgfHwgdGhpcy5wYXJhbXMucm93cy5zbSksXHJcbiAgICAgICAgICAodGhpcy5wYXJhbXMucm93cy5sZyA9ICt0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1sZy1yb3dzXCIpIHx8IHRoaXMucGFyYW1zLnJvd3MubWQpLFxyXG4gICAgICAgICAgKHRoaXMucGFyYW1zLnJvd3MueGwgPSArdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEteGwtcm93c1wiKSB8fCB0aGlzLnBhcmFtcy5yb3dzLmxnKTtcclxuICAgICAgICB0aGlzLnBhcmFtcy5zdGF0ZSA9IHt9O1xyXG4gICAgICAgIE9iamVjdC5rZXlzKGJyZWFrcG9pbnRzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXksIGluZGV4KSB7XHJcbiAgICAgICAgICBsZXQgYnJlYWtwb2ludCA9IGluZGV4ICE9PSAwID8gXCItXCIgKyBrZXkgKyBcIi1cIiA6IFwiLVwiO1xyXG5cclxuICAgICAgICAgIGxldCBhdHRyID0gX3RoaXMzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YVwiLmNvbmNhdChicmVha3BvaW50LCBcIm1vdW50ZWRcIikpO1xyXG5cclxuICAgICAgICAgIGlmIChhdHRyID09PSBudWxsICYmIGluZGV4ICE9PSAwKSB7XHJcbiAgICAgICAgICAgIGxldCBwcmV2S2V5ID0gT2JqZWN0LmtleXMoYnJlYWtwb2ludHMpW2luZGV4IC0gMV07XHJcbiAgICAgICAgICAgIF90aGlzMy5wYXJhbXMuc3RhdGVba2V5XSA9IF90aGlzMy5wYXJhbXMuc3RhdGVbcHJldktleV07XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKGF0dHIgPT09IFwidHJ1ZVwiIHx8IChpbmRleCA9PT0gMCAmJiBhdHRyICE9PSBcImZhbHNlXCIpKSB7XHJcbiAgICAgICAgICAgIF90aGlzMy5wYXJhbXMuc3RhdGVba2V5XSA9IHRydWU7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBfdGhpczMucGFyYW1zLnN0YXRlW2tleV0gPSBmYWxzZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnNsaWRlcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuY29udGFpbnNNb2JpbGVIaWRkZW5TbGlkZXMgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQuY2hpbGROb2Rlcy5mb3JFYWNoKGZ1bmN0aW9uIChzbGlkZSkge1xyXG4gICAgICAgICAgaWYgKCFzbGlkZS50YWdOYW1lKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgaWYgKHNsaWRlLmdldEF0dHJpYnV0ZShcImRhdGEtc2xpZGUtbW9iaWxlLWhpZGRlblwiKSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBfdGhpczMuY29udGFpbnNNb2JpbGVIaWRkZW5TbGlkZXMgPSB0cnVlO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIF90aGlzMy5zbGlkZXMucHVzaChzbGlkZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVJY29ucygpO1xyXG4gICAgICAgIHRoaXMuY2hlY2tTbGlkZXJTdGF0ZSgpO1xyXG4gICAgICAgIHRoaXMuY2hlY2tTbGlkZXJTdGF0ZURlYm91bmNlZCA9IHNsaWRlckRlYm91bmNlKHRoaXMuY2hlY2tTbGlkZXJTdGF0ZSwgNTAwLCB0aGlzKTtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCB0aGlzLmNoZWNrU2xpZGVyU3RhdGVEZWJvdW5jZWQpO1xyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAga2V5OiBcImNyZWF0ZUljb25zXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVJY29ucygpIHtcclxuICAgICAgICBsZXQgbGVmdEljb24gPVxyXG4gICAgICAgICAgJ1xcbiAgICAgIDxzdmcgdmlld0JveD1cIjAgMCAxMSAxOVwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+XFxuICAgICAgICA8cGF0aCBkPVwiTTEuNCAxOC4xTDAgMTYuN0w3LjYgOS4xMDAwMUwwIDEuNUwxLjQgMEwxMC40IDkuMTAwMDFDMTAuNCA5LjEwMDAxIDEuMyAxOC4xIDEuNCAxOC4xWlwiLz5cXG4gICAgICA8L3N2Zz5cXG4gICAgJztcclxuICAgICAgICBsZXQgcmlnaHRJY29uID1cclxuICAgICAgICAgICdcXG4gICAgICA8c3ZnIHZpZXdCb3g9XCIwIDAgMTEgMTlcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPlxcbiAgICAgICAgPHBhdGggZD1cIk05LjAwMDM5IDcuMjQ3OTJlLTA1TDEwLjQwMDQgMS40MDAwN0wyLjgwMDM5IDkuMDAwMDlMMTAuNDAwNCAxNi42MDAxTDkuMDAwMzkgMTguMTAwMUwwLjAwMDM5MTAwNiA5LjAwMDA5QzAuMDAwMzkxMDA2IDkuMDAwMDkgOS4xMDAzOSA3LjI0NzkyZS0wNSA5LjAwMDM5IDcuMjQ3OTJlLTA1WlwiLz5cXG4gICAgICA8L3N2Zz5cXG4gICAgJztcclxuICAgICAgICBsZXQgbGVmdEljb25DbGFzcyA9IFwiY3VzdG9tLWljb24tbGVmdFwiO1xyXG4gICAgICAgIGxldCByaWdodEljb25DbGFzcyA9IFwiY3VzdG9tLWljb24tcmlnaHRcIjtcclxuICAgICAgICBsZXQgY3VzdG9tSWNvbnMgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcclxuICAgICAgICAgIFwiLlwiLmNvbmNhdChsZWZ0SWNvbkNsYXNzLCBcIiwgLlwiKS5jb25jYXQocmlnaHRJY29uQ2xhc3MpXHJcbiAgICAgICAgKTtcclxuICAgICAgICBjdXN0b21JY29ucy5mb3JFYWNoKGZ1bmN0aW9uIChpY29uKSB7XHJcbiAgICAgICAgICBsZXQgaXNMZWZ0SWNvbiA9IGljb24uY2xhc3NMaXN0LmNvbnRhaW5zKGxlZnRJY29uQ2xhc3MpO1xyXG4gICAgICAgICAgbGV0IGlzUmlnaHRJY29uID0gaWNvbi5jbGFzc0xpc3QuY29udGFpbnMocmlnaHRJY29uQ2xhc3MpO1xyXG5cclxuICAgICAgICAgIGlmIChpc0xlZnRJY29uKSB7XHJcbiAgICAgICAgICAgIGljb24uY2xhc3NMaXN0LnJlbW92ZShsZWZ0SWNvbkNsYXNzKTtcclxuICAgICAgICAgICAgbGVmdEljb24gPSBpY29uLm91dGVySFRNTDtcclxuICAgICAgICAgIH0gZWxzZSBpZiAoaXNSaWdodEljb24pIHtcclxuICAgICAgICAgICAgaWNvbi5jbGFzc0xpc3QucmVtb3ZlKHJpZ2h0SWNvbkNsYXNzKTtcclxuICAgICAgICAgICAgcmlnaHRJY29uID0gaWNvbi5vdXRlckhUTUw7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWNvbi5yZW1vdmUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLm5leHRBcnJvdyA9ICc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ1dHRvbiBidXR0b25fc3R5bGUtMSBzbGljay1uZXh0XCI+Jy5jb25jYXQoXHJcbiAgICAgICAgICBsZWZ0SWNvbixcclxuICAgICAgICAgIFwiPC9idXR0b24+XCJcclxuICAgICAgICApO1xyXG4gICAgICAgIHRoaXMucHJldkFycm93ID0gJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnV0dG9uIGJ1dHRvbl9zdHlsZS0xIHNsaWNrLXByZXZcIj4nLmNvbmNhdChcclxuICAgICAgICAgIHJpZ2h0SWNvbixcclxuICAgICAgICAgIFwiPC9idXR0b24+XCJcclxuICAgICAgICApO1xyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAga2V5OiBcImNoZWNrU2xpZGVyU3RhdGVcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNoZWNrU2xpZGVyU3RhdGUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubW91bnRlZCAmJiB0aGlzLnNhdmVkV2luZG93V2lkdGggPT09IHdpbmRvdy5pbm5lcldpZHRoKSByZXR1cm47XHJcbiAgICAgICAgdGhpcy5zYXZlZFdpbmRvd1dpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm1vdW50ZWQpIHtcclxuICAgICAgICAgIHRoaXMudW5tb3VudCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHN0YXRlO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBicmVha3BvaW50IGluIGJyZWFrcG9pbnRzKSB7XHJcbiAgICAgICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPj0gYnJlYWtwb2ludHNbYnJlYWtwb2ludF0pIHtcclxuICAgICAgICAgICAgc3RhdGUgPSB0aGlzLnBhcmFtcy5zdGF0ZVticmVha3BvaW50XTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChzdGF0ZSkge1xyXG4gICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJ2aXNpYmxlXCIpO1xyXG5cclxuICAgICAgICAgIGlmICh0aGlzLmNvbnRhaW5zTW9iaWxlSGlkZGVuU2xpZGVzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tTbGlkZXNWaXNpYmlsaXR5KCk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgdGhpcy5tb3VudCgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInZpc2libGVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAga2V5OiBcImNoZWNrU2xpZGVzVmlzaWJpbGl0eVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY2hlY2tTbGlkZXNWaXNpYmlsaXR5KCkge1xyXG4gICAgICAgIGxldCBfdGhpczQgPSB0aGlzO1xyXG5cclxuICAgICAgICB0aGlzLnNsaWRlcy5mb3JFYWNoKGZ1bmN0aW9uIChzbGlkZSkge1xyXG4gICAgICAgICAgc2xpZGUucmVtb3ZlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zbGlkZXMuZm9yRWFjaChmdW5jdGlvbiAoc2xpZGUpIHtcclxuICAgICAgICAgIGxldCBzaG91bGRCZUhpZGRlbiA9IHNsaWRlLmdldEF0dHJpYnV0ZShcImRhdGEtc2xpZGUtbW9iaWxlLWhpZGRlblwiKSAhPT0gbnVsbDtcclxuICAgICAgICAgIGxldCBicmVha3BvaW50ID0gd2luZG93LmlubmVyV2lkdGggPCBicmVha3BvaW50cy5zbTtcclxuXHJcbiAgICAgICAgICBpZiAoIShzaG91bGRCZUhpZGRlbiAmJiBicmVha3BvaW50KSkge1xyXG4gICAgICAgICAgICBfdGhpczQuZWxlbWVudC5pbnNlcnRBZGphY2VudEVsZW1lbnQoXCJiZWZvcmVlbmRcIiwgc2xpZGUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAga2V5OiBcIm1vdW50XCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBtb3VudCgpIHtcclxuICAgICAgICAkKHRoaXMuZWxlbWVudCkuc2xpY2soe1xyXG4gICAgICAgICAgYXV0b3BsYXk6IHRoaXMucGFyYW1zLmF1dG9wbGF5LFxyXG4gICAgICAgICAgYXV0b3BsYXlTcGVlZDogdGhpcy5wYXJhbXMuYXV0b3BsYXlUaW1lb3V0LFxyXG4gICAgICAgICAgbW9iaWxlRmlyc3Q6IHRydWUsXHJcbiAgICAgICAgICBzbGlkZXNUb1Nob3c6IHRoaXMucGFyYW1zLmNvdW50LnhzLFxyXG4gICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IHRoaXMucGFyYW1zLmNvdW50LnhzLFxyXG4gICAgICAgICAgcm93czogdGhpcy5wYXJhbXMucm93cy54cyxcclxuICAgICAgICAgIHByZXZBcnJvdzogdGhpcy5wcmV2QXJyb3csXHJcbiAgICAgICAgICBuZXh0QXJyb3c6IHRoaXMubmV4dEFycm93LFxyXG4gICAgICAgICAgYXJyb3dzOiB0aGlzLnBhcmFtcy5hcnJvd3MsXHJcbiAgICAgICAgICBhZGFwdGl2ZUhlaWdodDogdGhpcy5wYXJhbXMuYWRhcHRpdmVIZWlnaHQsXHJcbiAgICAgICAgICBkb3RzOiB0aGlzLnBhcmFtcy5kb3RzLFxyXG4gICAgICAgICAgY2VudGVyTW9kZTogdGhpcy5wYXJhbXMuY2VudGVyTW9kZSxcclxuICAgICAgICAgIGFjY2Vzc2liaWxpdHk6IGZhbHNlLFxyXG4gICAgICAgICAgcmVzcG9uc2l2ZTogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgYnJlYWtwb2ludDogYnJlYWtwb2ludHMuc20gLSAxLFxyXG4gICAgICAgICAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IHRoaXMucGFyYW1zLmNvdW50LnNtLFxyXG4gICAgICAgICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IHRoaXMucGFyYW1zLmNvdW50LnNtLFxyXG4gICAgICAgICAgICAgICAgcm93czogdGhpcy5wYXJhbXMucm93cy5zbSxcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgYnJlYWtwb2ludDogYnJlYWtwb2ludHMubWQgLSAxLFxyXG4gICAgICAgICAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IHRoaXMucGFyYW1zLmNvdW50Lm1kLFxyXG4gICAgICAgICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IHRoaXMucGFyYW1zLmNvdW50Lm1kLFxyXG4gICAgICAgICAgICAgICAgcm93czogdGhpcy5wYXJhbXMucm93cy5tZCxcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgYnJlYWtwb2ludDogYnJlYWtwb2ludHMubGcgLSAxLFxyXG4gICAgICAgICAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IHRoaXMucGFyYW1zLmNvdW50LmxnLFxyXG4gICAgICAgICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IHRoaXMucGFyYW1zLmNvdW50LmxnLFxyXG4gICAgICAgICAgICAgICAgcm93czogdGhpcy5wYXJhbXMucm93cy5sZyxcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgYnJlYWtwb2ludDogYnJlYWtwb2ludHMueGwgLSAxLFxyXG4gICAgICAgICAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IHRoaXMucGFyYW1zLmNvdW50LnhsLFxyXG4gICAgICAgICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IHRoaXMucGFyYW1zLmNvdW50LnhsLFxyXG4gICAgICAgICAgICAgICAgcm93czogdGhpcy5wYXJhbXMucm93cy54bCxcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgXSxcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLm1vdW50ZWQgPSB0cnVlO1xyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAga2V5OiBcInVubW91bnRcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHVubW91bnQoKSB7XHJcbiAgICAgICAgJCh0aGlzLmVsZW1lbnQpLnNsaWNrKFwidW5zbGlja1wiKTtcclxuICAgICAgICB0aGlzLm1vdW50ZWQgPSBmYWxzZTtcclxuICAgICAgfSxcclxuICAgIH0sXHJcbiAgXSk7XHJcblxyXG4gIHJldHVybiBTbGlkZXJDb25zdHJ1Y3RvcjtcclxufSkoKTtcclxuIiwiJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xyXG4gICQoXCIuY2F0YWxvZy1maWx0ZXItYWNjb3JkaW9uIGEub3BlbmVyXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICQodGhpcykucGFyZW50KCkuZmluZChcInVsOmZpcnN0XCIpLnNsaWRlVG9nZ2xlKCk7XHJcbiAgICAkKHRoaXMpLnBhcmVudCgpLnRvZ2dsZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH0pO1xyXG5cclxuICAkKFwiW2RhdGEtZXhwYW5kXVwiKS5vbihcImNsaWNrXCIsIChldmVudCkgPT4ge1xyXG4gICAgY29uc3QgdGFyZ2V0ID0gJChldmVudC5jdXJyZW50VGFyZ2V0KTtcclxuICAgIGNvbnN0IHBhcmVudCA9IHRhcmdldC5wYXJlbnQoKTtcclxuICAgIHBhcmVudC5maW5kKFwiW2RhdGEtY29sbGFwc2UtY29udGVudF1cIikucmVtb3ZlQ2xhc3MoXCJkLW5vbmVcIik7XHJcbiAgICBwYXJlbnQuZmluZChcIltkYXRhLWNvbGxhcHNlXVwiKS5yZW1vdmVDbGFzcyhcImQtbm9uZVwiKTtcclxuICAgIHRhcmdldC5hZGRDbGFzcyhcImQtbm9uZVwiKTtcclxuICB9KTtcclxuXHJcbiAgJChcIltkYXRhLWNvbGxhcHNlXVwiKS5vbihcImNsaWNrXCIsIChldmVudCkgPT4ge1xyXG4gICAgY29uc3QgdGFyZ2V0ID0gJChldmVudC5jdXJyZW50VGFyZ2V0KTtcclxuICAgIGNvbnN0IHBhcmVudCA9IHRhcmdldC5wYXJlbnQoKTtcclxuICAgIHBhcmVudC5maW5kKFwiW2RhdGEtY29sbGFwc2UtY29udGVudF1cIikuYWRkQ2xhc3MoXCJkLW5vbmVcIik7XHJcbiAgICBwYXJlbnQuZmluZChcIltkYXRhLWV4cGFuZF1cIikucmVtb3ZlQ2xhc3MoXCJkLW5vbmVcIik7XHJcbiAgICB0YXJnZXQuYWRkQ2xhc3MoXCJkLW5vbmVcIik7XHJcbiAgfSk7XHJcblxyXG4gICQoXCJbZGF0YS1leHBhbmQtbWVudV1cIikub24oXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAkKFwiLm1vYmlsZS1zaWRlLW1lbnVfX2JhY2tncm91bmRcIikuYWRkQ2xhc3MoXCJkLWJsb2NrXCIpO1xyXG4gICAgJChcIi5tb2JpbGUtc2lkZS1tZW51LWNvbnRlbnRcIikuYWRkQ2xhc3MoXCJtb2JpbGUtc2lkZS1tZW51LWNvbnRlbnRfYWN0aXZlXCIpO1xyXG4gIH0pO1xyXG5cclxuICAkKFwiW2RhdGEtY29sbGFwc2UtbWVudV1cIikub24oXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAkKFwiLm1vYmlsZS1zaWRlLW1lbnVfX2JhY2tncm91bmRcIikucmVtb3ZlQ2xhc3MoXCJkLWJsb2NrXCIpO1xyXG4gICAgJChcIi5tb2JpbGUtc2lkZS1tZW51LWNvbnRlbnRcIikucmVtb3ZlQ2xhc3MoXCJtb2JpbGUtc2lkZS1tZW51LWNvbnRlbnRfYWN0aXZlXCIpO1xyXG4gICAgJChgW2RhdGEtbWVudS1wYWdlXTpub3QoOmZpcnN0LWNoaWxkKWApLnJlbW92ZUNsYXNzKFwibW9iaWxlLXNpZGUtbWVudS1jb250ZW50X19wYWdlX2FjdGl2ZVwiKTtcclxuICB9KTtcclxuXHJcbiAgJChcIltkYXRhLW1lbnUtcGFnZS1leHBhbmRdXCIpLm9uKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICBjb25zdCBpZCA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuYXR0cihcImRhdGEtbWVudS1wYWdlLWV4cGFuZFwiKTtcclxuICAgICQoYFtkYXRhLW1lbnUtcGFnZT1cIiR7aWR9XCJdYCkuYWRkQ2xhc3MoXCJtb2JpbGUtc2lkZS1tZW51LWNvbnRlbnRfX3BhZ2VfYWN0aXZlXCIpO1xyXG4gIH0pO1xyXG5cclxuICAkKFwiW2RhdGEtbWVudS1wYWdlLWNvbGxhcHNlXVwiKS5vbihcImNsaWNrXCIsIChldmVudCkgPT4ge1xyXG4gICAgY29uc3QgaWQgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmF0dHIoXCJkYXRhLW1lbnUtcGFnZS1jb2xsYXBzZVwiKTtcclxuICAgICQoYFtkYXRhLW1lbnUtcGFnZT1cIiR7aWR9XCJdYCkucmVtb3ZlQ2xhc3MoXCJtb2JpbGUtc2lkZS1tZW51LWNvbnRlbnRfX3BhZ2VfYWN0aXZlXCIpO1xyXG4gIH0pO1xyXG5cclxuICAkKFwiLnByb2R1Y3QtY2FyZC1zbGlkZXNob3dfX3NlY3RvclwiKS5vbihcIm1vdXNlbW92ZVwiLCAoZXZlbnQpID0+IHtcclxuICAgIGNvbnN0IHRhcmdldCA9ICQoZXZlbnQuY3VycmVudFRhcmdldCk7XHJcbiAgICBjb25zdCBpZCA9IHRhcmdldC5hdHRyKFwiZGF0YS1zZWN0b3JcIik7XHJcbiAgICBjb25zdCBwYXJlbnQgPSB0YXJnZXQucGFyZW50KCkucGFyZW50KCk7XHJcbiAgICBwYXJlbnRcclxuICAgIC5maW5kKFwiLnByb2R1Y3QtY2FyZC1zbGlkZXNob3dfX2ltYWdlX2FjdGl2ZVwiKVxyXG4gICAgLnJlbW92ZUNsYXNzKFwicHJvZHVjdC1jYXJkLXNsaWRlc2hvd19faW1hZ2VfYWN0aXZlXCIpO1xyXG4gICAgcGFyZW50XHJcbiAgICAuZmluZChcIi5wcm9kdWN0LWNhcmQtc2xpZGVzaG93X19kb3RfYWN0aXZlXCIpXHJcbiAgICAucmVtb3ZlQ2xhc3MoXCJwcm9kdWN0LWNhcmQtc2xpZGVzaG93X19kb3RfYWN0aXZlXCIpO1xyXG4gICAgcGFyZW50LmZpbmQoYFtkYXRhLXNlY3Rvci1pbWFnZT1cIiR7aWR9XCJdYCkuYWRkQ2xhc3MoXCJwcm9kdWN0LWNhcmQtc2xpZGVzaG93X19pbWFnZV9hY3RpdmVcIik7XHJcbiAgICBwYXJlbnQuZmluZChgW2RhdGEtc2VjdG9yLWRvdD1cIiR7aWR9XCJdYCkuYWRkQ2xhc3MoXCJwcm9kdWN0LWNhcmQtc2xpZGVzaG93X19kb3RfYWN0aXZlXCIpO1xyXG4gIH0pO1xyXG5cclxuICBsZXQgdG91Y2hzdGFydFggPSAwO1xyXG4gIGxldCB0b3VjaGVuZFggPSAwO1xyXG5cclxuICAkKFwiLnByb2R1Y3QtY2FyZC1zbGlkZXNob3dfX3NlY3RvcnNcIikub24oXCJ0b3VjaHN0YXJ0XCIsIChldmVudCkgPT4ge1xyXG4gICAgdG91Y2hzdGFydFggPSBldmVudC5jaGFuZ2VkVG91Y2hlc1swXS5zY3JlZW5YO1xyXG4gIH0pO1xyXG5cclxuICAkKFwiLnByb2R1Y3QtY2FyZC1zbGlkZXNob3dfX3NlY3RvcnNcIikub24oXCJ0b3VjaGVuZFwiLCAoZXZlbnQpID0+IHtcclxuICAgIHRvdWNoZW5kWCA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnNjcmVlblg7XHJcbiAgICBjb25zdCBwYXJlbnQgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudCgpO1xyXG4gICAgY29uc3QgaW1nID0gcGFyZW50LmZpbmQoXCIucHJvZHVjdC1jYXJkLXNsaWRlc2hvd19faW1hZ2VfYWN0aXZlXCIpO1xyXG4gICAgY29uc3QgaWQgPSBOdW1iZXIoaW1nLmF0dHIoXCJkYXRhLXNlY3Rvci1pbWFnZVwiKSk7XHJcbiAgICBjb25zdCBsZW5ndGggPSBwYXJlbnQuZmluZChcIi5wcm9kdWN0LWNhcmQtc2xpZGVzaG93X19pbWFnZVwiKS5sZW5ndGg7XHJcblxyXG4gICAgaWYgKHRvdWNoZW5kWCA8IHRvdWNoc3RhcnRYKSB7XHJcbiAgICAgIHBhcmVudFxyXG4gICAgICAuZmluZChcIi5wcm9kdWN0LWNhcmQtc2xpZGVzaG93X19pbWFnZV9hY3RpdmVcIilcclxuICAgICAgLnJlbW92ZUNsYXNzKFwicHJvZHVjdC1jYXJkLXNsaWRlc2hvd19faW1hZ2VfYWN0aXZlXCIpO1xyXG4gICAgICBwYXJlbnRcclxuICAgICAgLmZpbmQoXCIucHJvZHVjdC1jYXJkLXNsaWRlc2hvd19fZG90X2FjdGl2ZVwiKVxyXG4gICAgICAucmVtb3ZlQ2xhc3MoXCJwcm9kdWN0LWNhcmQtc2xpZGVzaG93X19kb3RfYWN0aXZlXCIpO1xyXG4gICAgICBpZiAoaWQgPj0gbGVuZ3RoKSB7XHJcbiAgICAgICAgcGFyZW50LmZpbmQoYFtkYXRhLXNlY3Rvci1pbWFnZT1cIiR7MX1cIl1gKS5hZGRDbGFzcyhcInByb2R1Y3QtY2FyZC1zbGlkZXNob3dfX2ltYWdlX2FjdGl2ZVwiKTtcclxuICAgICAgICBwYXJlbnQuZmluZChgW2RhdGEtc2VjdG9yLWRvdD1cIiR7MX1cIl1gKS5hZGRDbGFzcyhcInByb2R1Y3QtY2FyZC1zbGlkZXNob3dfX2RvdF9hY3RpdmVcIik7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHBhcmVudFxyXG4gICAgICAuZmluZChgW2RhdGEtc2VjdG9yLWltYWdlPVwiJHtpZCArIDF9XCJdYClcclxuICAgICAgLmFkZENsYXNzKFwicHJvZHVjdC1jYXJkLXNsaWRlc2hvd19faW1hZ2VfYWN0aXZlXCIpO1xyXG4gICAgICBwYXJlbnQuZmluZChgW2RhdGEtc2VjdG9yLWRvdD1cIiR7aWQgKyAxfVwiXWApLmFkZENsYXNzKFwicHJvZHVjdC1jYXJkLXNsaWRlc2hvd19fZG90X2FjdGl2ZVwiKTtcclxuICAgIH1cclxuICAgIGlmICh0b3VjaGVuZFggPiB0b3VjaHN0YXJ0WCkge1xyXG4gICAgICBwYXJlbnRcclxuICAgICAgLmZpbmQoXCIucHJvZHVjdC1jYXJkLXNsaWRlc2hvd19faW1hZ2VfYWN0aXZlXCIpXHJcbiAgICAgIC5yZW1vdmVDbGFzcyhcInByb2R1Y3QtY2FyZC1zbGlkZXNob3dfX2ltYWdlX2FjdGl2ZVwiKTtcclxuICAgICAgcGFyZW50XHJcbiAgICAgIC5maW5kKFwiLnByb2R1Y3QtY2FyZC1zbGlkZXNob3dfX2RvdF9hY3RpdmVcIilcclxuICAgICAgLnJlbW92ZUNsYXNzKFwicHJvZHVjdC1jYXJkLXNsaWRlc2hvd19fZG90X2FjdGl2ZVwiKTtcclxuICAgICAgaWYgKGlkIDw9IDEpIHtcclxuICAgICAgICBwYXJlbnRcclxuICAgICAgICAuZmluZChgW2RhdGEtc2VjdG9yLWltYWdlPVwiJHtsZW5ndGh9XCJdYClcclxuICAgICAgICAuYWRkQ2xhc3MoXCJwcm9kdWN0LWNhcmQtc2xpZGVzaG93X19pbWFnZV9hY3RpdmVcIik7XHJcbiAgICAgICAgcGFyZW50LmZpbmQoYFtkYXRhLXNlY3Rvci1kb3Q9XCIke2xlbmd0aH1cIl1gKS5hZGRDbGFzcyhcInByb2R1Y3QtY2FyZC1zbGlkZXNob3dfX2RvdF9hY3RpdmVcIik7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHBhcmVudFxyXG4gICAgICAuZmluZChgW2RhdGEtc2VjdG9yLWltYWdlPVwiJHtpZCAtIDF9XCJdYClcclxuICAgICAgLmFkZENsYXNzKFwicHJvZHVjdC1jYXJkLXNsaWRlc2hvd19faW1hZ2VfYWN0aXZlXCIpO1xyXG4gICAgICBwYXJlbnQuZmluZChgW2RhdGEtc2VjdG9yLWRvdD1cIiR7aWQgLSAxfVwiXWApLmFkZENsYXNzKFwicHJvZHVjdC1jYXJkLXNsaWRlc2hvd19fZG90X2FjdGl2ZVwiKTtcclxuICAgIH1cclxuICB9KTtcclxufSk7XHJcbiQoXCIubGlrZS1idG5cIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICQodGhpcykudG9nZ2xlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbn0pO1xyXG4kKFwiLmNpdHktc2VsZWN0aW9uX19saW5rXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAkKFwiLmNpdHktc2VsZWN0aW9uX19saXN0XCIpLnRvZ2dsZSgwKTtcclxufSk7XHJcbiQod2luZG93KS5jbGljayhmdW5jdGlvbiAoZSkge1xyXG4gIGlmICghZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiY2l0eS1zZWxlY3Rpb25fX2xpbmtcIikpIHtcclxuICAgICQoXCIuY2l0eS1zZWxlY3Rpb25fX2xpc3RcIikudG9nZ2xlKGZhbHNlKTtcclxuICB9XHJcbn0pO1xyXG4kKFwiLmJ1cmdlci1tZW51XCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAkKFwiLm1vYmlsZS1tZW51XCIpLnRvZ2dsZSgwKTtcclxufSk7XHJcbiQoXCIuY2F0YWxvZy1pbm5lci1idG5cIikuY2xpY2soZnVuY3Rpb24gKGUpIHtcclxuICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgJCh0aGlzKS50b2dnbGVDbGFzcyhcIm9wZW5cIik7XHJcbiAgJChcIi5jYXRhbG9nLWhlYWRlci1jb250ZW50XCIpLnRvZ2dsZSgwKTtcclxufSk7XHJcbiQoXCIuY2F0YWxvZy1pbm5lci1idG4sLmNhdGFsb2ctbWVudV9faGVhZCBhXCIpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICQoXCIuY2F0YWxvZy1tZW51XCIpLnRvZ2dsZSgwKTtcclxufSk7XHJcbiQoXCIuYnVyZ2VyLWNhdGFsb2dcIikuY2xpY2soZnVuY3Rpb24gKGUpIHtcclxuICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgJCh0aGlzKS50b2dnbGVDbGFzcyhcIm9wZW5cIik7XHJcbn0pO1xyXG4kKFwiLnNoYXJlLWJ0blwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgJChcIi5zaGFyZS1ibG9ja19fc2hvd1wiKS50b2dnbGUoMCk7XHJcbn0pO1xyXG4kKFwiLmNsb3NlLXBhbmVsXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAkKFwiLmJvdHRvbS1wYW5lbFwiKS50b2dnbGUoMCk7XHJcbn0pO1xyXG4kKFwiLmZpbHRlci1idG4sIC5jbG9zZS1idG4tMlwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgJChcIi5jYXRhbG9nLWZpbHRlclwiKS50b2dnbGUoMCk7XHJcbn0pO1xyXG4kKFwiLmNhdGFsb2ctc2lkZV9fdGl0bGVcIikuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICQoXCIuY2F0YWxvZy1zaWRlX19jb250ZW50XCIpLnRvZ2dsZSgwKTtcclxuICAkKFwiLmNhdGFsb2ctc2lkZV9fY29udGVudC1hY2NvcmRlb25cIikudG9nZ2xlKDApO1xyXG59KTtcclxuJChcIi5jYXRhbG9nLW9wZW5lZFwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgJChcIi5jYXRhbG9nLW9wZW5lZCAuc3VibWVudVwiKS50b2dnbGUoMCk7XHJcbn0pO1xyXG4kKFwiLmJ1cmdlci1tZW51XCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAkKHRoaXMpLnRvZ2dsZUNsYXNzKFwibWVudS1vblwiKTtcclxufSk7XHJcbiQoXCIuY2F0YWxvZy1pbm5lclwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgJCh0aGlzKS50b2dnbGVDbGFzcyhcIm9wZW5cIik7XHJcbiAgJChcIi5jYXRhbG9nLWlubmVyLWNvbnRlbnRcIikudG9nZ2xlKDApO1xyXG59KTtcclxuIiwiJChmdW5jdGlvbiAoKSB7XHJcbiAgLy8gVGhpcyB3aWxsIHNlbGVjdCBldmVyeXRoaW5nIHdpdGggdGhlIGNsYXNzIHNtb290aFNjcm9sbFxyXG4gIC8vIFRoaXMgc2hvdWxkIHByZXZlbnQgcHJvYmxlbXMgd2l0aCBjYXJvdXNlbCwgc2Nyb2xsc3B5LCBldGMuLi5cclxuICAkKFwiLnNtb290aFNjcm9sbFwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAoXHJcbiAgICAgIGxvY2F0aW9uLnBhdGhuYW1lLnJlcGxhY2UoL15cXC8vLCBcIlwiKSA9PSB0aGlzLnBhdGhuYW1lLnJlcGxhY2UoL15cXC8vLCBcIlwiKSAmJlxyXG4gICAgICBsb2NhdGlvbi5ob3N0bmFtZSA9PSB0aGlzLmhvc3RuYW1lXHJcbiAgICApIHtcclxuICAgICAgdmFyIHRhcmdldCA9ICQodGhpcy5oYXNoKTtcclxuICAgICAgdGFyZ2V0ID0gdGFyZ2V0Lmxlbmd0aCA/IHRhcmdldCA6ICQoXCJbbmFtZT1cIiArIHRoaXMuaGFzaC5zbGljZSgxKSArIFwiXVwiKTtcclxuXHJcbiAgICAgIGlmICh0YXJnZXQubGVuZ3RoKSB7XHJcbiAgICAgICAgJChcImh0bWwsYm9keVwiKS5hbmltYXRlKFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBzY3JvbGxUb3A6IHRhcmdldC5vZmZzZXQoKS50b3AsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgMTAwMFxyXG4gICAgICAgICk7IC8vIFRoZSBudW1iZXIgaGVyZSByZXByZXNlbnRzIHRoZSBzcGVlZCBvZiB0aGUgc2Nyb2xsIGluIG1pbGxpc2Vjb25kc1xyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9KTtcclxufSk7XHJcbiIsInZhciBiaWdTbGlkZXMgPSAkKFwiLm1haW4tc2xpZGVyIC5vd2wtY2Fyb3VzZWxcIiksXHJcbiAgYXV0b1BsYXlUaW1lb3V0U2VjID0gcGFyc2VJbnQoYmlnU2xpZGVzLmRhdGEoXCJhdXRvcGxheS10aW1lb3V0XCIpKTtcclxuYmlnU2xpZGVzLm93bENhcm91c2VsKHtcclxuICBsb29wOiB0cnVlLFxyXG4gIG1hcmdpbjogNSxcclxuICBuYXY6IHRydWUsXHJcbiAgZG90czogdHJ1ZSxcclxuICBpdGVtczogMSxcclxuICBhdXRvcGxheTogdHJ1ZSxcclxuICBhdXRvcGxheVRpbWVvdXQ6IGF1dG9QbGF5VGltZW91dFNlYyAqIDEwMDAsXHJcbiAgbmF2VGV4dDogW1xyXG4gICAgJzxzdmcgY2xhc3M9XCJpY29uXCIgdmlld0JveD1cIjAgMCAxMC41IDE4LjFcIj48cGF0aCBzdHJva2U9XCJub25lXCIgZD1cIk05LDBsMS40LDEuNEwyLjgsOWw3LjYsNy42TDksMTguMUwwLDlDMCw5LDkuMSwwLDksMHpcIj48L3BhdGg+PC9zdmc+JyxcclxuICAgICc8c3ZnIGNsYXNzPVwiaWNvblwiIHZpZXdCb3g9XCIwIDAgMTAuNSAxOC4xXCI+PHBhdGggc3Ryb2tlPVwibm9uZVwiIGQ9XCJNMS40LDE4LjFMMCwxNi43bDcuNi03LjZMMCwxLjVMMS40LDBsOSw5LjFDMTAuNCw5LjEsMS4zLDE4LjEsMS40LDE4LjF6XCI+PC9wYXRoPjwvc3ZnPicsXHJcbiAgXSxcclxufSk7XHJcbnZhciByYWRpb0J1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZGVsaXZlcnktc2VsZWN0aW9uIGlucHV0W3R5cGU9XCJyYWRpb1wiXScpO1xyXG52YXIgY2hvaWNlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZGVsaXZlcnktY2hvaWNlXCIpO1xyXG5yYWRpb0J1dHRvbnMuZm9yRWFjaChmdW5jdGlvbiAoYnRuKSB7XHJcbiAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGNsaWNrZWQgPSB0aGlzO1xyXG4gICAgY2hvaWNlcy5mb3JFYWNoKGZ1bmN0aW9uIChjaG9pY2UpIHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIGNob2ljZS5jbGFzc0xpc3QuY29udGFpbnMoY2xpY2tlZC5pZCkgfHxcclxuICAgICAgICBjaG9pY2UuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZGVsaXZlcnktdHlwZS1cIiArIGNsaWNrZWQudmFsdWUpXHJcbiAgICAgICkge1xyXG4gICAgICAgIGNob2ljZS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNob2ljZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0pO1xyXG59KTtcclxuJChcIi5zaG9wcGluZy1jYXJ0LWl0ZW1fX2RlbGV0ZVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgJCh0aGlzKS5wYXJlbnQoXCIuc2hvcHBpbmctY2FydC1pdGVtXCIpLnJlbW92ZSgpO1xyXG59KTtcclxuJChcIi5zbGlkZXIgLm93bC1jYXJvdXNlbFwiKS5vd2xDYXJvdXNlbCh7XHJcbiAgbG9vcDogdHJ1ZSxcclxuICBtYXJnaW46IDAsXHJcbiAgaXRlbXM6IDEsXHJcbiAgbmF2OiB0cnVlLFxyXG59KTtcclxuJChcIi5uZXdzLXNsaWRlciAub3dsLWNhcm91c2VsXCIpLm93bENhcm91c2VsKHtcclxuICBsb29wOiB0cnVlLFxyXG4gIG1hcmdpbjogMCxcclxuICBpdGVtczogNCxcclxuICByZXNwb25zaXZlOiB7XHJcbiAgICAwOiB7XHJcbiAgICAgIG5hdjogZmFsc2UsXHJcbiAgICAgIGRvdHM6IHRydWUsXHJcbiAgICAgIGl0ZW1zOiAxLFxyXG4gICAgfSxcclxuICAgIDQ3OToge1xyXG4gICAgICBuYXY6IGZhbHNlLFxyXG4gICAgICBkb3RzOiB0cnVlLFxyXG4gICAgICBpdGVtczogMixcclxuICAgIH0sXHJcbiAgICA3Njg6IHtcclxuICAgICAgbmF2OiB0cnVlLFxyXG4gICAgICBkb3RzOiBmYWxzZSxcclxuICAgICAgaXRlbXM6IDMsXHJcbiAgICB9LFxyXG4gICAgOTkyOiB7XHJcbiAgICAgIGl0ZW1zOiA0LFxyXG4gICAgfSxcclxuICB9LFxyXG59KTtcclxuJChcIi5hY3Rpb24tc2xpZGVyIC5vd2wtY2Fyb3VzZWxcIikub3dsQ2Fyb3VzZWwoe1xyXG4gIGxvb3A6IHRydWUsXHJcbiAgbWFyZ2luOiAyMCxcclxuICBuYXY6IHRydWUsXHJcbiAgZG90czogZmFsc2UsXHJcbiAgaXRlbXM6IDMsXHJcbiAgcmVzcG9uc2l2ZToge1xyXG4gICAgMDoge1xyXG4gICAgICBuYXY6IGZhbHNlLFxyXG4gICAgICBkb3RzOiB0cnVlLFxyXG4gICAgICBpdGVtczogMSxcclxuICAgIH0sXHJcbiAgICA0Nzk6IHtcclxuICAgICAgbmF2OiBmYWxzZSxcclxuICAgICAgZG90czogdHJ1ZSxcclxuICAgICAgaXRlbXM6IDIsXHJcbiAgICB9LFxyXG4gICAgNzY4OiB7XHJcbiAgICAgIG5hdjogdHJ1ZSxcclxuICAgICAgZG90czogZmFsc2UsXHJcbiAgICAgIGl0ZW1zOiAzLFxyXG4gICAgfSxcclxuICB9LFxyXG59KTtcclxuJChcIi5wYXJ0bmVycy1zbGlkZXIgLm93bC1jYXJvdXNlbFwiKS5vd2xDYXJvdXNlbCh7XHJcbiAgbG9vcDogdHJ1ZSxcclxuICBtYXJnaW46IDAsXHJcbiAgbmF2OiB0cnVlLFxyXG4gIGRvdHM6IGZhbHNlLFxyXG4gIGl0ZW1zOiA1LFxyXG4gIHJlc3BvbnNpdmU6IHtcclxuICAgIDA6IHtcclxuICAgICAgZG90czogdHJ1ZSxcclxuICAgICAgbmF2OiBmYWxzZSxcclxuICAgICAgaXRlbXM6IDEsXHJcbiAgICB9LFxyXG4gICAgNTY2OiB7XHJcbiAgICAgIG5hdjogZmFsc2UsXHJcbiAgICAgIGRvdHM6IHRydWUsXHJcbiAgICAgIGl0ZW1zOiAyLFxyXG4gICAgfSxcclxuICAgIDc2ODoge1xyXG4gICAgICBuYXY6IGZhbHNlLFxyXG4gICAgICBkb3RzOiB0cnVlLFxyXG4gICAgICBpdGVtczogMyxcclxuICAgIH0sXHJcbiAgICA5MDA6IHtcclxuICAgICAgbmF2OiBmYWxzZSxcclxuICAgICAgZG90czogdHJ1ZSxcclxuICAgICAgaXRlbXM6IDQsXHJcbiAgICB9LFxyXG4gICAgOTUwOiB7XHJcbiAgICAgIGRvdHM6IGZhbHNlLFxyXG4gICAgfSxcclxuICB9LFxyXG59KTtcclxuIiwiKGZ1bmN0aW9uICgkKSB7XHJcbiAgdmFyIGN1c3RvbVNlbGVjdCA9ICQoXCJzZWxlY3QuY3VzdG9tLXNlbGVjdFwiKTsgLy8gRklSU1QsIGNyZWF0ZSB0aGUgY3VzdG9tIHNlbGVjdCBtZW51cyBmcm9tIHRoZSBleGlzdGluZyBzZWxlY3RcclxuXHJcbiAgY3VzdG9tU2VsZWN0LmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHRoYXQgPSAkKHRoaXMpO1xyXG4gICAgdmFyIGxpc3RJRCA9IHRoYXQuYXR0cihcImlkXCIpLFxyXG4gICAgICBncm91cHMgPSB0aGF0LmNoaWxkcmVuKFwib3B0Z3JvdXBcIiksXHJcbiAgICAgIHRoZU9wdGlvbnMgPSBcIlwiLFxyXG4gICAgICBzdGFydGluZ09wdGlvbiA9IFwiXCIsXHJcbiAgICAgIGN1c3RvbVNlbGVjdCA9IFwiXCI7IC8vY2hlY2sgaWYgdGhlcmUgYXJlIG9wdGlvbiBncm91cHNcclxuXHJcbiAgICBpZiAoZ3JvdXBzLmxlbmd0aCkge1xyXG4gICAgICBncm91cHMuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGN1ckdyb3VwID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgY3VyTmFtZSA9IGN1ckdyb3VwLmF0dHIoXCJsYWJlbFwiKTsgLy9PcGVuIHRoZSBvcHRpb24gZ3JvdXBcclxuXHJcbiAgICAgICAgdGhlT3B0aW9ucyArPSAnPGxpIGNsYXNzPVwib3B0Z3JvdXBcIj4nICsgY3VyTmFtZSArIFwiPC9saT5cIjsgLy9nZXQgdGhlIG9wdGlvbnNcclxuXHJcbiAgICAgICAgY3VyR3JvdXAuY2hpbGRyZW4oXCJvcHRpb25cIikuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICB2YXIgY3VyT3B0ID0gJCh0aGlzKTtcclxuICAgICAgICAgIHZhciBjdXJWYWwgPSBjdXJPcHQuYXR0cihcInZhbHVlXCIpLFxyXG4gICAgICAgICAgICBjdXJIdG1sID0gY3VyT3B0Lmh0bWwoKSxcclxuICAgICAgICAgICAgaXNTZWxlY3RlZCA9IGN1ck9wdC5hdHRyKFwic2VsZWN0ZWRcIik7XHJcblxyXG4gICAgICAgICAgaWYgKGlzU2VsZWN0ZWQgPT09IFwic2VsZWN0ZWRcIikge1xyXG4gICAgICAgICAgICBzdGFydGluZ09wdGlvbiA9IGN1ckh0bWw7XHJcbiAgICAgICAgICAgIHRoZU9wdGlvbnMgKz0gJzxsaSBjbGFzcz1cInNlbGVjdGVkXCIgZGF0YS12YWx1ZT1cIicgKyBjdXJWYWwgKyAnXCI+JyArIGN1ckh0bWwgKyBcIjwvbGk+XCI7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGVPcHRpb25zICs9ICc8bGkgZGF0YS12YWx1ZT1cIicgKyBjdXJWYWwgKyAnXCI+JyArIGN1ckh0bWwgKyBcIjwvbGk+XCI7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7IC8vQ2xvc2UgdGhlIG9wdGlvbiBncm91cFxyXG4gICAgICAgIC8vdGhlT3B0aW9ucyArPSAnPGxpIGNsYXNzPVwib3B0Z3JvdXAtY2xvc2VcIj48L2xpPic7XHJcbiAgICAgIH0pOyAvL2FkZCBvcHRpb25zIG5vdCBpbiBhIGdyb3VwIHRvIHRoZSB0b3Agb2YgdGhlIGxpc3RcclxuXHJcbiAgICAgIHRoYXQuY2hpbGRyZW4oXCJvcHRpb25cIikuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGN1ck9wdCA9ICQodGhpcyk7XHJcbiAgICAgICAgdmFyIGN1clZhbCA9IGN1ck9wdC5hdHRyKFwidmFsdWVcIiksXHJcbiAgICAgICAgICBjdXJIdG1sID0gY3VyT3B0Lmh0bWwoKSxcclxuICAgICAgICAgIGlzU2VsZWN0ZWQgPSBjdXJPcHQuYXR0cihcInNlbGVjdGVkXCIpO1xyXG5cclxuICAgICAgICBpZiAoaXNTZWxlY3RlZCA9PT0gXCJzZWxlY3RlZFwiKSB7XHJcbiAgICAgICAgICBzdGFydGluZ09wdGlvbiA9IGN1ckh0bWw7XHJcbiAgICAgICAgICB0aGVPcHRpb25zID1cclxuICAgICAgICAgICAgJzxsaSBjbGFzcz1cInNlbGVjdGVkXCIgZGF0YS12YWx1ZT1cIicgKyBjdXJWYWwgKyAnXCI+JyArIGN1ckh0bWwgKyBcIjwvbGk+XCIgKyB0aGVPcHRpb25zO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGVPcHRpb25zID0gJzxsaSBkYXRhLXZhbHVlPVwiJyArIGN1clZhbCArICdcIj4nICsgY3VySHRtbCArIFwiPC9saT5cIiArIHRoZU9wdGlvbnM7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoYXQuY2hpbGRyZW4oXCJvcHRpb25cIikuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGN1ck9wdCA9ICQodGhpcyk7XHJcbiAgICAgICAgdmFyIGN1clZhbCA9IGN1ck9wdC5hdHRyKFwidmFsdWVcIiksXHJcbiAgICAgICAgICBjdXJIdG1sID0gY3VyT3B0Lmh0bWwoKSxcclxuICAgICAgICAgIGlzU2VsZWN0ZWQgPSBjdXJPcHQuYXR0cihcInNlbGVjdGVkXCIpO1xyXG5cclxuICAgICAgICBpZiAoaXNTZWxlY3RlZCA9PT0gXCJzZWxlY3RlZFwiKSB7XHJcbiAgICAgICAgICBzdGFydGluZ09wdGlvbiA9IGN1ckh0bWw7XHJcbiAgICAgICAgICB0aGVPcHRpb25zICs9ICc8bGkgY2xhc3M9XCJzZWxlY3RlZFwiIGRhdGEtdmFsdWU9XCInICsgY3VyVmFsICsgJ1wiPicgKyBjdXJIdG1sICsgXCI8L2xpPlwiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGVPcHRpb25zICs9ICc8bGkgZGF0YS12YWx1ZT1cIicgKyBjdXJWYWwgKyAnXCI+JyArIGN1ckh0bWwgKyBcIjwvbGk+XCI7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0gLy9idWlsZCB0aGUgY3VzdG9tIHNlbGVjdFxyXG5cclxuICAgIGN1c3RvbVNlbGVjdCA9XHJcbiAgICAgICc8ZGl2IGNsYXNzPVwiZHJvcGRvd24tY29udGFpbmVyXCI+PGRpdiBjbGFzcz1cImRyb3Bkb3duLXNlbGVjdCBlbnR5cG8tZG93bi1vcGVuLWJpZ1wiPjxzdmcgY2xhc3M9XCJpY29uXCI+PHVzZSB4bGluazpocmVmPVwiI3RhYi1hcnJvd1wiPjwvdXNlPjwvc3ZnPjxzcGFuPicgK1xyXG4gICAgICBzdGFydGluZ09wdGlvbiArXHJcbiAgICAgICc8L3NwYW4+PC9kaXY+PHVsIGNsYXNzPVwiZHJvcGRvd24tc2VsZWN0LXVsXCIgZGF0YS1yb2xlPVwiJyArXHJcbiAgICAgIGxpc3RJRCArXHJcbiAgICAgICdcIj4nICtcclxuICAgICAgdGhlT3B0aW9ucyArXHJcbiAgICAgIFwiPC91bD48L2Rpdj4gPCEtLSAuY3VzdG9tLXNlbGVjdC13cmFwcGVyIC0tPlwiOyAvL2FwcGVuZCBpdCBhZnRlciB0aGUgYWN0dWFsIHNlbGVjdFxyXG5cclxuICAgICQoY3VzdG9tU2VsZWN0KS5pbnNlcnRBZnRlcih0aGF0KTtcclxuICB9KTtcclxuICB2YXIgc2VsZWN0ZGQgPSAkKFwiLmRyb3Bkb3duLXNlbGVjdFwiKSxcclxuICAgIHNlbGVjdHVsID0gJChcIi5kcm9wZG93bi1zZWxlY3QtdWxcIiksXHJcbiAgICBzZWxlY3RsaSA9ICQoXCIuZHJvcGRvd24tc2VsZWN0LXVsIGxpXCIpOyAvL1RIRU4gbWFrZSB0aGVtIHdvcmtcclxuXHJcbiAgc2VsZWN0ZGQub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAkKHRoaXMpLnBhcmVudChcIi5kcm9wZG93bi1jb250YWluZXJcIikudG9nZ2xlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgfSk7IC8vSGlkZSBpdCBvbiBtb3VzZWxlYXZlXHJcblxyXG4gIHNlbGVjdHVsLm9uKFwibW91c2VsZWF2ZVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAkKHRoaXMpLnBhcmVudChcIi5kcm9wZG93bi1jb250YWluZXJcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgfSk7IC8vc2VsZWN0IHRoZSBvcHRpb25cclxuXHJcbiAgc2VsZWN0bGkub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgdGhhdCA9ICQodGhpcyk7IC8vZW5zdXJlIGNsaWNraW5nIGdyb3VwIGxhYmVscyBkb2VzIG5vdCBjYXVzZSBjaGFuZ2VcclxuXHJcbiAgICBpZiAoIXRoYXQuaGFzQ2xhc3MoXCJvcHRncm91cFwiKSkge1xyXG4gICAgICB2YXIgcGFyZW50VWwgPSB0aGF0LnBhcmVudChcInVsXCIpLFxyXG4gICAgICAgIHRoaXNkZCA9IHBhcmVudFVsLnNpYmxpbmdzKFwiLmRyb3Bkb3duLXNlbGVjdFwiKSxcclxuICAgICAgICBsaWh0bWwgPSB0aGF0Lmh0bWwoKSxcclxuICAgICAgICBsaXZhbHVlID0gdGhhdC5hdHRyKFwiZGF0YS12YWx1ZVwiKSxcclxuICAgICAgICBvcmlnaW5hbFNlbGVjdCA9IFwiI1wiICsgcGFyZW50VWwuYXR0cihcImRhdGEtcm9sZVwiKTsgLy9jbG9zZSB0aGUgZHJvcGRvd25cclxuXHJcbiAgICAgIHBhcmVudFVsLnBhcmVudChcIi5kcm9wZG93bi1jb250YWluZXJcIikudG9nZ2xlQ2xhc3MoXCJhY3RpdmVcIik7IC8vcmVtb3ZlIHNlbGVjdGVkIGNsYXNzIGZyb20gYWxsIGxpc3QgaXRlbXNcclxuXHJcbiAgICAgIHRoYXQuc2libGluZ3MoXCJsaVwiKS5yZW1vdmVDbGFzcyhcInNlbGVjdGVkXCIpOyAvL2FkZCAuc2VsZWN0ZWQgdG8gY2xpY2tlZCBsaVxyXG5cclxuICAgICAgdGhhdC5hZGRDbGFzcyhcInNlbGVjdGVkXCIpOyAvL3NldCB0aGUgdmFsdWUgb2YgdGhlIGhpZGRlbiBpbnB1dFxyXG5cclxuICAgICAgJChvcmlnaW5hbFNlbGVjdCkudmFsKGxpdmFsdWUpOyAvL2NoYW5nZSB0aGUgZHJvcGRvd24gdGV4dFxyXG5cclxuICAgICAgdGhpc2RkLmNoaWxkcmVuKFwic3BhblwiKS5odG1sKGxpaHRtbCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn0pKGpRdWVyeSk7XHJcbiIsIiQoXCIudGFiLWNvbnRlbnRcIikuaGlkZSgpO1xyXG4kKFwiLnRhYi1jb250ZW50OmZpcnN0XCIpLnNob3coKTtcclxuLyogaWYgaW4gdGFiIG1vZGUgKi9cclxuXHJcbiQoXCJ1bC50YWJzIGxpLC5wcm9kdWN0LWNhcmRfX3Jldmlldy1saW5rIGEsLnNjaGVkdWxlLWJ0biBhXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAkKFwiLnRhYi1jb250ZW50XCIpLmhpZGUoKTtcclxuICB2YXIgYWN0aXZlVGFiID0gJCh0aGlzKS5hdHRyKFwicmVsXCIpO1xyXG4gICQoXCIjXCIgKyBhY3RpdmVUYWIpLmZhZGVJbigpO1xyXG4gICQoXCJ1bC50YWJzIGxpXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICQodGhpcykuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgJChcIi50YWJfZHJhd2VyX2hlYWRpbmdcIikucmVtb3ZlQ2xhc3MoXCJkX2FjdGl2ZVwiKTtcclxuICAkKFwiLnRhYl9kcmF3ZXJfaGVhZGluZ1tyZWxePSdcIiArIGFjdGl2ZVRhYiArIFwiJ11cIikuYWRkQ2xhc3MoXCJkX2FjdGl2ZVwiKTtcclxufSk7XHJcbi8qIGlmIGluIGRyYXdlciBtb2RlICovXHJcblxyXG4kKFwiLnRhYl9kcmF3ZXJfaGVhZGluZ1wiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgdmFyIGRfYWN0aXZlVGFiID0gJCh0aGlzKS5hdHRyKFwicmVsXCIpLFxyXG4gICAgYWN0aXZlVGFiQmxvY2sgPSAkKFwiI1wiICsgZF9hY3RpdmVUYWIgKyBcIjpoaWRkZW5cIiksXHJcbiAgICAkdGhpc0FjdGl2ZSA9ICQodGhpcykubm90KFwiLmRfYWN0aXZlXCIpO1xyXG4gICQoXCIudGFiLWNvbnRlbnRcIikuaGlkZSgpO1xyXG4gIGFjdGl2ZVRhYkJsb2NrLmZhZGVJbigpO1xyXG4gICQoXCIudGFiX2RyYXdlcl9oZWFkaW5nXCIpLnJlbW92ZUNsYXNzKFwiZF9hY3RpdmVcIik7XHJcbiAgJHRoaXNBY3RpdmUuYWRkQ2xhc3MoXCJkX2FjdGl2ZVwiKTtcclxuICAkKFwidWwudGFicyBsaVwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAkKFwidWwudGFicyBsaVtyZWxePSdcIiArIGRfYWN0aXZlVGFiICsgXCInXVwiKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxufSk7XHJcbi8qIEV4dHJhIGNsYXNzIFwidGFiX2xhc3RcIlxyXG4gdG8gYWRkIGJvcmRlciB0byByaWdodCBzaWRlXHJcbiBvZiBsYXN0IHRhYiAqL1xyXG5cclxuJChcInVsLnRhYnMgbGlcIikubGFzdCgpLmFkZENsYXNzKFwidGFiX2xhc3RcIik7XHJcbmpRdWVyeShkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xyXG4gIGpRdWVyeShcIi5zY2hlZHVsZS1idG4gYVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICBqUXVlcnkoXCIuc2NoZWR1bGUtbGlua1wiKS50b2dnbGVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICB9KTtcclxufSk7XHJcbmpRdWVyeShkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xyXG4gIGpRdWVyeShcIi5wcm9kdWN0LWNhcmRfX3Jldmlldy1saW5rIGFcIikuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgalF1ZXJ5KFwiLnJldmlldy10YWItbGlua1wiKS50b2dnbGVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICB9KTtcclxufSk7IC8vc2xpZGVzaG93XHJcbiIsIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcclxuICB2YXIgc3luYzEgPSAkKFwiI3N5bmMxXCIpO1xyXG4gIHZhciBzeW5jMiA9ICQoXCIjc3luYzJcIik7XHJcbiAgdmFyIHNsaWRlc1BlclBhZ2UgPSAzOyAvL2dsb2JhbHkgZGVmaW5lIG51bWJlciBvZiBlbGVtZW50cyBwZXIgcGFnZVxyXG5cclxuICB2YXIgc3luY2VkU2Vjb25kYXJ5ID0gdHJ1ZTtcclxuICBzeW5jMVxyXG4gIC5vd2xDYXJvdXNlbCh7XHJcbiAgICBpdGVtczogMSxcclxuICAgIHNsaWRlU3BlZWQ6IDIwMDAsXHJcbiAgICBuYXY6IHRydWUsXHJcbiAgICBhdXRvcGxheTogZmFsc2UsXHJcbiAgICBkb3RzOiB0cnVlLFxyXG4gICAgbG9vcDogdHJ1ZSxcclxuICAgIHJlc3BvbnNpdmVSZWZyZXNoUmF0ZTogMjAwLFxyXG4gICAgbWFyZ2luOiAxMCxcclxuICB9KVxyXG4gIC5vbihcImNoYW5nZWQub3dsLmNhcm91c2VsXCIsIHN5bmNQb3NpdGlvbik7XHJcbiAgc3luYzJcclxuICAub24oXCJpbml0aWFsaXplZC5vd2wuY2Fyb3VzZWxcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgc3luYzIuZmluZChcIi5vd2wtaXRlbVwiKS5lcSgwKS5hZGRDbGFzcyhcImN1cnJlbnRcIik7XHJcbiAgfSlcclxuICAub3dsQ2Fyb3VzZWwoe1xyXG4gICAgaXRlbXM6IHNsaWRlc1BlclBhZ2UsXHJcbiAgICBkb3RzOiB0cnVlLFxyXG4gICAgbmF2OiB0cnVlLFxyXG4gICAgbWFyZ2luOiAxMCxcclxuICAgIHNtYXJ0U3BlZWQ6IDIwMCxcclxuICAgIHNsaWRlU3BlZWQ6IDUwMCxcclxuICAgIHNsaWRlQnk6IHNsaWRlc1BlclBhZ2UsXHJcbiAgICAvL2FsdGVybmF0aXZlbHkgeW91IGNhbiBzbGlkZSBieSAxLCB0aGlzIHdheSB0aGUgYWN0aXZlIHNsaWRlIHdpbGwgc3RpY2sgdG8gdGhlIGZpcnN0IGl0ZW0gaW4gdGhlIHNlY29uZCBjYXJvdXNlbFxyXG4gICAgcmVzcG9uc2l2ZVJlZnJlc2hSYXRlOiAxMDAsXHJcbiAgfSlcclxuICAub24oXCJjaGFuZ2VkLm93bC5jYXJvdXNlbFwiLCBzeW5jUG9zaXRpb24yKTtcclxuXHJcbiAgZnVuY3Rpb24gc3luY1Bvc2l0aW9uKGVsKSB7XHJcbiAgICAvL2lmIHlvdSBzZXQgbG9vcCB0byBmYWxzZSwgeW91IGhhdmUgdG8gcmVzdG9yZSB0aGlzIG5leHQgbGluZVxyXG4gICAgLy92YXIgY3VycmVudCA9IGVsLml0ZW0uaW5kZXg7XHJcbiAgICAvL2lmIHlvdSBkaXNhYmxlIGxvb3AgeW91IGhhdmUgdG8gY29tbWVudCB0aGlzIGJsb2NrXHJcbiAgICB2YXIgY291bnQgPSBlbC5pdGVtLmNvdW50IC0gMTtcclxuICAgIHZhciBjdXJyZW50ID0gTWF0aC5yb3VuZChlbC5pdGVtLmluZGV4IC0gZWwuaXRlbS5jb3VudCAvIDIgLSAwLjUpO1xyXG5cclxuICAgIGlmIChjdXJyZW50IDwgMCkge1xyXG4gICAgICBjdXJyZW50ID0gY291bnQ7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGN1cnJlbnQgPiBjb3VudCkge1xyXG4gICAgICBjdXJyZW50ID0gMDtcclxuICAgIH0gLy9lbmQgYmxvY2tcclxuXHJcbiAgICBzeW5jMi5maW5kKFwiLm93bC1pdGVtXCIpLnJlbW92ZUNsYXNzKFwiY3VycmVudFwiKS5lcShjdXJyZW50KS5hZGRDbGFzcyhcImN1cnJlbnRcIik7XHJcbiAgICB2YXIgb25zY3JlZW4gPSBzeW5jMi5maW5kKFwiLm93bC1pdGVtLmFjdGl2ZVwiKS5sZW5ndGggLSAxO1xyXG4gICAgdmFyIHN0YXJ0ID0gc3luYzIuZmluZChcIi5vd2wtaXRlbS5hY3RpdmVcIikuZmlyc3QoKS5pbmRleCgpO1xyXG4gICAgdmFyIGVuZCA9IHN5bmMyLmZpbmQoXCIub3dsLWl0ZW0uYWN0aXZlXCIpLmxhc3QoKS5pbmRleCgpO1xyXG5cclxuICAgIGlmIChjdXJyZW50ID4gZW5kKSB7XHJcbiAgICAgIHN5bmMyLmRhdGEoXCJvd2wuY2Fyb3VzZWxcIikudG8oY3VycmVudCwgMTAwLCB0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoY3VycmVudCA8IHN0YXJ0KSB7XHJcbiAgICAgIHN5bmMyLmRhdGEoXCJvd2wuY2Fyb3VzZWxcIikudG8oY3VycmVudCAtIG9uc2NyZWVuLCAxMDAsIHRydWUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc3luY1Bvc2l0aW9uMihlbCkge1xyXG4gICAgaWYgKHN5bmNlZFNlY29uZGFyeSkge1xyXG4gICAgICB2YXIgbnVtYmVyID0gZWwuaXRlbS5pbmRleDtcclxuICAgICAgc3luYzEuZGF0YShcIm93bC5jYXJvdXNlbFwiKS50byhudW1iZXIsIDEwMCwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzeW5jMi5vbihcImNsaWNrXCIsIFwiLm93bC1pdGVtXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB2YXIgbnVtYmVyID0gJCh0aGlzKS5pbmRleCgpO1xyXG4gICAgc3luYzEuZGF0YShcIm93bC5jYXJvdXNlbFwiKS50byhudW1iZXIsIDMwMCwgdHJ1ZSk7XHJcbiAgfSk7XHJcbn0pO1xyXG4iXX0=
